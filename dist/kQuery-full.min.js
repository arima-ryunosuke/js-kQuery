(()=>{var ie=Object.defineProperty;var d=(i,e)=>ie(i,"name",{value:e,configurable:!0});var be=(i,e)=>{for(var t in e)ie(i,t,{get:e[t],enumerable:!0})};var B={};be(B,{$FileList:()=>V,$NodeList:()=>v,AsyncFunction:()=>ne,AsyncGeneratorFunction:()=>ye,Collection:()=>U,Configuration:()=>F,CookieObserver:()=>D,CustomEvent:()=>k,F:()=>u,FileReader:()=>W,GeneratorFunction:()=>ve,IntersectionObserver:()=>R,Logger:()=>I,MutationObserver:()=>N,Nullable:()=>p,ObjectStorage:()=>A,Options:()=>C,Promise:()=>$,Proxy:()=>x,ResizeObserver:()=>P,Timer:()=>j,TimerObserver:()=>z,Vector2:()=>H,WeakMap:()=>E});var O=globalThis,p=d(function(){},"Nullable"),ne=(async()=>{}).constructor,ve=function*(){}.constructor,ye=async function*(){}.constructor,v=d(function(){return[NodeList.name,HTMLCollection.name]},"$NodeList"),V=d(function(){return[FileList.name]},"$FileList"),u={anyIsPrimitive(i,...e){if(i==null)return!0;for(let t of e){if(t===Object){if(u.objectIsPlain(i))return!0;continue}if(i instanceof t)return!0}return!["object","function"].includes(typeof i)},anyIsStringable(i){return u.anyIsPrimitive(i)?!0:i?.toString&&i.toString!==Object.prototype.toString},stringToKebabCase(i){return(""+i).replaceAll(/([A-Z])/g,(...e)=>"-"+e[1].toLowerCase())},stringToPascalCase(i,e){e??="-";let t=new RegExp(`(\\${e}([a-z]))`,"ig");return(""+i).replaceAll(t,(...n)=>n[2].toUpperCase())},stringEscape(i,e){let t={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"};switch(i+="",e){default:throw new Error(`${e} is undefied`);case"attr-name":{let n=document.createElement("div");return n.setAttribute(i,""),n.attributes[0].name}case"attr-value":return i.replace(/[&"]/g,n=>t[n]);case"content":return i.replace(/[&<>]/g,n=>t[n]);case"html":return i.replace(/[&"'<>]/g,n=>t[n]);case"regex":return i.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");case"css":case"selector":return CSS.escape(i)}},stringQuote(i,e){switch(i+="",e){default:throw new Error(`${e} is undefied`);case"css-url":return i.includes('"')?i.includes("'")?i.replaceAll(/([ '"()])/g,"\\$1"):"'"+i+"'":'"'+i+'"'}},stringUnquote(i,e){switch(i+="",e){default:throw new Error(`${e} is undefied`);case"css-url":return i.at(0)==='"'&&i.at(-1)==='"'?i.slice(1,-1):i.at(0)==="'"&&i.at(-1)==="'"?i.slice(1,-1).replaceAll(/\\'/g,"'"):i.replaceAll(/\\([ '"()])/g,"$1")}},stringIsNaN(i){return Number.isNaN(parseFloat(i))},stringRender:function(){let i={};return function(e,t,n=null){let r=d((l,...a)=>a.map(c=>n==null||c instanceof String?c:n(c)).map((c,f)=>l[f]+c).concat(l.slice(a.length)).join(""),"tagFunction"),s=`${n}\`${e}\``,o=i[s]??=new Function("",`return globalThis.$__internalTagFunctions.at(-1)\`${e}\`;`);O.$__internalTagFunctions??=[],O.$__internalTagFunctions.push(r);try{return o.call(t)}finally{O.$__internalTagFunctions.pop()}}}(),objectId:function(){let i=new O.WeakMap,e=0;return function(t){return t===null||typeof t!="object"?null:(i.has(t)||i.set(t,++e),i.get(t))}}(),objectFinalize:function(){let i=new FinalizationRegistry(e=>e());return function(e,t){i.register(e,t,e)}}(),objectIsPlain(i){return i==null||typeof i!="object"?!1:i.constructor===Object||i.constructor==null},objectIsArrayLike(i,e=!0){if(i instanceof Array)return!0;if(i==null||typeof i!="object")return!1;let t=Object.keys(i);if(!("length"in i)&&t.length===0)return!1;let n=i.length??(e?null:t.length);if(n==null)return!1;let r=t.indexOf("length");if(r!==-1&&t.splice(r,1),t.length!==+n)return!1;let s=t.map(o=>+o);for(let o=0;o<n;o++)if(s[o]!==o)return!1;return!0},objectToAttributes(i,e=""){let t={};for(let[n,r]of u.objectToEntries(i)){let s=e?`${e}-${n}`:n;if(s.startsWith("data-")&&(s=u.stringToKebabCase(s)),s==="style"&&u.objectIsPlain(r)){let o=[];for(let[l,a]of u.objectToEntries(r))o.push(u.stringToKebabCase(l)+":"+a);o.length&&(t[s]=o.join(";")+";")}else if(s==="class"){let o=[];for(let[l,a]of u.objectToEntries(u.objectToClasses(r)))a&&o.push(l);o.length&&(t[s]=o.join(" "))}else u.objectIsPlain(r)?Object.assign(t,u.objectToAttributes(r,n)):t[s]=r}return t},objectToClasses(i){let e=d(function(n){return(""+n).split(" ").filter(r=>r.length)},"normalizeToken"),t={};if(i instanceof Array)for(let n of i)Object.assign(t,u.objectToClasses(n));else if(u.objectIsPlain(i))for(let[n,r]of u.objectToEntries(i))for(let s of e(n))t[e(s)]=!!r;else for(let n of e(i))t[e(n)]=!0;return t},objectToDataset(i,e=""){let t={};for(let[n,r]of u.objectToEntries(i)){let s=u.stringToKebabCase(e?`${e}-${n}`:n);if(u.objectIsPlain(r)||r instanceof Array){for(let[o,l]of u.objectToEntries(u.objectToDataset(r,s)))t[o]=l;r instanceof Array&&(t[s+"-length"]=r.length)}else t[s]=r}return t},objectToEntries(i){return i instanceof NamedNodeMap?Array.from(i).map(e=>[e.name,e.value]):i instanceof CSSStyleDeclaration?Array.from(i).map(e=>[e,i[e]]):!Object.hasOwn(i,"entries")&&typeof i.entries=="function"?[...i.entries()]:!Object.hasOwn(i,"keys")&&typeof i.keys=="function"?[...Array.from(i.keys()).flatMap(e=>[[e,i[e]]])]:!Object.hasOwn(i,"values")&&typeof i.values=="function"?[...Array.from(i.values()).entries()]:!Object.hasOwn(i,"length")&&"length"in i?[...Array.from(i).entries()]:(Symbol.iterator in i,Object.entries(i))},objectJoin(i,e,t="="){let n=[];for(let[r,s]of u.objectToEntries(i))if(s!==void 0)if(u.objectIsPlain(s)&&(s=u.objectJoin(s,e,t)),t instanceof Function){let o=t(s,r);o&&n.push(o)}else n.push(`${r}${t}${s}`);return n.join(e)},objectWalkRecursive(i,e){let t=e instanceof ne,n=[];for(let[r,s]of u.objectToEntries(i)){let o=d(a=>i[r]=a,"assign"),l=s instanceof Array||u.objectIsPlain(s)?u.objectWalkRecursive(s,e):e(s,r,i);t?n.push(l.then(o)):o(l)}return t?$.all(n).then(r=>i):i},iterableToNodeList(i){i instanceof NodeList&&I.instance.notice("meaningless call to iterableToNodeList");let e=0,t={};for(let n of i)t[e++]={value:n,configurable:!1,writable:!1,enumerable:!0};return t.length={value:e,configurable:!1,writable:!1,enumerable:!1},Object.create(NodeList.prototype,t)},arrayLikeToArrayRecursive(i,e=!0){for(let[t,n]of u.objectToEntries(i))typeof n=="object"&&(i[t]=u.arrayLikeToArrayRecursive(n,e));return u.objectIsArrayLike(i,e)&&(e||"length"in i?i=Array.from(i):i=Object.values(i)),i},entriesToObject(i,e){let t={};for(let[n,r]of i)n.reduce((s,o,l)=>s[o]??=l+1 in n?{}:r,t);return e!=null?u.arrayLikeToArrayRecursive(t,e):t},functionIsNative(i){return Function.prototype.toString.call(i).slice(-15,-2)==="[native code]"},functionToCallbackable(i,e,...t){return function(...n){for(let[r,s]of n.entries()){let o=typeof s=="function"?s:null;if(o&&(n[r]=o.call(e,...t),n[r]===void 0))return}return i.call(this,...n)}},async fetch(i,e={}){if(e.timeout){let n=new AbortController;setTimeout(()=>n.abort(),e.timeout),e.signal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal,delete e.timeout}let t=await O.fetch(i,e);if(!(e.ok??!1)&&!t.ok)throw new Error(`${t.status}: ${t.statusText}`,{cause:t});return t}},F=class i{static{d(this,"Configuration")}static TRUES=Object.freeze(["true","yes","1"]);static instance;#e;constructor(e){i.instance=this,this.#e=e}configure(e,t=!1){for(let[n,r]of Object.entries(e)){if(t||this.#e[n]===void 0){this[n]=r;continue}typeof r=="boolean"?this[n]=i.TRUES.includes(this.#e[n]):typeof r=="number"?this[n]=+this.#e[n]:typeof r=="string"?this[n]=""+this.#e[n]:typeof r=="function"?this[n]=r(this.#e[n],n,this.#e):this[n]=JSON.parse(this.#e[n])}return this}},I=class i{static{d(this,"Logger")}static instance;static anyIsInstanceOf(e,t){return!!(e===t||p===t&&e==null||t===Object&&u.objectIsPlain(e)||t!==Object&&typeof t=="function"&&Object(e)instanceof t||t===Boolean&&u.anyIsPrimitive(e)||t===Number&&(Object(e)instanceof t||!isNaN(e))||t===String&&(Object(e)instanceof t||e?.toString&&e.toString!==Object.prototype.toString))}static anyToDisplayName(e){return e==null?""+e:typeof e=="function"?e.name??""+e:""+e}constructor(e,t,n,r){i.instance=this;let s=d(()=>null,"noop"),o=d(()=>s,"noop2");this.error=t<3?s:r.error.bind(this,n),this.warn=t<4?s:r.warn.bind(this,n),this.info=t<6?s:r.info.bind(this,n),this.debug=t<7?s:r.debug.bind(this,n),this.notice=t<5?s:e?r.warn.bind(this,n):r.info.bind(this,n),this.time=t<7?s:l=>r.time.call(this,`${n} ${l}`),this.timeEnd=t<7?s:l=>r.timeEnd.call(this,`${n} ${l}`),this.assert=e?(l,...a)=>(l instanceof Function&&(a.unshift(""+l),l=l()),r.assert.bind(this,l,n,...a)):o,this.assertInstanceOf=e?(l,...a)=>{for(let c of a)if(i.anyIsInstanceOf(l,c))return s;return r.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} type must be ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementsInstanceOf=e?(l,...a)=>{for(let c of a)if(Object.values(l).every(f=>i.anyIsInstanceOf(f,c)))return s;return r.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} type must be ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementOf=e?(l,...a)=>{for(let c of a)if(c.includes(l))return s;return r.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} must be one of ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementsOf=e?(l,...a)=>{for(let c of a)if(Object.values(l).every(f=>c.includes(f)))return s;return r.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} must be one of ${a.map(i.anyToDisplayName).join("|")}`)}:o}},U=class i extends null{static{d(this,"Collection")}constructor(e,t,n){n??=e;let r=Object.defineProperties(()=>{},{name:{value:`Collection of ${t}`},length:{value:e.length}});return F.instance.debug&&e.forEach((s,o)=>r[o]=s),new x(r,{has(s,o){return o in e?Reflect.has(e,o):(e.length===0&&I.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),e.some(l=>Reflect.has(l,o)))},get(s,o){if(o in e)return Reflect.get(e,o);if(e.length===0&&I.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),o===Symbol.toPrimitive)return a=>e.map(c=>u.anyIsPrimitive(c,Array)?c:Reflect.get(c,o)?.call(c,a)).join();let l=e.map(a=>u.anyIsPrimitive(a,Array)?a:Reflect.get(a,o));return l.every(a=>u.anyIsPrimitive(a,Object,Array))?l:new i(l,`${t}.${o}`,n)},set(s,o,l){return o in e?Reflect.set(e,o,l):(e.length===0&&I.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),e.forEach((a,c)=>u.functionToCallbackable(f=>Reflect.set(a,o,f),a,n?.[c],c)(l)),!0)},deleteProperty(s,o){return o in e?Reflect.deleteProperty(e,o):(e.length===0&&I.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),e.forEach(l=>Reflect.deleteProperty(l,o)),!0)},apply(s,o,l){if(e.length===0)return I.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),[];if(e.some(a=>typeof a=="function")){let a=!1,c=!0,f=!0,h=!0,m=!1,g=e.map((T,M)=>{if(typeof T=="function"){if(T instanceof x&&l.length===0){a=!0;return}T instanceof x||(T.i=M);let b=Reflect.apply(T,o?.[M],l);return c=c&&b===void 0,f=f&&u.anyIsPrimitive(b,Object,Array),h=h&&b===n?.[M],m=m||b instanceof O.Promise,b}});return a?e:c?o:f?g:h?n:m?O.Promise.all(g):new i(g,`${t}()`,n)}if(l.length===0)return e;l.length,I.instance.error("apply called, but not a single case was executed",s)}})}},E=class{static{d(this,"WeakMap")}constructor(){this.map=new O.Map}has(e){return this.map.has(u.objectId(e))}get(e){return this.map.get(u.objectId(e))?.value}getOrSet(e,t){return this.has(e)||this.set(e,t(e)),this.get(e)}set(e,t){return this.map.set(u.objectId(e),{ref:new WeakRef(e),value:t})}reset(e,t){let n=this.get(e);return this.set(e,t(n)),n}delete(e){return this.map.delete(u.objectId(e))}clear(){return this.map.clear()}*entries(){for(let e of this.map.values()){let t=e.ref.deref();if(t===void 0){this.map.delete(t);continue}yield[t,e.value]}}get size(){return[...this.entries()].length}},A=class{static{d(this,"ObjectStorage")}constructor(){this.weakmap=new E}has(e,t){if(t==null)return this.weakmap.has(e);let n=this.weakmap.get(e)??{};return t in n}get(e,t){return t==null?this.weakmap.get(e)??{}:(this.weakmap.get(e)??{})?.[t]}getOrSet(e,t,n){return this.has(e,t)||this.set(e,t,n(e,t)),this.get(e,t)}set(e,t,n){if(t==null)return this.weakmap.set(e,n);let r=this.weakmap.get(e)??{};return r[t]=n,this.weakmap.set(e,r)}reset(e,t,n){let r=this.get(e,t);return this.set(e,t,n(r)),r}delete(e,t){if(t==null)return this.weakmap.delete(e);let n=this.weakmap.get(e)??{};return delete n[t],Object.keys(n).length?!1:this.weakmap.delete(e)}clear(){return this.weakmap.clear()}*entries(){yield*this.weakmap.entries()}get size(){return this.weakmap.size}},$=class i extends O.Promise{static{d(this,"Promise")}static resolvedReasonSymbol=Symbol("resolved");static#e(e,t,n=null){I.instance.assertElementsInstanceOf(e,Function,ne)(),n??=window.navigator.hardwareConcurrency;let r=u.objectToEntries(e).map(([c])=>c),s=0,o=e instanceof Array?new Array(e.length):{},l=d(async function(c){s++;try{o[c]=await e[c](c)}catch(h){if(t)throw h;o[c]=h}let f=r[s];if(f&&e[f]!=null)return l(f)},"execute"),a=[];for(let c of r.slice(0,n))a.push(l(c));return[a,o]}static async concurrencyAll(e,t=null){let[n,r]=i.#e(e,!0,t);return await i.all(n),r}static async concurrencyAllSettled(e,t=null){let[n,r]=i.#e(e,!1,t);return await i.allSettled(n),r}constructor(e){let t,n;super((l,a)=>{t=l,n=a});let r=d(l=>{this.status="fulfilled",t(l)},"resolve2"),s=d(l=>{this.status="rejected",n(l)},"reject2"),o=new AbortController;o.signal.addEventListener("abort",l=>{l.target.reason===i.resolvedReasonSymbol?r(this.resolved):s(l.target.reason)}),e(r,s),this.controller=o,this.resolved=null,this.status="pending"}cancel(e){this.resolved=e,this.controller.abort(i.resolvedReasonSymbol)}abort(e){this.controller.abort(e)}},W=class extends O.FileReader{static{d(this,"FileReader")}promise(){return new $((e,t)=>{this.addEventListener("load",n=>e(n.target.result)),this.addEventListener("error",n=>t(n.target.error))})}},x=class i extends null{static{d(this,"Proxy")}static instances=new WeakSet;static[Symbol.hasInstance](e){return i.instances.has(e)}constructor(e,t){let n=new O.Proxy(e,t);return i.instances.add(n),n}},j=class extends EventTarget{static{d(this,"Timer")}constructor(){super(),this.id=null,this.millisecond=null}static wait(e){let t=new this;return new $((n,r)=>{t.addEventListener("alarm",s=>n(Date.now()-s.detail.time)),t.start(e)}).finally(()=>t.stop())}start(e,t=1){I.instance.assert(this.id===null,"Timer is started, please use restart")(),this.millisecond=e;let n=d((r,s)=>{this.id=setTimeout(()=>{this.dispatchEvent(new k("alarm",{detail:{id:this.id,tick:r,time:s}})),r<t&&n(r+1,Date.now())},this.millisecond)},"start");n(1,Date.now())}restart(e,t){return this.stop(),this.start(e,t)}stop(){clearTimeout(this.id),this.id=null}},C=class i{static{d(this,"Options")}constructor(e,t=!1,n=!1){this.options=e,this.handleNull=t,this.handleUndefined=n}extends(e){return new i(Object.assign({},this.options,e),this.handleNull,this.handleUndefined)}merge(e){let t={};for(let n of Object.keys(this.options))this.handleNull&&n in e&&e[n]===null||this.handleUndefined&&n in e&&e[n]===void 0?t[n]=e[n]:t[n]=e[n]??this.options[n];return t}},z=class i{static{d(this,"TimerObserver")}static observers=new O.Set;static timer=new j;static defaultOptions=new C({interval:1e3});constructor(e,t={}){this.options=i.defaultOptions.merge(t),this.observedNodes=new A,this.callback=n=>{let r=[];for(let[s,o]of this.observedNodes.entries()){let l=this._data(s),a=this._compare(o.data,l);this.observedNodes.set(s,"data",l);for(let c of a)r.push(Object.assign(c,{target:s,time:n.timeStamp}))}for(let s of r)e(s,this.observedNodes.reset(s.target,"last",()=>s))},i.timer.addEventListener("alarm",this.callback)}_data(e){}_compare(e,t){}observe(e){this.observedNodes.set(e,"data",this._data(e)),i.timer.restart(Math.min(i.timer.millisecond??this.options.interval,this.options.interval),1/0),i.observers.add(this)}unobserve(e){this.observedNodes.delete(e),this.observedNodes.size===0&&this.disconnect()}disconnect(){this.observedNodes.clear(),i.timer.removeEventListener("alarm",this.callback),i.observers.delete(this),i.observers.size===0&&i.timer.stop()}entries(){return this.observedNodes.entries()}},D=class i extends z{static{d(this,"CookieObserver")}static defaultOptions=z.defaultOptions.extends({cookieName:void 0});static getOptionsKey(e){return JSON.stringify(this.defaultOptions.merge(e))}constructor(e,t={}){super(e,t),this.options=i.defaultOptions.merge(t)}_data(e){return{cookie:e.cookie,cookies:Object.fromEntries(e.cookie.split("; ").map(t=>t.split(/=(.*)/s).map(decodeURIComponent)))}}_compare(e,t){if(e.cookie===t.cookie)return[];let n=new Set;Object.keys(e.cookies).forEach(s=>n.add(s)),Object.keys(t.cookies).forEach(s=>n.add(s));let r=[];for(let s of n.values())if(this.options.cookieName==null||this.options.cookieName.includes(s)){let o=e.cookies[s],l=t.cookies[s];o!==l&&r.push({cookieName:s,oldValue:o,newValue:l})}return r}},N=class i extends O.MutationObserver{static{d(this,"MutationObserver")}static defaultOptions=new C({attributes:void 0,attributeFilter:void 0,attributeOldValue:void 0,characterData:void 0,characterDataOldValue:void 0,childList:void 0,subtree:void 0});static getOptionsKey(e){return JSON.stringify(this.defaultOptions.merge(e))}constructor(e,t={}){super(function(n){for(let r of n)e(r,this.observedNodes.reset(r.target,()=>r))}),this.options=i.defaultOptions.merge(t),this.observedNodes=new E}observe(e){return this.observedNodes.set(e,null),super.observe(e,this.options)}unobserve(e){super.disconnect();for(let[t]of this.observedNodes.entries())t===e?this.observedNodes.delete(t):this.observe(t,this.options)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},P=class i extends O.ResizeObserver{static{d(this,"ResizeObserver")}static defaultOptions=new C({box:void 0});static getOptionsKey(e){return JSON.stringify(this.defaultOptions.merge(e))}constructor(e,t={}){super(function(n){for(let r of n)e(r,this.observedNodes.reset(r.target,()=>r))},t),this.options=i.defaultOptions.merge(t),this.observedNodes=new E}observe(e){return this.observedNodes.set(e,null),super.observe(e,this.options)}unobserve(e){return this.observedNodes.delete(e),super.unobserve(e)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},R=class i extends O.IntersectionObserver{static{d(this,"IntersectionObserver")}static defaultOptions=new C({root:void 0,rootMargin:void 0,threshold:void 0});static getOptionsKey(e){let t=new O.IntersectionObserver(()=>{},e),n={root:t.root,rootMargin:t.rootMargin,threshold:t.thresholds};return n.root=u.objectId(n.root),JSON.stringify(n)}constructor(e,t={}){t=i.defaultOptions.merge(t),super(function(n){for(let r of n)r.realIntersectionRatio=r.intersectionRatio,r.realIntersectionRatio===0&&r.isIntersecting&&(r.realIntersectionRatio=Number.EPSILON),e(r,this.observedNodes.reset(r.target,()=>r))},t),this.options=t,this.observedNodes=new E}observe(e){return this.observedNodes.set(e,null),super.observe(e)}unobserve(e){return this.observedNodes.delete(e),super.unobserve(e)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},k=class extends O.CustomEvent{static{d(this,"CustomEvent")}constructor(e,t){super(e,t),this.$original=t.$original}},H=class extends DOMPoint{static{d(this,"Vector2")}constructor(e,t,n){super(e,t),this.t=n}during(e){return e.t-this.t}deltaX(e){return e.x-this.x}deltaY(e){return e.y-this.y}distance(e){return Math.sqrt(this.deltaX(e)**2+this.deltaY(e)**2)}degree(e){let t=Math.atan2(this.deltaY(e),this.deltaX(e))*(180/Math.PI)+90;return t<0&&(t+=360),t}velocity(e){return this.distance(e)/this.during(e)}};var q=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){t.attributeName&&(t.attributeFilter=u.objectIsArrayLike(t.attributeName)?t.attributeName:[t.attributeName]),t=Object.assign(t,{attributes:!0,attributeOldValue:!0}),this.eventId=N.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new N((r,s)=>{n(r.target,{subtype:r.attributeName,oldValue:r.oldValue,newValue:r.target.getAttribute(r.attributeName)},{$original:{observer:this.observer,entry:r}})},t),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var _=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){let r=t.attributes;t=Object.assign(t,{childList:!0,attributes:!1}),this.eventId=N.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new N((s,o)=>{for(let l of s.addedNodes)l instanceof Element&&(n(s.target,{subtype:"insert",node:l},{$original:{observer:this.observer,entry:s}}),this.constructor.observers["attribute"+this.eventId]?.observe?.(l));for(let l of s.removedNodes)l instanceof Element&&(n(s.target,{subtype:"remove",node:l},{$original:{observer:this.observer,entry:s}}),this.constructor.observers["attribute"+this.eventId]?.unobserve?.(l))},t),r&&(this.attributer=this.constructor.observers["attribute"+this.eventId]??=new N((s,o)=>{n(s.target.parentElement,{subtype:"change",node:s.target,name:s.attributeName,oldValue:s.oldValue,newValue:s.target.getAttribute(s.attributeName)},{$original:{observer:this.attributer,entry:s}})},{subtree:t.subtree,childList:!1,attributes:!0,attributeOldValue:!0})),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var K=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){this.eventId=D.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new D((r,s)=>{n(r.target,{subtype:r.cookieName,oldValue:r.oldValue,newValue:r.newValue},{$original:{observer:this.observer,entry:r},bubbles:!1,cancelable:!1,composed:!1})},t),this.observer.observe(i)}destructor(i){this.observer.unobserve(i)}};var G=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){t=Object.assign(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["disabled"]}),this.eventId=N.getOptionsKey(t),this.selector=e?`${e}, fieldset`:null,this.observer=this.constructor.observers[e+this.eventId]??=new N((r,s)=>{let o=d(l=>{let a=d(function(h,m){for(let g=h;g!=null;g=g.parentElement)if(m&&g===r.target){if(r.oldValue!=null)return!0}else if(g.disabled)return!0;return!1},"valuer"),c=a(l,!0),f=a(l,!1);c!==f&&n(l,{subtype:c?"enable":"disable",oldValue:c,newValue:f},{$original:{observer:this.observer,entry:r}})},"trigger2");(!e||r.target.matches(e))&&o(r.target),e&&r.target.querySelectorAll(e).forEach(l=>o(l))},t),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var X=class{static{d(this,"default")}constructor(i,e,t,n){t.buttons??=1,this.starting=!1,this.vectors=[],this.down=r=>{r.target.setPointerCapture(r.pointerId),this.starting=!0,this.vectors.splice(0)},this.move=r=>{r.buttons&t.buttons&&this.starting&&this.vectors.push(new H(r.offsetX,r.offsetY,r.timeStamp))},this.up=r=>{if(r.target.releasePointerCapture(r.pointerId),this.starting){if(this.starting=!1,this.vectors.length===0)return;let s=t.threshold??50,o=new H(r.offsetX,r.offsetY,r.timeStamp),l=1+this.vectors.findLastIndex(h=>h.during(o)>s),a=this.vectors[l],c=this.vectors.slice(l),f=c.slice(0,-1).reduce((h,m,g)=>h+c[g].distance(c[g+1]),0);if(f===0)return;this.vectors.splice(0),n(r.target,{velocity:f/a.during(o),degree:a.degree(o),during:a.during(o)},{$original:r,bubbles:!0})}},this.cancel=r=>{r.target.releasePointerCapture(r.pointerId),this.starting=!1,this.vectors.splice(0)},i.addEventListener("pointerdown",this.down),i.addEventListener("pointercancel",this.cancel),i.addEventListener("pointermove",this.move),i.addEventListener("pointerup",this.up)}destructor(i){i.removeEventListener("pointerdown",this.down),i.removeEventListener("pointercancel",this.cancel),i.removeEventListener("pointermove",this.move),i.removeEventListener("pointerup",this.up)}};var J=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){t.first??=!0,this.eventId=R.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new R((r,s)=>{if(t.first||s){let o=s?!s.isIntersecting&&r.isIntersecting?"enter":s.isIntersecting&&!r.isIntersecting?"leave":"hover":null;n(r.target,{subtype:o,oldValue:s?.realIntersectionRatio??null,newValue:r.realIntersectionRatio},{$original:{observer:this.observer,entry:r}})}},t),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var Y=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){t.first??=!0,this.eventId=P.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new P((r,s)=>{if(t.first||s){let o=u.stringToPascalCase(t.box??"content-box","-")+"Size";n(r.target,{subtype:t.box??"content-box",oldValue:s==null?null:s[o][0],newValue:r[o][0]},{$original:{observer:this.observer,entry:r}})}},t),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var Z=class{static{d(this,"default")}constructor(i,e,t,n){t.buttons??=1,this.firstVector=null,this.down=r=>{r.target.setPointerCapture(r.pointerId),this.firstVector=new H(r.offsetX,r.offsetY,r.timeStamp)},this.move=r=>{if(r.buttons&t.buttons&&this.firstVector){let s=new H(r.offsetX,r.offsetY,r.timeStamp),o=this.firstVector.distance(s);o!==0&&n(r.target,{distance:o,deltaX:this.firstVector.deltaX(s),deltaY:this.firstVector.deltaY(s),velocity:this.firstVector.velocity(s),degree:this.firstVector.degree(s),during:this.firstVector.during(s)},{$original:r,bubbles:!0})}},this.up=r=>{r.target.releasePointerCapture(r.pointerId),this.firstVector=null},this.cancel=r=>{r.target.releasePointerCapture(r.pointerId),this.firstVector=null},i.addEventListener("pointerdown",this.down),i.addEventListener("pointermove",this.move),i.addEventListener("pointerup",this.up),i.addEventListener("pointercancel",this.cancel)}destructor(i){i.removeEventListener("pointerdown",this.down),i.removeEventListener("pointermove",this.move),i.removeEventListener("pointerup",this.up),i.removeEventListener("pointercancel",this.cancel)}};var Q=class{static{d(this,"default")}static observers={};constructor(i,e,t,n){t.first??=!0,this.eventId=P.getOptionsKey(t),this.observer=this.constructor.observers[this.eventId]??=new P((r,s)=>{let o=r.contentRect.x>0||r.contentRect.y>0||r.contentRect.width>0||r.contentRect.height>0;(t.first||s)&&o!==s?.visible&&n(r.target,{subtype:"content-visibility",oldValue:s==null?null:!o,newValue:o},{$original:{observer:this.observer,entry:r}})},t),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var ee=class{static{d(this,"KQuery")}constructor(e){let t=this;this.API=B,this.config=new F(function(){if(u.objectIsPlain(e)&&!e.url)return e;let n={};if(e.url||e.src)for(let[r,s]of new URL(e.url||e.src).searchParams.entries())r.startsWith("kQuery-")&&(n[r.substring(7)]=s);if(e instanceof HTMLScriptElement){for(let[r,s]of u.objectToEntries(e.dataset))if(r.startsWith("kquery")){let o=r.substring(6);n[o.charAt(0).toLowerCase()+o.substring(1)]=s}}return n}()),this.config.configure({debug:!1,logLevel:0,global:"kQuery"}),globalThis[this.config.global]=this,this.logger=new I(this.config.debug,this.config.logLevel,"[kQuery]",globalThis.console)}extends(e){let t=this,n=e.name?e.name:e;this.logger.time(n);for(let[r,s]of Object.entries(e(t))){let o=Object.getOwnPropertyDescriptors(s);for(let l of Object.values(o))if(l.set){let a=l.set;(t.config.resetNative||!u.functionIsNative(a))&&(l.set=function(...c){return u.functionToCallbackable(a.bind(this),this,this)(...c)})}for(let l of r.split(","))if(l.charAt(0)==="$")for(let a of B[l]())for(let[c,f]of Object.entries(o))c!=="length"&&Object.defineProperty(globalThis[a].prototype,c,{get(){let h=u.objectToEntries(this).map(([m,g])=>g?.[c]);return h.length&&h.every(m=>u.anyIsPrimitive(m,Object,Array,FileList))?h:new U(h,c,this)},set(h){return u.objectToEntries(this).forEach(([m,g])=>{c in g&&u.functionToCallbackable(T=>g[c]=T,this,g,m)(h)})},configurable:f.configurable,enumerable:f.enumerable});else Object.defineProperties(globalThis[l].prototype,o)}this.logger.timeEnd(n)}};function oe(i){let e={EventTarget:["dispatchEvent"],Element:["computedStyleMap","elementTiming","getInnerHTML","onbeforecopy","onbeforecut","onbeforepaste","onfullscreenchange","onfullscreenerror","onsearch","scrollIntoViewIfNeeded"],HTMLAnchorElement:["attributionSrc","charset","coords","name","rev","shape"],HTMLAreaElement:["noHref"],HTMLBRElement:["clear"],HTMLBodyElement:["aLink","background","bgColor","link","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","text","vLink"],HTMLDListElement:["compact"],HTMLDirectoryElement:["*"],HTMLDivElement:["align"],HTMLElement:["attributeStyleMap","editContext","onabort","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforematch","onbeforetoggle","onbeforexrselect","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerrawupdate","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onscrollsnapchange","onscrollsnapchanging","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwheel","virtualKeyboardPolicy","writingSuggestions"],HTMLEmbedElement:["align","name"],HTMLFencedFrameElement:["*"],HTMLFontElement:["color","face","size"],HTMLFormElement:["requestAutocomplete"],HTMLFrameElement:["*"],HTMLFrameSetElement:["cols","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","rows"],HTMLHRElement:["align","color","noShade","size","width"],HTMLHeadingElement:["align"],HTMLHtmlElement:["version"],HTMLIFrameElement:["adAuctionHeaders","align","allowPaymentRequest","credentialless","csp","featurePolicy","frameBorder","longDesc","marginHeight","marginWidth","privateToken","sharedStorageWritable","scrolling"],HTMLImageElement:["align","attributionSrc","border","fetchPriority","hspace","longDesc","name","sharedStorageWritable","vspace"],HTMLInputElement:["align","incremental","useMap","webkitdirectory"],HTMLLIElement:["type"],HTMLLegendElement:["align"],HTMLLinkElement:["charset","blocking","fetchPriority","rev","target"],HTMLMarqueeElement:["*"],HTMLMediaElement:["captureStream","controller","controlsList","disableRemotePlayback","mediaGroup","onencrypted","onwaitingforkey","remote","setSinkId","sinkId"],HTMLMenuElement:["compact"],HTMLMetaElement:["scheme"],HTMLOListElement:["compact"],HTMLObjectElement:["align","archive","border","code","codeBase","codeType","declare","hspace","standby","vspace"],HTMLParagraphElement:["align"],HTMLParamElement:["name","type","value","valueType"],HTMLPreElement:["width"],HTMLScriptElement:["attributionSrc","blocking","charset","event","fetchPriority"],HTMLStyleElement:["blocking","type"],HTMLTableCaptionElement:["align"],HTMLTableCellElement:["align","axis","bgColor","ch","chOff","height","noWrap","vAlign","width"],HTMLTableColElement:["align","ch","chOff","span","vAlign","width"],HTMLTableElement:["align","bgColor","border","cellPadding","cellSpacing","frame","rules","summary","width"],HTMLTableRowElement:["align","bgColor","ch","chOff","vAlign"],HTMLTableSectionElement:["align","ch","chOff","vAlign"],HTMLUListElement:["compact","type"],HTMLVideoElement:["cancelVideoFrameCallback","onenterpictureinpicture","onleavepictureinpicture","playsInline","requestPictureInPicture","requestVideoFrameCallback"]},t={Blob:["arrayBuffer","size","slice","stream","text","type"],Element:["after","animate","append","ariaAtomic","ariaAutoComplete","ariaBrailleLabel","ariaBrailleRoleDescription","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColIndexText","ariaColSpan","ariaCurrent","ariaDescription","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowIndexText","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","assignedSlot","attachShadow","attributes","before","checkVisibility","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","currentCSSZoom","firstElementChild","getAnimations","getAttribute","getAttributeNS","getAttributeNames","getAttributeNode","getAttributeNodeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","getHTML","hasAttribute","hasAttributeNS","hasAttributes","hasPointerCapture","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","moveBefore","namespaceURI","nextElementSibling","outerHTML","part","prefix","prepend","previousElementSibling","querySelector","querySelectorAll","releasePointerCapture","remove","removeAttribute","removeAttributeNS","removeAttributeNode","replaceChildren","replaceWith","requestFullscreen","requestPointerLock","role","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNS","setAttributeNode","setAttributeNodeNS","setHTMLUnsafe","setPointerCapture","shadowRoot","slot","tagName","toggleAttribute"],EventTarget:["addEventListener","removeEventListener"],File:["lastModified","lastModifiedDate","name"],HTMLAnchorElement:["download","hash","host","hostname","href","hreflang","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","target","text","toString","type","username"],HTMLAreaElement:["alt","coords","download","hash","host","hostname","href","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","shape","target","toString","username"],HTMLBaseElement:["href","target"],HTMLButtonElement:["checkValidity","disabled","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","labels","name","popoverTargetAction","popoverTargetElement","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLCanvasElement:["captureStream","getContext","height","toBlob","toDataURL","transferControlToOffscreen","width"],HTMLDataElement:["value"],HTMLDataListElement:["options"],HTMLDetailsElement:["name","open"],HTMLDialogElement:["close","closedBy","open","requestClose","returnValue","show","showModal"],HTMLElement:["accessKey","attachInternals","autocapitalize","autofocus","blur","click","contentEditable","dataset","dir","draggable","enterKeyHint","focus","hidden","hidePopover","inert","innerText","inputMode","isContentEditable","lang","nonce","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth","outerText","popover","showPopover","spellcheck","style","tabIndex","title","togglePopover","translate"],HTMLEmbedElement:["getSVGDocument","height","src","type","width"],HTMLFieldSetElement:["checkValidity","disabled","elements","form","name","reportValidity","setCustomValidity","type","validationMessage","validity","willValidate"],HTMLFormElement:["acceptCharset","action","autocomplete","checkValidity","elements","encoding","enctype","length","method","name","noValidate","rel","relList","reportValidity","requestSubmit","reset","submit","target"],HTMLIFrameElement:["allow","allowFullscreen","contentDocument","contentWindow","getSVGDocument","height","loading","name","referrerPolicy","sandbox","src","srcdoc","width"],HTMLImageElement:["alt","complete","crossOrigin","currentSrc","decode","decoding","height","isMap","loading","lowsrc","naturalHeight","naturalWidth","referrerPolicy","sizes","src","srcset","useMap","width","x","y"],HTMLInputElement:["accept","alt","autocomplete","checkValidity","checked","defaultChecked","defaultValue","dirName","disabled","files","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","height","indeterminate","labels","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","popoverTargetAction","popoverTargetElement","readOnly","reportValidity","required","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","showPicker","size","src","step","stepDown","stepUp","type","validationMessage","validity","value","valueAsDate","valueAsNumber","width","willValidate"],HTMLLIElement:["value"],HTMLLabelElement:["control","form","htmlFor"],HTMLLegendElement:["form"],HTMLLinkElement:["as","crossOrigin","disabled","href","hreflang","imageSizes","imageSrcset","integrity","media","referrerPolicy","rel","relList","sheet","sizes","type"],HTMLMapElement:["areas","name"],HTMLMediaElement:["addTextTrack","autoplay","buffered","canPlayType","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","load","loop","muted","networkState","pause","paused","play","playbackRate","played","preload","preservesPitch","readyState","seekable","seeking","src","srcObject","textTracks","volume"],HTMLMetaElement:["content","httpEquiv","media","name"],HTMLMeterElement:["high","labels","low","max","min","optimum","value"],HTMLModElement:["cite","dateTime"],HTMLOListElement:["reversed","start","type"],HTMLObjectElement:["checkValidity","contentDocument","contentWindow","data","form","getSVGDocument","height","name","reportValidity","setCustomValidity","type","useMap","validationMessage","validity","width","willValidate"],HTMLOptGroupElement:["disabled","label"],HTMLOptionElement:["defaultSelected","disabled","form","index","label","selected","text","value"],HTMLOutputElement:["checkValidity","defaultValue","form","htmlFor","labels","name","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLProgressElement:["labels","max","position","value"],HTMLQuoteElement:["cite"],HTMLScriptElement:["async","crossOrigin","defer","htmlFor","integrity","noModule","referrerPolicy","src","text","type"],HTMLSelectElement:["add","autocomplete","checkValidity","disabled","form","item","labels","length","multiple","name","namedItem","options","remove","reportValidity","required","selectedIndex","selectedOptions","setCustomValidity","showPicker","size","type","validationMessage","validity","value","willValidate"],HTMLSlotElement:["assign","assignedElements","assignedNodes","name"],HTMLSourceElement:["height","media","sizes","src","srcset","type","width"],HTMLStyleElement:["disabled","media","sheet"],HTMLTableCellElement:["abbr","cellIndex","colSpan","headers","rowSpan","scope"],HTMLTableElement:["caption","createCaption","createTBody","createTFoot","createTHead","deleteCaption","deleteRow","deleteTFoot","deleteTHead","insertRow","rows","tBodies","tFoot","tHead"],HTMLTableRowElement:["cells","deleteCell","insertCell","rowIndex","sectionRowIndex"],HTMLTableSectionElement:["deleteRow","insertRow","rows"],HTMLTemplateElement:["content","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shadowRootSerializable"],HTMLTextAreaElement:["autocomplete","checkValidity","cols","defaultValue","dirName","disabled","form","labels","maxLength","minLength","name","placeholder","readOnly","reportValidity","required","rows","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","textLength","type","validationMessage","validity","value","willValidate","wrap"],HTMLTimeElement:["dateTime"],HTMLTitleElement:["text"],HTMLTrackElement:["default","kind","label","readyState","src","srclang","track"],HTMLVideoElement:["disablePictureInPicture","getVideoPlaybackQuality","height","poster","videoHeight","videoWidth","width"],Node:["appendChild","baseURI","childNodes","cloneNode","compareDocumentPosition","contains","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isDefaultNamespace","isEqualNode","isSameNode","lastChild","lookupNamespaceURI","lookupPrefix","nextSibling","nodeName","nodeType","nodeValue","normalize","ownerDocument","parentElement","parentNode","previousSibling","removeChild","replaceChild","textContent"]},n=i.config.debug?function(){let o=Object.create(null);for(let a of Object.keys(Object.getOwnPropertyDescriptors(globalThis))){if(!a.match(/^((EventTarget)|(Blob|File)|(Node|Element)|(HTML.*Element))$/))continue;let c=globalThis[a];for(let f in c.prototype)f.toUpperCase()!==f&&(f.match(/^(webkit|moz)[A-Z]/)||f.startsWith("onwebkit")||Object.prototype.hasOwnProperty.call(c.prototype,f)&&(a in e&&(e[a].includes(f)||e[a].includes("*"))||(o[c.name]=(o[c.name]??new Set).add(f))))}let l={};for(let a of Object.keys(o).toSorted())l[a]=[...o[a]].toSorted();return i.logger.debug(Object.keys(l).map(a=>`// https://developer.mozilla.org/docs/Web/API/${a}
${a}: ${JSON.stringify(l[a])},`).join(`
`)),l}():t;i.config.configure({appendNative:!0,resetNative:!0});let r=i.config.appendNative?{[[Node.name]]:{[Symbol.toPrimitive](){return this.outerHTML??this.nodeValue??null}},[[NodeList.name]]:{[Symbol.toPrimitive](){return[...this].join("")},dispatchEvent(o){let l=[];for(let a of this){let c=new o.constructor(o.type,o);l.push(a.dispatchEvent(c))}return l}},[[RadioNodeList.name]]:{get name(){return this[0]?.name},set name(o){[...this].forEach(function(l){l.name=o})}}}:{},s=d(function(o,l,a){r[o]??={},Object.defineProperty(r[o],l,a)},"defineProperty");for(let[o,l]of Object.entries(n))if(o in globalThis){let a=globalThis[o].prototype;for(let c of l){let f=Object.getOwnPropertyDescriptor(a,c);f&&(s(o,c,f),(globalThis[o]===globalThis.EventTarget||a instanceof EventTarget)&&s(v.name,c,f),(globalThis[o]===globalThis.Node||a instanceof Node)&&s(v.name,c,f),(globalThis[o]===globalThis.Blob||a instanceof Blob)&&s(V.name,c,f))}}return r}d(oe,"autoproperties");function ae(i){return i.config.configure({customEventPrefix:"$"}),Object.assign(i,{wellknownEvents:{click:PointerEvent},customEvents:{}}),{[[EventTarget.name,v.name]]:function(){let e=new E,t=d(function(s,o){if(o==null){if(!s)throw new Error("Empty EventType is only allowed this context");return[[null,[]]]}return(""+o).trim().split(/\s+/).map(l=>l.trim().split(".")).map(([l,...a])=>{if(!s&&!l.length)throw new Error("Empty EventType is only allowed this context");return[l,a.filter(c=>c.length)]})},"eachType"),n=d(function(s){return s in i.customEvents&&(s=i.config.customEventPrefix+s),s},"internalEventName"),r=new class{constructor(){let s=d(function(o,l){let a=new Set;for(let c of o)if(c instanceof Element){c.matches(l)&&a.add(c);for(let f of c.querySelectorAll(l))a.add(f)}return a},"querySelectorThisAndAll");this.nodeSelectorCallback=new E,this.observer=new N(o=>{for(let[l,a]of this.nodeSelectorCallback.entries())for(let{selector:c,callbacks:f}of a){for(let h of s(o.addedNodes,c))i.logger.debug("Insert node to delegation emulation of ",l),f.insert(h);for(let h of s(o.removedNodes,c))i.logger.debug("Delete node to delegation emulation of ",l),f.delete(h)}},{attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0})}watch(s,o,l){if(o==null)l.insert(s);else{this.nodeSelectorCallback.getOrSet(s,()=>[]).push({selector:o,callbacks:l});for(let a of s.querySelectorAll(o))i.logger.debug("Initial node to delegation emulation of ",a),l.insert(a);return this.observer.observe(s)}}unwatch(s,o,l){o==null?l.delete(s):this.nodeSelectorCallback.reset(s,a=>a.filter(c=>c.selector===o&&c.callbacks===l?(i.logger.debug("Unwatch node to delegation emulation of ",s),!1):!0))}};return{$on(s,o,l,a){typeof o=="function"&&(a=l,l=o,o=null),a=Object.assign({once:void 0,capture:void 0,passive:void 0,signal:void 0,ownself:!1,interval:void 0,throttle:void 0,debounce:void 0,leading:void 0,trailing:void 0},a),i.logger.assertInstanceOf(s,String)(),i.logger.assertInstanceOf(o,p,String)(),i.logger.assertInstanceOf(l,Function)(),i.logger.assertInstanceOf(a,Object)(),o!=null&&a.capture&&i.logger.warn("Delegation of capture phase isn't tested, so might not work well"),a.throttle&&!a.debounce&&(a.leading??=!0,a.trailing??=!1),a.debounce&&!a.throttle&&(a.leading??=!1,a.trailing??=!0);for(let[c,f]of t(!1,s)){let h={type:c,namespaces:f,selector:o,listener:l,options:a,counter:new E,collectors:[]},m;!(this instanceof Window)&&c in i.customEvents&&(m=new i.customEvents[c](this,o,a,function(b,w={},y={}){m.bubbles="bubbles"in y,y.$original??={},y.$original.$eventId??=m.eventId,y.bubbles??=(m.selector??o)!=null,y.detail??=w,b.$trigger(c,y)}),m.handlers??={},m.handlers.insert??=b=>{},m.handlers.delete??=b=>{},r.watch(this,m.selector??o,m.handlers),h.collectors.push(()=>{r.unwatch(this,m.selector??o,m.handlers),m.destructor?.(this)}));let g=new A,T=d(async b=>{if(b.$namespaces?.length&&b.$namespaces.some(L=>!h.namespaces.includes(L))||m?.eventId!==b.$original?.$eventId)return;let w=b.target,y=d(async(L,te)=>{let re=j.wait(L),se=g.reset(w,"timer",()=>re);return!((!te||se?.status==="pending")&&(se?.cancel(null),await re===null||!a.trailing))},"debounce");if(!(a.debounce!=null&&!await y(a.debounce,a.leading))){if(a.throttle!=null){if(g.getOrSet(w,"start",()=>Date.now()-(a.leading?a.throttle:0))+a.throttle>Date.now()&&!await y(a.throttle,!1))return;g.set(w,"start",Date.now())}if(h.selector==null)return h.listener.call(this,b);for(let L=w;L&&L!==this;L=L.parentNode){if(L.matches(h.selector)&&!(a.once&&h.counter.get(w)))return!h.counter.reset(w,te=>(te??0)+1)&&a.once&&m?.handlers?.delete?.(w),m&&!m.bubbles&&b.stopPropagation(),b.$delegateTarget=L,h.listener.call(this,b);if(a.ownself)break}}},"handler");h.handler=new WeakRef(T),e.getOrSet(this,()=>[]).push(h);let M=h.selector==null?a:Object.assign({},a,{once:!1});this.addEventListener(n(c),T,M),h.destructor=function(){i.logger.debug("Release of ",c,o,a),h.collectors.forEach(b=>b()),h.collectors=[]},u.objectFinalize(T,h.destructor)}return this},$off(s,o,l,a){typeof o=="function"&&(a=l,l=o,o=null),i.logger.assertInstanceOf(s,p,String)(),i.logger.assertInstanceOf(o,p,String)(),i.logger.assertInstanceOf(l,p,Function)(),i.logger.assertInstanceOf(a,p,Object)();for(let[c,f]of t(!0,s))e.reset(this,h=>(h??[]).filter(m=>c&&c!==m.type||f.length&&f.some(g=>!m.namespaces.includes(g))||o&&o!==m.selector||l&&l!==m.listener||a?.capture!==m.options.capture?!0:(this.removeEventListener(n(m.type),m.handler.deref(),m.options),m.destructor(),!1)));return this},$trigger(s,o={}){i.logger.assertInstanceOf(s,String)(),i.logger.assertInstanceOf(o,Object)();let l=!0;for(let[a,c]of t(!1,s)){let f=i.wellknownEvents[a]??k,h=new f(n(a),Object.assign({bubbles:!0,cancelable:!0,composed:!0},o));h.$namespaces=c;let m=this.dispatchEvent(h);i.logger.debug(`Event ${a} is ${m?"completed":"canceled"}`,this,h),l=l&&m}return l},$events(s,o,l=!1){i.logger.assertInstanceOf(s,p,String)(),i.logger.assertInstanceOf(o,p,Boolean)(),i.logger.assertInstanceOf(l,Boolean)();let a=e.get(this)??[];if(o)for(let c=this.parentNode;c;c=c.parentNode)for(let f of e.get(c)??[])f.selector!=null&&this.matches(f.selector)&&(f.options.once&&f.counter.get(this)||a.push(f));return a.filter(c=>{if(!c.handler.deref())return!1;for(let[f,h]of t(!0,s))if(f&&f!==c.type||h.length&&h.some(m=>!c.namespaces.includes(m)))return!1;return l===(c.options.capture??!1)})}}}()}}d(ae,"events");function le(i){return{[[Element.name,v.name]]:function(){let e=new A;class t{static{d(this,"ProxyProperty")}static NotImplemented=Symbol("NotImplemented");constructor(r,s){this.node=r,this.name=s,this.object=r[s]}has(r,s){return this._hasValue(s)}_hasValue(r){return Reflect.has(this.object,r)}get(r,s){if(s===Symbol.toPrimitive||s==="toString")return()=>this._getString();if(s.charAt(0)==="$"){let l=this._get$Value(s.substring(1));if(l!==t.NotImplemented)return l}let o=Reflect.get(this.object,s);return typeof o=="function"?this._getFunction(s,o):this._getValue(s,o)}_getString(){}_get$Value(r){return t.NotImplemented}_getFunction(r,s){let o=d((...l)=>{let a=u.functionToCallbackable(s,this.node,this.node,o.i).call(this.object,...l);return a===void 0?e.get(this.node,this.name):a},"method");return o}_getValue(r,s){return s}set(r,s,o){return typeof o=="function"&&(o=this._setFunction(s,o)),this._setValue(s,o),!0}_setFunction(r,s){return s.call(this.object,this.node)}_setValue(r,s){s!==void 0&&this.apply(null,null,[{[r]:s}])}deleteProperty(r,s){let o=Reflect.get(this.object,s);return this._deleteValue(s,o),!0}_deleteValue(r,s){Reflect.deleteProperty(this.object,r)}apply(r,s,o){return o[0]instanceof Array||u.objectIsPlain(o[0])?(this._applySet(...o),e.get(this.node,this.name)):this._applyGet(...o)}_applyGet(...r){}_applySet(...r){}}return{get $attrs(){return e.getOrSet(this,"attributes",(n,r)=>new x(d(function(){},"$Attrs"),new class extends t{_getString(){return Object.values(n.attributes).map(s=>`${u.stringEscape(s.name,"attr-name")}="${u.stringEscape(s.value,"attr-value")}"`).join(" ")}_get$Value(s){return n.closest(`[${u.stringEscape(s,"css")}]`)?.getAttribute(s)??null}_getValue(s,o){return o?.value}_deleteValue(s,o){n.removeAttribute(s)}_applyGet(){return Object.fromEntries(Array.from(n.attributes,s=>[s.name,s.value]))}_applySet(s){let o=u.objectToAttributes(s);for(let[l,a]of Object.entries(o))typeof a=="boolean"?n.toggleAttribute(l,a):n.setAttribute(l,a)}}(n,r)))},set $attrs(n){if(i.logger.assertInstanceOf(n,p,Object)(),n!=null){for(let r of Object.values(this.attributes))this.attributes.removeNamedItem(r.name);this.$attrs(n)}},get $data(){return e.getOrSet(this,"dataset",(n,r)=>new x(d(function(){},"$Data"),new class extends t{_getString(){return JSON.stringify(this.apply(null,null,[""]))}_get$Value(s){return this._applyGet(s)}_applyGet(s){let o={};for(let[m,g]of Object.entries(n.dataset))o[m]=g;if(typeof s!="string")return o;let l=u.stringToKebabCase(s),a=new RegExp(l?`^${s}[A-Z]`:".*"),c={};for(let[m,g]of Object.entries(o))a.test(m)&&(c[u.stringToKebabCase(m)]=g);let f=Object.entries(c).map(([m,g])=>[m.split("-"),g]),h=u.entriesToObject(f,!0);return l?l.split("-").reduce((m,g)=>m?.[g],h)??{}:h}_applySet(s){for(let[o,l]of Object.entries(u.objectToDataset(s)))n.dataset[u.stringToPascalCase(o)]=l}}(n,r)))},set $data(n){if(i.logger.assertInstanceOf(n,p,Object)(),n!=null){for(let r of Object.keys(this.dataset))delete this.dataset[r];this.$data(n)}},get $style(){return e.getOrSet(this,"style",(n,r)=>new x(d(function(){},"$Style"),new class extends t{_hasValue(s){return!!Reflect.get(n.style,s)}_getString(){return n.style.cssText}_get$Value(s){let[o,l]=s.split("::");l=l?`::${l}`:null;let a=n.$window.getComputedStyle(n,l);return o.length?a.getPropertyValue(u.stringToKebabCase(o)):a}_getValue(s,o){return s.startsWith("--")?n.style.getPropertyValue(u.stringToKebabCase(s)):o||o===void 0?o:null}_deleteValue(s,o){n.style.removeProperty(u.stringToKebabCase(s))}_applyGet(s){let o={};for(let l=0;;l++){let a=n.style[l];if(!a)break;if(s===!0){let c=n.style.getPropertyPriority(a);o[a]=n.style.getPropertyValue(a)+(c?`!${c}`:"")}else o[a]=n.style.getPropertyValue(a)}return o}_applySet(s){for(let[o,l]of u.objectToEntries(s)){let a=""+l,c=a.replace(/!important$/,"");n.style.setProperty(u.stringToKebabCase(o),c,a===c?"":"important")}}}(n,r)))},set $style(n){i.logger.assertInstanceOf(n,p,Object)(),n!=null&&(this.setAttribute("style",""),this.$style(n))},get $class(){return e.getOrSet(this,"classList",(n,r)=>new x(d(function(){},"$Class"),new class extends t{_hasValue(s){return n.classList.contains(s)}_getString(){return n.classList.value}_getValue(s,o){return n.classList.contains(s)}_deleteValue(s,o){n.classList.remove(s)}_applyGet(){return[...n.classList.values()]}_applySet(s){for(let[o,l]of u.objectToEntries(u.objectToClasses(s)))n.classList.toggle(o,l)}}(n,r)))},set $class(n){i.logger.assertInstanceOf(n,p,String,Object,Array)(),n!=null&&(this.classList.value="",this.$class(n))}}}()}}d(le,"attributes");function ce(i){return{[[Node.name,v.name]]:function(){let e=new E;return{get $bag(){let t={};return e.getOrSet(this,()=>new x(d(function(){},"$Bag"),{has(n,r){return Reflect.has(t,r)},get(n,r){return r===Symbol.toPrimitive||r==="toString"?()=>JSON.stringify(t):Reflect.get(t,r)},set(n,r,s){return Reflect.set(t,r,s),!0},deleteProperty(n,r){return Reflect.deleteProperty(t,r),!0},apply(n,r,s){return u.objectIsPlain(s[0])&&Object.assign(t,s[0]),t}}))},set $bag(t){if(i.logger.assertInstanceOf(t,p,Object)(),t==null)return;let n=this.$bag;for(let r of Object.keys(n()))delete n[r];n(t)}}}(),[[HTMLStyleElement.name,HTMLLinkElement.name,v.name]]:{async $contents(e=!0){let t;if(this instanceof HTMLLinkElement?t=await(await u.fetch(this.href)).text():t=this.textContent,e){let n=/url\(((['"])?.+?\2?)\)/g,r=d(l=>(l=u.stringUnquote(l,"css-url"),l.charAt(0)==="#"?null:new URL(l,this.href)),"normalize"),s={};for(let[,l]of t.matchAll(n)){let a=r(l);a&&(s[a]??=async c=>{let f=await u.fetch(c).catch(h=>({ok:!1}));return f.ok?(await f.blob()).$dataURL():null})}let o=await $.concurrencyAll(s,6);t=t.replace(n,(l,a)=>{let c=r(a);return c&&o[c]?"url("+u.stringQuote(o[c]+c.hash,"css-url")+")":l})}return t}},[[HTMLScriptElement.name,v.name]]:{async $contents(){let e;return this.src?e=await(await u.fetch(this.src)).text():e=this.textContent,e}},[[HTMLImageElement.name,v.name]]:{get $URL(){return new URL(this.src,this.baseURI)},set $URL(e){this.src=e},async $contents(){let e=new URL(this.currentSrc,this.baseURI),t=await u.fetch(e),n=await t.blob();return new File([n],e.pathname.split("/").at(-1)??this.currentSrc,{type:n.type,...t.headers.has("last-modified")?{lastModified:new Date(t.headers.get("last-modified")).getTime()}:{}})},async $dataURL(e,t){return i.logger.assertInstanceOf(e,p,String)(),i.logger.assertInstanceOf(t,p,Number)(),new $(n=>{let r=this.$document.createElement("canvas");r.width=this.width,r.height=this.height,r.getContext("2d").drawImage(this,0,0),n(r.toDataURL(e,t))})},async $blob(e,t){return i.logger.assertInstanceOf(e,p,String)(),i.logger.assertInstanceOf(t,p,Number)(),new $(n=>{let r=this.$document.createElement("canvas");r.width=this.width,r.height=this.height,r.getContext("2d").drawImage(this,0,0),r.toBlob(n,e,t)})},async $file(e,t){i.logger.assertInstanceOf(e,p,String)(),i.logger.assertInstanceOf(t,p,Number)();let n=new URL(this.currentSrc,this.baseURI);return new File([await this.$blob(e,t)],n.pathname.split("/").at(-1)??this.currentSrc,{type:e})}},[[HTMLAnchorElement.name,v.name]]:{get $URL(){return new URL(this.href,this.baseURI)},set $URL(e){this.href=e}},[[HTMLFormElement.name,v.name]]:{get $URL(){return new URL(this.action,this.baseURI)},set $URL(e){this.action=e}},[[Blob.name,V.name]]:{$download(e){i.logger.assertInstanceOf(e,p,String)(),e??=this.name??"";let t=URL.createObjectURL(this);document.$createElement("a",{href:t,download:e}).click(),setTimeout(function(){URL.revokeObjectURL(t)},1e3)},async $text(e){return i.logger.assertInstanceOf(e,p,String)(),new TextDecoder(e).decode(await this.arrayBuffer())},async $base64(){let e=await this.$dataURL();return e.substring(e.indexOf(",")+1)},async $dataURL(e){i.logger.assertInstanceOf(e,p,String)();let t=e?this.slice(0,this.size,e):this,n=new W;return n.readAsDataURL(t),n.promise()}}}}d(ce,"data");function ue(i){return{[[Document.name]]:{get $topLayerElement(){let e=this.$$(":modal, :popover-open, :fullscreen");if(e.length<=1)return e[0]??null;for(let t of e)if(t===this.elementFromPoint(0,0))return t;return null},get $modalElement(){let e=this.querySelectorAll(":modal"),t=this.elementFromPoint(0,0);return Array.prototype.find.call(e,n=>n===t)??null}},[[HTMLElement.name,v.name]]:function(){let e=d(function(t){let n=t.getAttribute("style");try{let r=t.$window.getComputedStyle(t),s=parseFloat(r.marginLeft)+parseFloat(r.marginRight),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom);t.style.setProperty("box-sizing","content-box","important"),t.style.setProperty("overflow","hidden","important");let l=t.getBoundingClientRect(),a=l.width,c=l.height;t.style.setProperty("border","none","important");let f=a-t.offsetWidth,h=c-t.offsetHeight;a-=f,c-=h,t.style.setProperty("padding",0,"important");let m=a-t.offsetWidth,g=c-t.offsetHeight,T=t.scrollWidth,M=t.scrollHeight;a-=m,c-=g;let b=t.clientWidth,w=t.offsetHeight;t.style.setProperty("overflow","scroll","important");let y=b-t.clientWidth,L=t.offsetHeight-w;return a-=y,{marginWidth:s,borderWidth:f,paddingWidth:m,scrollbarWidth:y,contentWidth:a,marginHeight:o,borderHeight:h,paddingHeight:g,scrollbarHeight:L,contentHeight:c}}finally{n==null?t.removeAttribute("style"):t.setAttribute("style",n)}},"boxsize");return{$cssPixel(t){if(i.logger.assertInstanceOf(t,Number,String)(),typeof t=="number")return t;let n=parseFloat(t);switch(t.replace(/^-?[0-9.]+/,"")){case"":return n;case"px":return n*1;case"in":return n*96;case"pc":return n*96/6;case"pt":return n*96/6/12;case"cm":return n*96/2.54;case"mm":return n*96/2.54/10;case"Q":return n*96/2.54/10/4}let s=this.getAttribute("style");try{return this.style.marginBottom=t,parseFloat(this.$window.getComputedStyle(this).marginBottom)}finally{s==null?this.removeAttribute("style"):this.setAttribute("style",s)}},$offset(t={}){t=Object.assign({relative:!1,margin:!1},t),i.logger.assertInstanceOf(t,Object)();let n=0,r=0;if(!t.margin){let o=this.$window.getComputedStyle(this);n=parseFloat(o.marginLeft),r=parseFloat(o.marginTop)}if(t.relative)return{left:this.offsetLeft-n,top:this.offsetTop-r};let s=this.getBoundingClientRect();return{left:s.left+window.scrollX-document.documentElement.clientLeft-n,top:s.top+window.scrollY-document.documentElement.clientTop-r}},$size(t={}){typeof t=="string"&&(t={"":{scrollbar:!0},client:{padding:!0},inner:{padding:!0,scrollbar:!0},offset:{padding:!0,border:!0},outer:{padding:!0,border:!0,scrollbar:!0},margin:{padding:!0,border:!0,margin:!0,scrollbar:!0}}[t]),i.logger.assertInstanceOf(t,Object)(),t=Object.assign({scroll:!1,margin:!1,border:!1,padding:!1,scrollbar:!1},t);let n=e(this),r=t.scroll?this.scrollWidth:n.contentWidth,s=t.scroll?this.scrollHeight:n.contentHeight;return t.margin&&(r+=n.marginWidth,s+=n.marginHeight),t.border&&(r+=n.borderWidth,s+=n.borderHeight),t.padding&&(r+=n.paddingWidth,s+=n.paddingHeight),t.scrollbar&&!t.scroll&&(r+=n.scrollbarWidth,s+=n.scrollbarHeight),{width:r,height:s}},$width(t={}){if(typeof t=="number"||typeof t=="string"){u.stringIsNaN(t)&&i.logger.error(`options(${t}) is NaN`);let n=this.$cssPixel(t);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let s=e(this);n-=s.borderWidth+s.paddingWidth}return this.style.width=n+"px",n}return this.$size(t).width},$height(t={}){if(typeof t=="number"||typeof t=="string"){u.stringIsNaN(t)&&i.logger.error(`options(${t}) is NaN`);let n=this.$cssPixel(t);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let s=e(this);n-=s.borderHeight+s.paddingHeight}return this.style.height=n+"px",n}return this.$size(t).height},$scrollParent(t={height:!0,width:!0}){return i.logger.assertInstanceOf(t,Object)(),t.height&&this.scrollHeight>this.clientHeight?this:t.width&&this.scrollWidth>this.clientWidth?this:this.parentElement?.$scrollParent(t)??null}}}(),[[DOMRectReadOnly.name]]:{$contains(e){if(e instanceof DOMPointReadOnly)return this.left<=e.x&&e.x<=this.right&&this.top<=e.y&&e.y<=this.bottom;if(e instanceof DOMRectReadOnly)return this.$contains(new DOMPoint(e.left,e.top))&&this.$contains(new DOMPoint(e.right,e.top))&&this.$contains(new DOMPoint(e.left,e.bottom))&&this.$contains(new DOMPoint(e.right,e.bottom));throw new Error(`Unknown type(${e.constructor.name})`)},$intersects(e){if(e instanceof DOMPointReadOnly)return this.left<=e.x&&e.x<=this.right&&this.top<=e.y&&e.y<=this.bottom;if(e instanceof DOMRectReadOnly)return this.$intersects(new DOMPoint(e.left,e.top))||this.$intersects(new DOMPoint(e.right,e.top))||this.$intersects(new DOMPoint(e.left,e.bottom))||this.$intersects(new DOMPoint(e.right,e.bottom));throw new Error(`Unknown type(${e.constructor.name})`)}}}}d(ue,"dimensions");function de(i){return{[[Element.name,v.name]]:function(){let e=d(function(s){return typeof s[0]=="number"&&(s[1]??={},s[1].duration=s[0],s[0]=s[1]),Object.assign({initial:{},reset:!0},s[0])},"handleArguments"),t=new E,n=new E,r=new j;return r.addEventListener("alarm",function(){for(let[s,o]of n.entries())s.style.setProperty("will-change",o);n.clear()}),{$willChange(s,o=1e3){i.logger.assertInstanceOf(s,String,Array)(),i.logger.assertInstanceOf(o,Number)(),s=s instanceof Array?s:[s];let l=this.style.getPropertyValue("will-change");return n.getOrSet(this,()=>l),l&&s.push(l),this.style.setProperty("will-change",[...new Set(s)].join(",")),r.restart(o,1),this},async $transition(s,o){i.logger.assertInstanceOf(s,Object)(),i.logger.assertInstanceOf(o,p,Object)(),o=Object.assign({initial:{},reset:!1,duration:400,timing:"ease"},o);let l=t.getOrSet(this,()=>({count:0,style:this.getAttribute("style"),transitionValue:this.style.getPropertyValue("transition")??"",transitionPriority:this.style.getPropertyPriority("transition")??""}));l.count++;for(let[b,w]of Object.entries(o.initial))this.style.setProperty(b,w,"important");this.getClientRects();let a=(this.style.getPropertyValue("transition")??"").split(",").filter(b=>b);for(let[b,w]of Object.entries(s))this.style.setProperty(b,w,"important"),a.push(`${b} ${o.duration}ms ${o.timing}`);this.style.setProperty("transition",a.join(","),"important");let c,f,h=new $((b,w)=>{c=b,f=w}),m=d(()=>{this.removeEventListener("transitionend",T);let b=t.get(this);if(--b.count===0)if(t.delete(this),o.reset)this.setAttribute("style",b.style);else{this.style.setProperty("transition",b.transitionValue,b.transitionPriority);for(let[w,y]of Object.entries(s))this.style.setProperty(w,y,"")}},"complete"),g=new Set(Object.keys(s)),T=d(b=>{g.delete(b.propertyName),g.size===0&&(clearTimeout(M),m(),c(!0))},"listener"),M=setTimeout(function(){m(),c(!1)},o.duration+32);return this.addEventListener("transitionend",T),h},async $fadeIn(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{opacity:0}),this.$transition({opacity:a.opacity},l)},async $fadeOut(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{opacity:a.opacity}),this.$transition({opacity:0},l)},async $slideDown(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0}),this.$transition({height:parseFloat(a.height),"margin-top":parseFloat(a.marginTop),"margin-bottom":parseFloat(a.marginBottom),"padding-top":parseFloat(a.paddingTop),"padding-bottom":parseFloat(a.paddingBottom)},l)},async $slideUp(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",height:parseFloat(a.height),"margin-top":parseFloat(a.marginTop),"margin-bottom":parseFloat(a.marginBottom),"padding-top":parseFloat(a.paddingTop),"padding-bottom":parseFloat(a.paddingBottom)}),this.$transition({height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0},l)},async $slideRight(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0,"max-height":parseFloat(a.height)}),this.$transition({width:parseFloat(a.width),"margin-left":parseFloat(a.marginLeft),"margin-right":parseFloat(a.marginRight),"padding-left":parseFloat(a.paddingLeft),"padding-right":parseFloat(a.paddingRight)},l)},async $slideLeft(s=400,o={}){let l=e(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",width:parseFloat(a.width),"margin-left":parseFloat(a.marginLeft),"margin-right":parseFloat(a.marginRight),"padding-left":parseFloat(a.paddingLeft),"padding-right":parseFloat(a.paddingRight),"max-height":parseFloat(a.height)}),this.$transition({width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0},l)}}}()}}d(de,"effects");function fe(i){return{[[FormData.name]]:{$appendFromEntries(e){for(let[t,n]of u.objectToEntries(e))this.append(t,n);return this},$toSearchParams(){let e=new URLSearchParams(this);for(let[t,n]of u.objectToEntries(this))n instanceof Blob&&(i.logger.info(`Unset ${t} because file`),e.set(t,""));return e},$toObject(){let e={},t=u.objectToEntries(this).map(([n,r])=>{let s=n.split(/\]\[|\[|\]/);s.length>1&&s.pop();let o=[];for(let[l,a]of s.entries()){if(!a.length){let c=o.join("[@]");e[c]??=0,s[l]=e[c]++}o.push(a)}return[s,r]});return u.entriesToObject(t,!1)},async $json(e="base64"){let t=await u.objectWalkRecursive(this.$toObject(),async function(n){return n instanceof Blob&&(n=function(){if(e==="text")return n.$text();if(e==="base64")return n.$base64();if(typeof e=="function")return e(n);throw new Error(`Unknown convert(${e})`)}()),n});return JSON.stringify(t)}},[[HTMLInputElement.name,RadioNodeList.name,v.name]]:{get $indeterminate(){if(this instanceof RadioNodeList)return this.value==="";if(this.type==="checkbox")return this.indeterminate},set $indeterminate(e){if(i.logger.assertInstanceOf(e,Boolean,Array)(),this instanceof RadioNodeList){e||i.logger.error("RadioNodeList's $indeterminate is readonly"),this.forEach(t=>t.checked=!1);return}if(this.type==="checkbox"){if(!(e instanceof Array)){this.indeterminate=e;return}e=e.filter(t=>t!=null),e.length===0?this.indeterminate=!1:e.every(t=>!t)?(this.indeterminate=!1,this.checked=!1):e.every(t=>t)?(this.indeterminate=!1,this.checked=!0):this.indeterminate=!0}}},[[HTMLInputElement.name,HTMLTextAreaElement.name,HTMLSelectElement.name,v.name]]:{get $value(){if(["select-one"].includes(this.type))return Array.prototype.find.call(this.options,e=>e.selected)?.value??null;if(["select-multiple"].includes(this.type))return[...this.options].filter(e=>e.selected).map(e=>e.value);if(["radio","checkbox"].includes(this.type))return this.checked?this.value:null;if(["file"].includes(this.type))return this.multiple?this.files:this.files[0]??null;if(this.type)return this.value},set $value(e){if(["select-one"].includes(this.type))this.value=e;else if(["select-multiple"].includes(this.type)){let t=(e instanceof Array?e:[e]).map(n=>""+n);for(let n of this.options)n.selected=t.includes(n.value)}else if(["radio","checkbox"].includes(this.type))this.checked=this.value===e;else if(["file"].includes(this.type))if(e instanceof File){let t=new DataTransfer;t.items.add(e),this.files=t.files}else e instanceof FileList&&(this.files=e);else this.type&&(this.value=e)},$clear(){return["select-one","select-multiple"].includes(this.type)?this.value=null:["radio","checkbox"].includes(this.type)?this.checked=!1:["file"].includes(this.type)?this.files=new DataTransfer().files:this.type&&(this.value=""),this},$resetAttribute(){return["select-one","select-multiple"].includes(this.type)?Array.from(this.options).forEach(e=>e.toggleAttribute("selected",e.selected)):this.type==="textarea"?this.textContent=this.value:["radio","checkbox"].includes(this.type)?this.toggleAttribute("checked",this.checked):this.setAttribute("value",this.value),this}},[[HTMLSelectElement.name,HTMLDataListElement.name,v.name]]:{$options(e,t=void 0){t??=this instanceof HTMLSelectElement?"append":null,i.logger.assertInstanceOf(t,p,Boolean,String)(),this.$willChange("scroll-position");let n={top:this.scrollTop,left:this.scrollLeft},r=d(()=>{this.scrollTop=n.top,this.scrollLeft=n.left},"recover"),s=d(l=>{let a=[];for(let[c,f]of u.objectToEntries(l))f instanceof Array?a.push(this.$document.$createElement("optgroup",{label:c},...f)):u.objectIsPlain(f)?a.push(this.$document.$createElement("optgroup",{label:c},...s(f))):a.push(this.$document.$createElement("option",{value:c,title:f},f));return a},"build");u.objectIsPlain(e)&&(e=s(e));let o=t?this.$value:null;if(t&&typeof t=="string"){let l=(o instanceof Array?o:[o]).filter(c=>c!=null).map(c=>""+c);this.$$("option").$except(c=>l.includes(c.value)).forEach(c=>c.remove()),this.$$("optgroup").$except(c=>c.$contains("option")).forEach(c=>c.remove()),this.$$("hr.kQuery-option-separator").forEach(c=>c.remove());for(let c of this.$$("optgroup")){let f=c.$nextElements(`optgroup[label="${u.stringEscape(c.label??"","selector")}"]`);for(let h of[...f])c[t](...h.$$("option")),h.$contains("option")||h.remove()}this[t](this.$document.$createElement("hr",{class:"kQuery-option-separator"})),this[t](...e);let a=d(function(c){return c.filter(f=>f instanceof HTMLOptionElement&&l.includes(f.value)||f instanceof HTMLOptGroupElement&&!a([...f.$$("option")]).length?(f.remove(),!1):!0)},"filter");a(e)}else this.$replaceChildren(...e);return t&&(this.$value=o),requestAnimationFrame(()=>requestAnimationFrame(r)),this}},[[HTMLFormElement.name,v.name]]:{$resetAttribute(){return this.elements.$resetAttribute(),this}}}}d(fe,"forms");function he(i){return{[[Window.name]]:{$query(e,t=null){if(t??=(this??globalThis).document,e instanceof Node||e instanceof NodeList)return e;if(e instanceof HTMLCollection)return u.iterableToNodeList(e);if(e instanceof Array){let r=e.map(o=>t.defaultView.$query(o,t)),s=[...new Set(r.flatMap(o=>o instanceof Node?[o]:[...o]))];return s.length===1?s[0]:u.iterableToNodeList(s)}if(typeof e=="string"&&e.trim().charAt(0)==="<"){let r=t.$createNodeListFromHTML(e.trim());return r.length===1?r[0]:r}let n=t.$$(e);return n.length===1?n[0]:n}},[[Document.name]]:{$createNodeListFromHTML(e){i.logger.assertInstanceOf(e,String)();let t=this.createElement("template");return t.innerHTML=e,u.iterableToNodeList([...t.content.childNodes])},$createElement(e,t={},...n){i.logger.assertInstanceOf(e,String)(),i.logger.assertInstanceOf(t,Object)(),t.class=u.objectToClasses(t.class??[]),e=e.replaceAll(/\#([-_0-9a-z]+)/ig,function(s,o){return t.id=o,""}),e=e.replaceAll(/\.([-_0-9a-z]+)/ig,function(s,o){return t.class[o]=!0,""}),e=e.replaceAll(/\[([-_0-9a-z]+)(=(.+?))?\]/ig,function(s,o,l,a){return t[o]=a??"",""});let r=this.createElement(e);for(let[s,o]of Object.entries(u.objectToAttributes(t)))typeof o=="boolean"?r.toggleAttribute(s,o):r.setAttribute(s,o);return r.$append(...n),r}},[[HTMLTemplateElement.name,v.name]]:function(){let e=new E;class t{static{d(this,"Value")}constructor(r){this.value=r}toString(){return""+this.value}}return{$render(n,r={}){r=Object.assign({escape:"html",logical:"---logical<false/>---",insert:"after"},r);let s=d(function(a){if(r.logical){if(a===!1)return r.logical;if(a===!0)return""}return typeof a=="object"&&!(a instanceof t)?a:typeof r.escape=="function"?r.escape(a):u.stringEscape(a,r.escape)},"tag"),o=d(function(a,c){if(!a)return[];a instanceof Array||(a=[a]);let f=[];for(let[h,m]of a.entries()){let g=this.content.cloneNode(!0);u.anyIsPrimitive(m)&&(m=new t(m)),Object.assign(m,{$parent:c,$index:h,$length:a.length,$first:h===0,$last:h===a.length-1});let T=g.$$("template[data-slot-name]");for(let y of T)y.after(...o.call(y,m[y.dataset.slotName],m)),y.remove();i.logger.assert(()=>g.$contains(y=>!y.$isMetadataContent))();let M=[...g.childNodes].join(""),b=u.stringRender(M,m,s),w=this.$document.$createNodeListFromHTML(b);if(r.logical)for(let y of w.$$$("*"))for(let L of Array.from(y.attributes))L.value===r.logical&&y.attributes.removeNamedItem(L.name);f.push(...w)}return f},"core"),l=o.call(this,n,null);return r.insert&&((e.reset(this,()=>l)??[]).forEach(c=>c.remove()),this[r.insert](...l)),u.iterableToNodeList(l)}}}(),[[Node.name,v.name]]:function(){let e=d(function(t){return[...t].flatMap(n=>n instanceof NodeList?[...n]:n)},"normalizeNodes");return{$clone(t=!1){if(!t)return this.cloneNode(!0);let n=this.cloneNode(!1);for(let r of this.$events(null,!1,!1))n.$on(r.type+r.namespaces.map(s=>`.${s}`).join(),r.selector,r.listener,r.options);for(let r of this.childNodes)r instanceof Element?n.appendChild(r.$clone(!0)):n.appendChild(r.cloneNode(!0));return n},$before(...t){return this.before(...e(t)),this},$prepend(...t){return this.prepend(...e(t)),this},$insert(t,...n){return this.$childElement(t)?.$before?.(...e(n)),this},$append(...t){return this.append(...e(t)),this},$after(...t){return this.after(...e(t)),this},$replace(...t){return this.replaceWith(...e(t)),this},$replaceChild(t,...n){return this.$insert(t,...n),this.$childElement(t)?.remove(),this},$replaceChildren(...t){return this.replaceChildren(...e(t)),this},$wrap(t){return this.parentNode.insertBefore(t,this),t.appendChild(this),this},$unwrap(){return this.parentNode.$unwrapChildren(),this},$unwrapChildren(){return this.replaceWith(...this.childNodes),this}}}()}}d(he,"manipulation");function me(i){return{[[Window.name]]:{$open(e){i.logger.assertInstanceOf(e,Object)(),e=Object.assign({url:void 0,target:void 0,window:!0,left:"auto",top:"auto",width:"auto",height:"auto",noopener:void 0,noreferrer:void 0},e),e.width==="auto"&&(e.width=this.outerWidth/2),e.height==="auto"&&(e.height=this.outerHeight/2),e.left==="auto"&&e.width&&(e.left=(this.outerWidth-e.width)/2),e.top==="auto"&&e.height&&(e.top=(this.outerHeight-e.height)/2),e.window&&e.left!=null&&(e.left+=this.screenX),e.window&&e.top!=null&&(e.top+=this.screenY);let t=e.url,n=e.target;u.objectWalkRecursive(e,function(s,o){if(!(["url","target","window"].includes(o)||s===!1))return s});let r=u.objectJoin(e,",");return i.logger.debug("windowFeature",r),this.open(t,n,r)}},[[Element.name,v.name]]:function(){let e=!1;return{get $isMetadataContent(){return["base","link","meta","noscript","script","style","template","title"].includes(this.localName.toLowerCase())},$outerTag(t=!0){let n=this.localName,r=""+this.$attrs,s=`<${n}${r?" "+r:""}>`;return t&&(s+=`</${n}>`),s},$markText(t,n,r){i.logger.assertInstanceOf(t,String,RegExp)(),i.logger.assertInstanceOf(n,p,String,Element)(),t instanceof RegExp||(t=new RegExp(u.stringEscape(t,"regex"))),n instanceof Element||(n=this.$document.$createElement(n??"mark"));let s=d(o=>{for(let l of o.children)l.$isMetadataContent||r!=null&&l.$matches(r)||l.$outerTag(!1)===n.$outerTag(!1)||s(l);for(let l of o.childNodes)if(l instanceof CharacterData){let a=l.nodeValue.match(t);if(a){let c=l.splitText(a.index);c.splitText(a[0].length),c.$wrap(n.$clone(!0))}}return o},"core");return this.normalize(),s(this)},async $scrollIntoView(t={}){return i.logger.assertInstanceOf(t,Object)(),t=Object.assign({behavior:void 0,block:void 0,inline:void 0,global:!0,timeout:void 0,threshold:void 0,ifNeeded:!1},t),t.global&&e?$.resolve(!1):new $((n,r)=>{let s=new R((l,a)=>{if(!a&&l.isIntersecting&&t.ifNeeded){n(!1),s.unobserve(l.target);return}l.target.scrollIntoView(t),e=!0,l.isIntersecting&&(o?.stop(),s.unobserve(l.target),e=!1,n(!0))},{threshold:t.threshold??0}),o=t.timeout?new j:null;o?.addEventListener("alarm",l=>{s.unobserve(this),e=!1,r(this)}),o?.start(t.timeout),s.observe(this)})}}}(),[[HTMLDialogElement.name,v.name]]:{$showModal(e={}){return i.logger.assertInstanceOf(e,Object)(),e=Object.assign({outside:!1,escape:!0},e),new $((t,n)=>{let r=d(a=>{a.target.removeEventListener("close",r),a.target.removeEventListener("cancel",s),a.target.removeEventListener("click",o),a.target.removeEventListener("keydown",l),t(a.target.returnValue)},"close"),s=d(a=>{a.target.removeEventListener("close",r),a.target.removeEventListener("cancel",s),a.target.removeEventListener("click",o),a.target.removeEventListener("keydown",l),t(null)},"cancel"),o=d(a=>{this.getBoundingClientRect().$contains(new DOMPointReadOnly(a.clientX,a.clientY))||(this.close(null),this.dispatchEvent(new Event("cancel",{bubbles:!1,cancelable:!0,composed:!1})))},"onOutside"),l=d(a=>{a.code==="Escape"&&a.preventDefault()},"onEscape");this.returnValue="",this.showModal(),this.addEventListener("close",r,{once:!0}),this.addEventListener("cancel",s,{once:!0}),e.outside&&this.addEventListener("click",o),e.escape||this.addEventListener("keydown",l)})}},[[HTMLCollection.name,NodeList.name,FileList.name,DataTransferItemList.name]]:{$at(e){return i.logger.assertInstanceOf(e,Number)(),Array.prototype.at.call(this,e)},async $asyncMap(e){return i.logger.assertInstanceOf(e,Function)(),$.all(u.objectToEntries(this).map(([t,n])=>e(n,t,this)))}}}}d(me,"miscellaneous");function ge(i){return{[[HTMLAnchorElement.name,v.name]]:{$submit(e={}){i.logger.assertInstanceOf(e,Object)(),e=Object.assign({async:!1,form:void 0,method:void 0,enctype:"application/x-www-form-urlencoded",novalidate:!1,data:{}},e),i.logger.assertInstanceOf(e.data,Object,FormData)();let t=this.$URL,n=new FormData;n.$appendFromEntries(t.searchParams),n.$appendFromEntries(e.data),t.search="";let r=e.form??this.$document.$createElement("form",{action:t,method:e.method??"post",enctype:e.enctype,target:this.target,hidden:!0}),s;if(e.form)s=this.$document.$createElement("button",{type:"submit",formaction:t,formtarget:this.target,formmethod:e.method??r.getAttribute("method")??"post",formenctype:e.enctype,formnovalidate:e.novalidate}),r.append(s);else for(let[o,l]of n){let a=this.$document.$createElement("input",{type:"hidden"});a.name=o,a.value=l,r.append(a)}if(e.async||this.download){let o={};s&&(o.data=n,o.submitter=s);try{let l=r.$request(o);return s?.remove(),this.download&&this.download&&!e.raw?l.then(a=>{if(!a.ok)throw new a;a.blob().then(c=>{let f=URL.createObjectURL(c),h=this.$document.$createElement("a",{href:f,download:this.download,hidden:!0});try{this.$document.body.appendChild(h),h.click()}finally{this.$document.body.removeChild(h),setTimeout(()=>URL.revokeObjectURL(f),1e3)}})}):l}finally{s?.remove()}}return s?(r.requestSubmit(s),s.remove()):(this.$document.body.append(r),r.submit(),r.remove()),this}},[[HTMLFormElement.name,v.name]]:{async $request(e={}){if(i.logger.assertInstanceOf(e,Object)(),e=Object.assign({url:void 0,method:void 0,enctype:void 0,novalidate:void 0,submitter:void 0,data:{},fileConverter:void 0,ok:!1,timeout:0},e),e.headers instanceof Headers||(e.headers=new Headers(e.headers??{})),i.logger.assertInstanceOf(e.headers,Headers)(),i.logger.assertInstanceOf(e.data,Object,FormData)(),!(e.novalidate??(e.submitter?.formNoValidate||this.noValidate||!1))&&!this.reportValidity())throw new Error("Invalid form");let n=e.url??e.submitter?.getAttribute("formaction")??this.getAttribute("action")??"",r=e.method??e.submitter?.getAttribute("formmethod")??this.getAttribute("method")??"GET",s=e.enctype??e.headers.get("content-type")??e.submitter?.getAttribute("formenctype")??this.getAttribute("enctype")??"application/x-www-form-urlencoded";e.method=r.toUpperCase(),e.headers.set("content-type",s);let o=new URL(n,this.baseURI),l=new FormData(this,e.submitter);for(let[a,c]of u.objectToEntries(e.data))l.append(a,c);if(e.method==="GET")for(let[a,c]of l.$toSearchParams())o.searchParams.append(a,c);else if(s.startsWith("application/x-www-form-urlencoded"))e.headers.delete("content-type"),e.body=l.$toSearchParams();else if(s.startsWith("multipart/form-data"))e.headers.delete("content-type"),e.body=l;else if(s.startsWith("application/json"))e.body=await l.$json(e.fileConverter);else throw new Error(`Unknown enctype(${s})`);return await u.fetch(o,e)}},[[Element.name,v.name]]:{async $load(e,t={}){u.anyIsStringable(e)?t.url=e:t=e,i.logger.assertInstanceOf(t,Object)(),t=Object.assign({url:void 0,method:void 0,data:{},ok:!1,timeout:0},t),t.headers instanceof Headers||(t.headers=new Headers(t.headers??{})),i.logger.assertInstanceOf(t.url,String)(),i.logger.assertInstanceOf(t.headers,Headers)(),i.logger.assertInstanceOf(t.data,Object,FormData)();let n=t.url.split(" "),r=new URL(n.shift(),this.baseURI),s=n.join(" "),o=(t.method??"GET").toUpperCase(),l=u.objectToEntries(t.data).map(([f,h])=>[f,h instanceof Function?h(this):h]);if(o==="GET")for(let[f,h]of l)r.searchParams.append(f,h);else t.headers.delete("content-type"),t.body=new URLSearchParams(l);let a=await u.fetch(r,t),c=this.$document.$createNodeListFromHTML(await a.text());return s&&(c=c.$$(s)),this.$replaceChildren(c),c}},[[Blob.name,V.name]]:{async $upload(e,t={}){let n;u.anyIsStringable(e)?n=e:n=t.url,i.logger.assertInstanceOf(t,Object)(),t=Object.assign({method:"PUT",timeout:0,ok:!1,headers:{},credentials:"same-origin",progress:d(()=>null,"progress")},t);let r=new XMLHttpRequest;r.open(t.method.toUpperCase(),n,!0),r.timeout=t.timeout,r.withCredentials=t.credentials!=="omit",r.responseType="arraybuffer";for(let[o,l]of u.objectToEntries(t.headers))r.setRequestHeader(o,l);let s=new $((o,l)=>{let a=d(function(){let c=new Response(r.response,{status:r.status,statusText:r.statusText,headers:r.getAllResponseHeaders().split(/\r\n?/).reduce(function(f,h){if(h.trim()){let[m,g]=h.split(":");f.append(m.trim(),g.trim())}return f},new Headers)});return Object.defineProperties(c,{url:{get(){return r.responseURL}}})},"newResponse");r.addEventListener("readystatechange",function(){r.readyState===XMLHttpRequest.HEADERS_RECEIVED&&!t.ok&&!(200<=r.status&&r.status<300)&&l(new Error(`${r.status}: ${r.statusText}`,{cause:a()}))}),r.addEventListener("load",function(){o(a())}),r.addEventListener("error",function(c){l(c)}),r.addEventListener("abort",function(c){l(c)}),r.addEventListener("timeout",function(c){l(c)}),r.upload.addEventListener("progress",function(c){t.progress(c)})});if(t.method.toUpperCase()==="POST"){let o=new FormData;o.append(t.name??"tmp",this),r.send(o)}else r.send(this);return s}}}}d(ge,"networks");function pe(i){return{[[Document.name,DocumentFragment.name,Element.name]]:{$(e){return i.logger.assertInstanceOf(e,String,Function)(),typeof e=="function"?Array.prototype.find.call(this.$$("*"),e)??null:this.querySelector(e)},$$(e){return i.logger.assertInstanceOf(e,String,Function)(),typeof e=="function"?u.iterableToNodeList([...this.$$("*")].filter(e)):this.querySelectorAll(e)},$$$(e){i.logger.assertInstanceOf(e,String,Function)();let t=this.$matches(e)?[this]:[];return typeof e=="function"?u.iterableToNodeList([...t,...[...this.$$("*")].filter(e)]):u.iterableToNodeList([...t,...this.$$(e)])},$contains(e){return i.logger.assertInstanceOf(e,String,Node,Function)(),e instanceof Node?this.contains(e):typeof e=="string"?!!(this.matches(e)||this.querySelector(e)):this.$$$(e).length>0},$matches(e){return i.logger.assertInstanceOf(e,String,Node,Function)(),typeof e=="function"?!!e.call(this,this):e instanceof Node?this===e:this.matches(e)}},[[NodeList.name]]:{$(e){i.logger.assertInstanceOf(e,String,Function)();for(let t of this){let n=t.$?.(e);if(n)return n}return null},$$(e){return i.logger.assertInstanceOf(e,String,Function)(),u.iterableToNodeList(new Set([...this].flatMap(t=>[...t.$$?.(e)??[]])))},$$$(e){return i.logger.assertInstanceOf(e,String,Function)(),u.iterableToNodeList(new Set([...this].flatMap(t=>[...t.$$$?.(e)??[]])))},$contains(e){return i.logger.assertInstanceOf(e,String,Element,Function)(),!!Array.prototype.find.call(this,t=>t.$contains?.(e))},$matches(e){return i.logger.assertInstanceOf(e,String,Element,Function)(),Array.prototype.find.call(this,t=>t.$matches?.(e))},$index(e){i.logger.assertInstanceOf(e,String,Node,Function)();let t=Array.prototype.findIndex.call(this,n=>n.$matches?.(e)??!1);return t===-1?null:t},$filter(e){return i.logger.assertInstanceOf(e,String,Function)(),u.iterableToNodeList([...this].filter(t=>t.$matches?.(e)??!1))},$except(e){return i.logger.assertInstanceOf(e,String,Function)(),u.iterableToNodeList([...this].filter(t=>!(t.$matches?.(e)??!0)))},$slice(e,t){return i.logger.assertInstanceOf(e,p,Number,String,Node,Function)(),i.logger.assertInstanceOf(t,p,Number,String,Node,Function)(),e!=null&&typeof e!="number"&&(e=this.$index(e)??void 0),t!=null&&typeof t!="number"&&(t=this.$index(t)??void 0),u.iterableToNodeList(Array.prototype.slice.call(this,e,t))}},[[Node.name,v.name]]:function(){let e=d(function*(t,n,r){i.logger.assertInstanceOf(t,Node)();for(let s=t[r];s;s=s[r])(n==null||s.$matches(n))&&(yield s)},"nodeGenerateSiblings");return{get $window(){return this.ownerDocument?.defaultView??window},get $document(){return this.ownerDocument??window.document},$textNodes(t=[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE]){i.logger.assertElementsOf(t,[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE,"metadata"])();let n=[];for(let r of this.childNodes)r instanceof CharacterData?t.includes(r.nodeType)&&n.push(r):(t.includes("metadata")||!r.$isMetadataContent)&&n.push(...r.$textNodes(t));return u.iterableToNodeList(n)},$closest(t){if(i.logger.assertInstanceOf(t,String,Element,Function)(),typeof t=="string")return this.closest(t);for(let n=this;n!=null;n=n.parentElement)if(n.$matches(t))return n;return null},$parents(t){i.logger.assertInstanceOf(t,p,String,Function)();let n=[];for(let r=this.parentElement;r!=null;r=r.parentElement)(t==null||r.$matches(t))&&n.push(r);return u.iterableToNodeList(n)},$childElement(t){if(i.logger.assertInstanceOf(t,p,Number,String,Element,Function)(),typeof t=="number")return this.children.$at(t);for(let n of this.children)if(t==null||n.$matches(t))return n;return null},$childElements(t){i.logger.assertInstanceOf(t,p,String,Function)();let n=u.iterableToNodeList(this.children);return t==null?n:n.$filter(t)},$prevElement(t){return i.logger.assertInstanceOf(t,p,String,Function)(),e(this,t,"previousElementSibling").next().value??null},$prevElements(t){return i.logger.assertInstanceOf(t,p,String,Function)(),u.iterableToNodeList([...e(this,t,"previousElementSibling")].reverse())},$nextElement(t){return i.logger.assertInstanceOf(t,p,String,Function)(),e(this,t,"nextElementSibling").next().value??null},$nextElements(t){return i.logger.assertInstanceOf(t,p,String,Function)(),u.iterableToNodeList(e(this,t,"nextElementSibling"))},$siblingElements(t){return i.logger.assertInstanceOf(t,p,String,Node,Function)(),u.iterableToNodeList([...this.parentNode.children].filter(n=>n!==this&&(t==null||n.$matches?.(t))))}}}(),[[HTMLInputElement.name,v.name]]:{get $radioNodeList(){if(this.type!=="radio"||!this.form)return;let e=this.form,t=this.name,n=e.elements[t];if(n instanceof RadioNodeList)return n;let r=this.$document.$createElement("input",{type:"radio",name:t,hidden:!0});this.insertAdjacentElement("afterend",r);try{return e.elements[t]}finally{r.remove()}}}}}d(pe,"traversing");var S=new ee(document.currentScript);S.logger.time("register Plugins");S.extends(oe);S.extends(ae);S.extends(le);S.extends(ce);S.extends(fe);S.extends(pe);S.extends(he);S.extends(ue);S.extends(de);S.extends(ge);S.extends(me);S.logger.timeEnd("register Plugins");Object.assign(S.customEvents,{attribute:q,child:_,cookie:K,disable:G,flick:X,intersect:J,resize:Y,swipe:Z,visible:Q});var fn=S;})();
/**!
 * kQuery
 *
 * @file
 * @license MIT
 * @copyright ryunosuke
 * @ignore
 */
//# sourceMappingURL=kQuery-full.min.js.map
