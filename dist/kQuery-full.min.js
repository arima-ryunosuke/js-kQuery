(()=>{var ie=Object.defineProperty;var d=(i,t)=>ie(i,"name",{value:t,configurable:!0});var be=(i,t)=>{for(var e in t)ie(i,e,{get:t[e],enumerable:!0})};var B={};be(B,{$FileList:()=>V,$NodeList:()=>v,AsyncFunction:()=>ne,AsyncGeneratorFunction:()=>ye,Collection:()=>U,Configuration:()=>D,CookieObserver:()=>F,CustomEvent:()=>k,F:()=>u,FileReader:()=>W,GeneratorFunction:()=>ve,IntersectionObserver:()=>C,Logger:()=>x,MutationObserver:()=>N,Nullable:()=>p,ObjectStorage:()=>H,Options:()=>R,Promise:()=>$,Proxy:()=>M,ResizeObserver:()=>A,Timer:()=>j,TimerObserver:()=>z,Vector2:()=>P,WeakMap:()=>T});var L=globalThis,p=d(function(){},"Nullable"),ne=(async()=>{}).constructor,ve=function*(){}.constructor,ye=async function*(){}.constructor,v=d(function(){return[NodeList.name,HTMLCollection.name]},"$NodeList"),V=d(function(){return[FileList.name]},"$FileList"),u={anyIsPrimitive(i,...t){if(i==null)return!0;for(let e of t){if(e===Object){if(u.objectIsPlain(i))return!0;continue}if(i instanceof e)return!0}return!["object","function"].includes(typeof i)},anyIsStringable(i){return u.anyIsPrimitive(i)?!0:i?.toString&&i.toString!==Object.prototype.toString},stringToKebabCase(i){return(""+i).replaceAll(/([A-Z])/g,(...t)=>"-"+t[1].toLowerCase())},stringToPascalCase(i,t){t??="-";let e=new RegExp(`(\\${t}([a-z]))`,"ig");return(""+i).replaceAll(e,(...n)=>n[2].toUpperCase())},stringEscape(i,t){let e={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"};switch(i+="",t){default:throw new Error(`${t} is undefied`);case"attr-name":{let n=document.createElement("div");return n.setAttribute(i,""),n.attributes[0].name}case"attr-value":return i.replace(/[&"]/g,n=>e[n]);case"content":return i.replace(/[&<>]/g,n=>e[n]);case"html":return i.replace(/[&"'<>]/g,n=>e[n]);case"regex":return i.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");case"css":case"selector":return CSS.escape(i)}},stringQuote(i,t){switch(i+="",t){default:throw new Error(`${t} is undefied`);case"css-url":return i.includes('"')?i.includes("'")?i.replaceAll(/([ '"()])/g,"\\$1"):"'"+i+"'":'"'+i+'"'}},stringUnquote(i,t){switch(i+="",t){default:throw new Error(`${t} is undefied`);case"css-url":return i.at(0)==='"'&&i.at(-1)==='"'?i.slice(1,-1):i.at(0)==="'"&&i.at(-1)==="'"?i.slice(1,-1).replaceAll(/\\'/g,"'"):i.replaceAll(/\\([ '"()])/g,"$1")}},stringIsNaN(i){return Number.isNaN(parseFloat(i))},stringRender:function(){let i={};return function(t,e,n=null){let s=d((l,...a)=>a.map(c=>n==null||c instanceof String?c:n(c)).map((c,f)=>l[f]+c).concat(l.slice(a.length)).join(""),"tagFunction"),r=`${n}\`${t}\``,o=i[r]??=new Function("",`return globalThis.$__internalTagFunctions.at(-1)\`${t}\`;`);L.$__internalTagFunctions??=[],L.$__internalTagFunctions.push(s);try{return o.call(e)}finally{L.$__internalTagFunctions.pop()}}}(),objectId:function(){let i=new L.WeakMap,t=0;return function(e){return e===null||typeof e!="object"?null:(i.has(e)||i.set(e,++t),i.get(e))}}(),objectFinalize:function(){let i=new FinalizationRegistry(t=>t());return function(t,e){i.register(t,e,t)}}(),objectIsPlain(i){return i==null||typeof i!="object"?!1:i.constructor===Object||i.constructor==null},objectIsArrayLike(i,t=!0){if(i instanceof Array)return!0;if(i==null||typeof i!="object")return!1;let e=Object.keys(i);if(!("length"in i)&&e.length===0)return!1;let n=i.length??(t?null:e.length);if(n==null)return!1;let s=e.indexOf("length");if(s!==-1&&e.splice(s,1),e.length!==+n)return!1;let r=e.map(o=>+o);for(let o=0;o<n;o++)if(r[o]!==o)return!1;return!0},objectToAttributes(i,t=""){let e={};for(let[n,s]of u.objectToEntries(i)){let r=t?`${t}-${n}`:n;if(r.startsWith("data-")&&(r=u.stringToKebabCase(r)),r==="style"&&u.objectIsPlain(s)){let o=[];for(let[l,a]of u.objectToEntries(s))o.push(u.stringToKebabCase(l)+":"+a);o.length&&(e[r]=o.join(";")+";")}else if(r==="class"){let o=[];for(let[l,a]of u.objectToEntries(u.objectToClasses(s)))a&&o.push(l);o.length&&(e[r]=o.join(" "))}else u.objectIsPlain(s)?Object.assign(e,u.objectToAttributes(s,n)):e[r]=s}return e},objectToClasses(i){let t=d(function(n){return(""+n).split(" ").filter(s=>s.length)},"normalizeToken"),e={};if(i instanceof Array)for(let n of i)Object.assign(e,u.objectToClasses(n));else if(u.objectIsPlain(i))for(let[n,s]of u.objectToEntries(i))for(let r of t(n))e[t(r)]=!!s;else for(let n of t(i))e[t(n)]=!0;return e},objectToDataset(i,t=""){let e={};for(let[n,s]of u.objectToEntries(i)){let r=u.stringToKebabCase(t?`${t}-${n}`:n);if(u.objectIsPlain(s)||s instanceof Array){for(let[o,l]of u.objectToEntries(u.objectToDataset(s,r)))e[o]=l;s instanceof Array&&(e[r+"-length"]=s.length)}else e[r]=s}return e},objectToEntries(i){return i instanceof NamedNodeMap?Array.from(i).map(t=>[t.name,t.value]):i instanceof CSSStyleDeclaration?Array.from(i).map(t=>[t,i[t]]):!Object.hasOwn(i,"entries")&&typeof i.entries=="function"?[...i.entries()]:!Object.hasOwn(i,"keys")&&typeof i.keys=="function"?[...Array.from(i.keys()).flatMap(t=>[[t,i[t]]])]:!Object.hasOwn(i,"values")&&typeof i.values=="function"?[...Array.from(i.values()).entries()]:!Object.hasOwn(i,"length")&&"length"in i?[...Array.from(i).entries()]:(Symbol.iterator in i,Object.entries(i))},objectJoin(i,t,e="="){let n=[];for(let[s,r]of u.objectToEntries(i))if(r!==void 0)if(u.objectIsPlain(r)&&(r=u.objectJoin(r,t,e)),e instanceof Function){let o=e(r,s);o&&n.push(o)}else n.push(`${s}${e}${r}`);return n.join(t)},objectWalkRecursive(i,t){let e=t instanceof ne,n=[];for(let[s,r]of u.objectToEntries(i)){let o=d(a=>i[s]=a,"assign"),l=r instanceof Array||u.objectIsPlain(r)?u.objectWalkRecursive(r,t):t(r,s,i);e?n.push(l.then(o)):o(l)}return e?$.all(n).then(s=>i):i},iterableToNodeList(i){i instanceof NodeList&&x.instance.notice("meaningless call to iterableToNodeList");let t=0,e={};for(let n of i)e[t++]={value:n,configurable:!1,writable:!1,enumerable:!0};return e.length={value:t,configurable:!1,writable:!1,enumerable:!1},Object.create(NodeList.prototype,e)},arrayLikeToArrayRecursive(i,t=!0){for(let[e,n]of u.objectToEntries(i))typeof n=="object"&&(i[e]=u.arrayLikeToArrayRecursive(n,t));return u.objectIsArrayLike(i,t)&&(t||"length"in i?i=Array.from(i):i=Object.values(i)),i},entriesToObject(i,t){let e={};for(let[n,s]of i)n.reduce((r,o,l)=>r[o]??=l+1 in n?{}:s,e);return t!=null?u.arrayLikeToArrayRecursive(e,t):e},functionIsNative(i){return Function.prototype.toString.call(i).slice(-15,-2)==="[native code]"},functionToCallbackable(i,t,...e){return function(...n){for(let[s,r]of n.entries()){let o=typeof r=="function"?r:null;if(o&&(n[s]=o.call(t,...e),n[s]===void 0))return}return i.call(this,...n)}},async fetch(i,t={}){if(t.timeout){let n=new AbortController;setTimeout(()=>n.abort(),t.timeout),t.signal?t.signal=AbortSignal.any([t.signal,n.signal]):t.signal=n.signal,delete t.timeout}let e=await L.fetch(i,t);if(!(t.ok??!1)&&!e.ok)throw new Error(`${e.status}: ${e.statusText}`,{cause:e});return e}},D=class i{static{d(this,"Configuration")}static TRUES=Object.freeze(["true","yes","1"]);static instance;#e;constructor(t){i.instance=this,this.#e=t}configure(t,e=!1){for(let[n,s]of Object.entries(t)){if(e||this.#e[n]===void 0){this[n]=s;continue}typeof s=="boolean"?this[n]=i.TRUES.includes(this.#e[n]):typeof s=="number"?this[n]=+this.#e[n]:typeof s=="string"?this[n]=""+this.#e[n]:typeof s=="function"?this[n]=s(this.#e[n],n,this.#e):this[n]=JSON.parse(this.#e[n])}return this}},x=class i{static{d(this,"Logger")}static instance;static anyIsInstanceOf(t,e){return!!(t===e||p===e&&t==null||e===Object&&u.objectIsPlain(t)||e!==Object&&typeof e=="function"&&Object(t)instanceof e||e===Boolean&&u.anyIsPrimitive(t)||e===Number&&(Object(t)instanceof e||!isNaN(t))||e===String&&(Object(t)instanceof e||t?.toString&&t.toString!==Object.prototype.toString))}static anyToDisplayName(t){return t==null?""+t:typeof t=="function"?t.name??""+t:""+t}constructor(t,e,n,s){i.instance=this;let r=d(()=>null,"noop"),o=d(()=>r,"noop2");this.error=e<3?r:s.error.bind(this,n),this.warn=e<4?r:s.warn.bind(this,n),this.info=e<6?r:s.info.bind(this,n),this.debug=e<7?r:s.debug.bind(this,n),this.notice=e<5?r:t?s.warn.bind(this,n):s.info.bind(this,n),this.time=e<7?r:l=>s.time.call(this,`${n} ${l}`),this.timeEnd=e<7?r:l=>s.timeEnd.call(this,`${n} ${l}`),this.assert=t?(l,...a)=>(l instanceof Function&&(a.unshift(""+l),l=l()),s.assert.bind(this,l,n,...a)):o,this.assertInstanceOf=t?(l,...a)=>{for(let c of a)if(i.anyIsInstanceOf(l,c))return r;return s.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} type must be ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementsInstanceOf=t?(l,...a)=>{for(let c of a)if(Object.values(l).every(f=>i.anyIsInstanceOf(f,c)))return r;return s.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} type must be ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementOf=t?(l,...a)=>{for(let c of a)if(c.includes(l))return r;return s.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} must be one of ${a.map(i.anyToDisplayName).join("|")}`)}:o,this.assertElementsOf=t?(l,...a)=>{for(let c of a)if(Object.values(l).every(f=>c.includes(f)))return r;return s.assert.bind(this,!1,n,`${i.anyToDisplayName(l)} must be one of ${a.map(i.anyToDisplayName).join("|")}`)}:o}},U=class i extends null{static{d(this,"Collection")}constructor(t,e,n){n??=t;let s=Object.defineProperties(()=>{},{name:{value:`Collection of ${e}`},length:{value:t.length}});return D.instance.debug&&t.forEach((r,o)=>s[o]=r),new M(s,{has(r,o){return o in t?Reflect.has(t,o):(t.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),t.some(l=>Reflect.has(l,o)))},get(r,o){if(o in t)return Reflect.get(t,o);if(t.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),o===Symbol.toPrimitive)return a=>t.map(c=>u.anyIsPrimitive(c,Array)?c:Reflect.get(c,o)?.call(c,a)).join();let l=t.map(a=>u.anyIsPrimitive(a,Array)?a:Reflect.get(a,o));return l.every(a=>u.anyIsPrimitive(a,Object,Array))?l:new i(l,`${e}.${o}`,n)},set(r,o,l){return o in t?Reflect.set(t,o,l):(t.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),t.forEach((a,c)=>u.functionToCallbackable(f=>Reflect.set(a,o,f),a,n?.[c],c)(l)),!0)},deleteProperty(r,o){return o in t?Reflect.deleteProperty(t,o):(t.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),t.forEach(l=>Reflect.deleteProperty(l,o)),!0)},apply(r,o,l){if(t.length===0)return x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),[];if(t.some(a=>typeof a=="function")){let a=!1,c=!0,f=!0,h=!0,m=!1,g=t.map((O,I)=>{if(typeof O=="function"){if(O instanceof M&&l.length===0){a=!0;return}O instanceof M||(O.i=I);let b=Reflect.apply(O,o?.[I],l);return c=c&&b===void 0,f=f&&u.anyIsPrimitive(b,Object,Array),h=h&&b===n?.[I],m=m||b instanceof L.Promise,b}});return a?t:c?o:f?g:h?n:m?L.Promise.all(g):new i(g,`${e}()`,n)}if(l.length===0)return t;l.length,x.instance.error("apply called, but not a single case was executed",r)}})}},T=class{static{d(this,"WeakMap")}constructor(){this.map=new L.Map}has(t){return this.map.has(u.objectId(t))}get(t){return this.map.get(u.objectId(t))?.value}getOrSet(t,e){return this.has(t)||this.set(t,e(t)),this.get(t)}set(t,e){return this.map.set(u.objectId(t),{ref:new WeakRef(t),value:e})}reset(t,e){let n=this.get(t);return this.set(t,e(n)),n}delete(t){return this.map.delete(u.objectId(t))}clear(){return this.map.clear()}*entries(){for(let t of this.map.values()){let e=t.ref.deref();if(e===void 0){this.map.delete(e);continue}yield[e,t.value]}}get size(){return[...this.entries()].length}},H=class{static{d(this,"ObjectStorage")}constructor(){this.weakmap=new T}has(t,e){if(e==null)return this.weakmap.has(t);let n=this.weakmap.get(t)??{};return e in n}get(t,e){return e==null?this.weakmap.get(t)??{}:(this.weakmap.get(t)??{})?.[e]}getOrSet(t,e,n){return this.has(t,e)||this.set(t,e,n(t,e)),this.get(t,e)}set(t,e,n){if(e==null)return this.weakmap.set(t,n);let s=this.weakmap.get(t)??{};return s[e]=n,this.weakmap.set(t,s)}reset(t,e,n){let s=this.get(t,e);return this.set(t,e,n(s)),s}delete(t,e){if(e==null)return this.weakmap.delete(t);let n=this.weakmap.get(t)??{};return delete n[e],Object.keys(n).length?!1:this.weakmap.delete(t)}clear(){return this.weakmap.clear()}*entries(){yield*this.weakmap.entries()}get size(){return this.weakmap.size}},$=class i extends L.Promise{static{d(this,"Promise")}static resolvedReasonSymbol=Symbol("resolved");static#e(t,e,n=null){x.instance.assertElementsInstanceOf(t,Function,ne)(),n??=window.navigator.hardwareConcurrency;let s=u.objectToEntries(t).map(([c])=>c),r=0,o=t instanceof Array?new Array(t.length):{},l=d(async function(c){r++;try{o[c]=await t[c](c)}catch(h){if(e)throw h;o[c]=h}let f=s[r];if(f&&t[f]!=null)return l(f)},"execute"),a=[];for(let c of s.slice(0,n))a.push(l(c));return[a,o]}static async concurrencyAll(t,e=null){let[n,s]=i.#e(t,!0,e);return await i.all(n),s}static async concurrencyAllSettled(t,e=null){let[n,s]=i.#e(t,!1,e);return await i.allSettled(n),s}constructor(t){let e,n;super((l,a)=>{e=l,n=a});let s=d(l=>{this.status="fulfilled",e(l)},"resolve2"),r=d(l=>{this.status="rejected",n(l)},"reject2"),o=new AbortController;o.signal.addEventListener("abort",l=>{l.target.reason===i.resolvedReasonSymbol?s(this.resolved):r(l.target.reason)}),t(s,r),this.controller=o,this.resolved=null,this.status="pending"}cancel(t){this.resolved=t,this.controller.abort(i.resolvedReasonSymbol)}abort(t){this.controller.abort(t)}},W=class extends L.FileReader{static{d(this,"FileReader")}promise(){return new $((t,e)=>{this.addEventListener("load",n=>t(n.target.result)),this.addEventListener("error",n=>e(n.target.error))})}},M=class i extends null{static{d(this,"Proxy")}static instances=new WeakSet;static[Symbol.hasInstance](t){return i.instances.has(t)}constructor(t,e){let n=new L.Proxy(t,e);return i.instances.add(n),n}},j=class extends EventTarget{static{d(this,"Timer")}constructor(){super(),this.id=null,this.millisecond=null}static wait(t){let e=new this;return new $((n,s)=>{e.addEventListener("alarm",r=>n(Date.now()-r.detail.time)),e.start(t)}).finally(()=>e.stop())}start(t,e=1){x.instance.assert(this.id===null,"Timer is started, please use restart")(),this.millisecond=t;let n=d((s,r)=>{this.id=setTimeout(()=>{this.dispatchEvent(new k("alarm",{detail:{id:this.id,tick:s,time:r}})),s<e&&n(s+1,Date.now())},this.millisecond)},"start");n(1,Date.now())}restart(t,e){return this.stop(),this.start(t,e)}stop(){clearTimeout(this.id),this.id=null}},R=class i{static{d(this,"Options")}constructor(t,e=!1,n=!1){this.options=t,this.handleNull=e,this.handleUndefined=n}extends(t){return new i(Object.assign({},this.options,t),this.handleNull,this.handleUndefined)}merge(t){let e={};for(let n of Object.keys(this.options))this.handleNull&&n in t&&t[n]===null||this.handleUndefined&&n in t&&t[n]===void 0?e[n]=t[n]:e[n]=t[n]??this.options[n];return e}},z=class i{static{d(this,"TimerObserver")}static observers=new L.Set;static timer=new j;static defaultOptions=new R({interval:1e3});constructor(t,e={}){this.options=i.defaultOptions.merge(e),this.observedNodes=new H,this.callback=n=>{let s=[];for(let[r,o]of this.observedNodes.entries()){let l=this._data(r),a=this._compare(o.data,l);this.observedNodes.set(r,"data",l);for(let c of a)s.push(Object.assign(c,{target:r,time:n.timeStamp}))}for(let r of s)t(r,this.observedNodes.reset(r.target,"last",()=>r))},i.timer.addEventListener("alarm",this.callback)}_data(t){}_compare(t,e){}observe(t){this.observedNodes.set(t,"data",this._data(t)),i.timer.restart(Math.min(i.timer.millisecond??this.options.interval,this.options.interval),1/0),i.observers.add(this)}unobserve(t){this.observedNodes.delete(t),this.observedNodes.size===0&&this.disconnect()}disconnect(){this.observedNodes.clear(),i.timer.removeEventListener("alarm",this.callback),i.observers.delete(this),i.observers.size===0&&i.timer.stop()}entries(){return this.observedNodes.entries()}},F=class i extends z{static{d(this,"CookieObserver")}static defaultOptions=z.defaultOptions.extends({cookieName:void 0});static getOptionsKey(t){return JSON.stringify(this.defaultOptions.merge(t))}constructor(t,e={}){super(t,e),this.options=i.defaultOptions.merge(e)}_data(t){return{cookie:t.cookie,cookies:Object.fromEntries(t.cookie.split("; ").map(e=>e.split(/=(.*)/s).map(decodeURIComponent)))}}_compare(t,e){if(t.cookie===e.cookie)return[];let n=new Set;Object.keys(t.cookies).forEach(r=>n.add(r)),Object.keys(e.cookies).forEach(r=>n.add(r));let s=[];for(let r of n.values())if(this.options.cookieName==null||this.options.cookieName.includes(r)){let o=t.cookies[r],l=e.cookies[r];o!==l&&s.push({cookieName:r,oldValue:o,newValue:l})}return s}},N=class i extends L.MutationObserver{static{d(this,"MutationObserver")}static defaultOptions=new R({attributes:void 0,attributeFilter:void 0,attributeOldValue:void 0,characterData:void 0,characterDataOldValue:void 0,childList:void 0,subtree:void 0});static getOptionsKey(t){return JSON.stringify(this.defaultOptions.merge(t))}constructor(t,e={}){super(function(n){for(let s of n)t(s,this.observedNodes.reset(s.target,()=>s))}),this.options=i.defaultOptions.merge(e),this.observedNodes=new T}observe(t){return this.observedNodes.set(t,null),super.observe(t,this.options)}unobserve(t){super.disconnect();for(let[e]of this.observedNodes.entries())e===t?this.observedNodes.delete(e):this.observe(e,this.options)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},A=class i extends L.ResizeObserver{static{d(this,"ResizeObserver")}static defaultOptions=new R({box:void 0});static getOptionsKey(t){return JSON.stringify(this.defaultOptions.merge(t))}constructor(t,e={}){super(function(n){for(let s of n)t(s,this.observedNodes.reset(s.target,()=>s))},e),this.options=i.defaultOptions.merge(e),this.observedNodes=new T}observe(t){return this.observedNodes.set(t,null),super.observe(t,this.options)}unobserve(t){return this.observedNodes.delete(t),super.unobserve(t)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},C=class i extends L.IntersectionObserver{static{d(this,"IntersectionObserver")}static defaultOptions=new R({root:void 0,rootMargin:void 0,threshold:void 0});static getOptionsKey(t){let e=new L.IntersectionObserver(()=>{},t),n={root:e.root,rootMargin:e.rootMargin,threshold:e.thresholds};return n.root=u.objectId(n.root),JSON.stringify(n)}constructor(t,e={}){e=i.defaultOptions.merge(e),super(function(n){for(let s of n)s.realIntersectionRatio=s.intersectionRatio,s.realIntersectionRatio===0&&s.isIntersecting&&(s.realIntersectionRatio=Number.EPSILON),t(s,this.observedNodes.reset(s.target,()=>s))},e),this.options=e,this.observedNodes=new T}observe(t){return this.observedNodes.set(t,null),super.observe(t)}unobserve(t){return this.observedNodes.delete(t),super.unobserve(t)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},k=class extends L.CustomEvent{static{d(this,"CustomEvent")}constructor(t,e){super(t,e),this.$original=e.$original}},P=class extends DOMPoint{static{d(this,"Vector2")}constructor(t,e,n){super(t,e),this.t=n}during(t){return t.t-this.t}deltaX(t){return t.x-this.x}deltaY(t){return t.y-this.y}distance(t){return Math.sqrt(this.deltaX(t)**2+this.deltaY(t)**2)}degree(t){let e=Math.atan2(this.deltaY(t),this.deltaX(t))*(180/Math.PI)+90;return e<0&&(e+=360),e}velocity(t){return this.distance(t)/this.during(t)}};var q=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){e.attributeName&&(e.attributeFilter=u.objectIsArrayLike(e.attributeName)?e.attributeName:[e.attributeName]),e=Object.assign(e,{attributes:!0,attributeOldValue:!0}),this.eventId=N.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new N((s,r)=>{n(s.target,{subtype:s.attributeName,oldValue:s.oldValue,newValue:s.target.getAttribute(s.attributeName)},{$original:{observer:this.observer,entry:s}})},e),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var _=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){let s=e.attributes;e=Object.assign(e,{childList:!0,attributes:!1}),this.eventId=N.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new N((r,o)=>{for(let l of r.addedNodes)l instanceof Element&&(n(r.target,{subtype:"insert",node:l},{$original:{observer:this.observer,entry:r}}),this.constructor.observers["attribute"+this.eventId]?.observe?.(l));for(let l of r.removedNodes)l instanceof Element&&(n(r.target,{subtype:"remove",node:l},{$original:{observer:this.observer,entry:r}}),this.constructor.observers["attribute"+this.eventId]?.unobserve?.(l))},e),s&&(this.attributer=this.constructor.observers["attribute"+this.eventId]??=new N((r,o)=>{n(r.target.parentElement,{subtype:"change",node:r.target,name:r.attributeName,oldValue:r.oldValue,newValue:r.target.getAttribute(r.attributeName)},{$original:{observer:this.attributer,entry:r}})},{subtree:e.subtree,childList:!1,attributes:!0,attributeOldValue:!0})),this.handlers={insert:d(r=>this.observer.observe(r),"insert"),delete:d(r=>this.observer.unobserve(r),"delete")}}};var K=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){this.eventId=F.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new F((s,r)=>{n(s.target,{subtype:s.cookieName,oldValue:s.oldValue,newValue:s.newValue},{$original:{observer:this.observer,entry:s},bubbles:!1,cancelable:!1,composed:!1})},e),this.observer.observe(i)}destructor(i){this.observer.unobserve(i)}};var G=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){e=Object.assign(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["disabled"]}),this.eventId=N.getOptionsKey(e),this.selector=t?`${t}, fieldset`:null,this.observer=this.constructor.observers[t+this.eventId]??=new N((s,r)=>{let o=d(l=>{let a=d(function(h,m){for(let g=h;g!=null;g=g.parentElement)if(m&&g===s.target){if(s.oldValue!=null)return!0}else if(g.disabled)return!0;return!1},"valuer"),c=a(l,!0),f=a(l,!1);c!==f&&n(l,{subtype:c?"enable":"disable",oldValue:c,newValue:f},{$original:{observer:this.observer,entry:s}})},"trigger2");(!t||s.target.matches(t))&&o(s.target),t&&s.target.querySelectorAll(t).forEach(l=>o(l))},e),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var X=class{static{d(this,"default")}constructor(i,t,e,n){e.buttons??=1,this.starting=!1,this.vectors=[],this.down=s=>{s.target.setPointerCapture(s.pointerId),this.starting=!0,this.vectors.splice(0)},this.move=s=>{s.buttons&e.buttons&&this.starting&&this.vectors.push(new P(s.offsetX,s.offsetY,s.timeStamp))},this.up=s=>{if(s.target.releasePointerCapture(s.pointerId),this.starting){if(this.starting=!1,this.vectors.length===0)return;let r=e.threshold??50,o=new P(s.offsetX,s.offsetY,s.timeStamp),l=1+this.vectors.findLastIndex(h=>h.during(o)>r),a=this.vectors[l],c=this.vectors.slice(l),f=c.slice(0,-1).reduce((h,m,g)=>h+c[g].distance(c[g+1]),0);if(f===0)return;this.vectors.splice(0),n(s.target,{velocity:f/a.during(o),degree:a.degree(o),during:a.during(o)},{$original:s,bubbles:!0})}},this.cancel=s=>{s.target.releasePointerCapture(s.pointerId),this.starting=!1,this.vectors.splice(0)},i.addEventListener("pointerdown",this.down),i.addEventListener("pointercancel",this.cancel),i.addEventListener("pointermove",this.move),i.addEventListener("pointerup",this.up)}destructor(i){i.removeEventListener("pointerdown",this.down),i.removeEventListener("pointercancel",this.cancel),i.removeEventListener("pointermove",this.move),i.removeEventListener("pointerup",this.up)}};var Y=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){e.first??=!0,this.eventId=C.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new C((s,r)=>{if(e.first||r){let o=r?!r.isIntersecting&&s.isIntersecting?"enter":r.isIntersecting&&!s.isIntersecting?"leave":"hover":null;n(s.target,{subtype:o,oldValue:r?.realIntersectionRatio??null,newValue:s.realIntersectionRatio},{$original:{observer:this.observer,entry:s}})}},e),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var J=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){e.first??=!0,this.eventId=A.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new A((s,r)=>{if(e.first||r){let o=u.stringToPascalCase(e.box??"content-box","-")+"Size";n(s.target,{subtype:e.box??"content-box",oldValue:r==null?null:r[o][0],newValue:s[o][0]},{$original:{observer:this.observer,entry:s}})}},e),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var Z=class{static{d(this,"default")}constructor(i,t,e,n){e.buttons??=1,this.firstVector=null,this.down=s=>{s.target.setPointerCapture(s.pointerId),this.firstVector=new P(s.offsetX,s.offsetY,s.timeStamp)},this.move=s=>{if(s.buttons&e.buttons&&this.firstVector){let r=new P(s.offsetX,s.offsetY,s.timeStamp),o=this.firstVector.distance(r);o!==0&&n(s.target,{distance:o,deltaX:this.firstVector.deltaX(r),deltaY:this.firstVector.deltaY(r),velocity:this.firstVector.velocity(r),degree:this.firstVector.degree(r),during:this.firstVector.during(r)},{$original:s,bubbles:!0})}},this.up=s=>{s.target.releasePointerCapture(s.pointerId),this.firstVector=null},this.cancel=s=>{s.target.releasePointerCapture(s.pointerId),this.firstVector=null},i.addEventListener("pointerdown",this.down),i.addEventListener("pointermove",this.move),i.addEventListener("pointerup",this.up),i.addEventListener("pointercancel",this.cancel)}destructor(i){i.removeEventListener("pointerdown",this.down),i.removeEventListener("pointermove",this.move),i.removeEventListener("pointerup",this.up),i.removeEventListener("pointercancel",this.cancel)}};var Q=class{static{d(this,"default")}static observers={};constructor(i,t,e,n){e.first??=!0,this.eventId=A.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new A((s,r)=>{let o=s.contentRect.x>0||s.contentRect.y>0||s.contentRect.width>0||s.contentRect.height>0;(e.first||r)&&o!==r?.visible&&n(s.target,{subtype:"content-visibility",oldValue:r==null?null:!o,newValue:o},{$original:{observer:this.observer,entry:s}})},e),this.handlers={insert:d(s=>this.observer.observe(s),"insert"),delete:d(s=>this.observer.unobserve(s),"delete")}}};var ee=class{static{d(this,"KQuery")}constructor(t){let e=this;this.API=B,this.config=new D(function(){if(u.objectIsPlain(t)&&!t.url)return t;let n={};if(t.url||t.src)for(let[s,r]of new URL(t.url||t.src).searchParams.entries())s.startsWith("kQuery-")&&(n[s.substring(7)]=r);if(t instanceof HTMLScriptElement){for(let[s,r]of u.objectToEntries(t.dataset))if(s.startsWith("kquery")){let o=s.substring(6);n[o.charAt(0).toLowerCase()+o.substring(1)]=r}}return n}()),this.config.configure({debug:!1,logLevel:0,global:"kQuery"}),globalThis[this.config.global]=this,this.logger=new x(this.config.debug,this.config.logLevel,"[kQuery]",globalThis.console)}extends(t){let e=this,n=t.name?t.name:t;this.logger.time(n);for(let[s,r]of Object.entries(t(e))){let o=Object.getOwnPropertyDescriptors(r);for(let l of Object.values(o))if(l.set){let a=l.set;(e.config.resetNative||!u.functionIsNative(a))&&(l.set=function(...c){return u.functionToCallbackable(a.bind(this),this,this)(...c)})}for(let l of s.split(","))if(l.charAt(0)==="$")for(let a of B[l]())for(let[c,f]of Object.entries(o))c!=="length"&&Object.defineProperty(globalThis[a].prototype,c,{get(){let h=u.objectToEntries(this).map(([m,g])=>g?.[c]);return h.length&&h.every(m=>u.anyIsPrimitive(m,Object,Array,FileList))?h:new U(h,c,this)},set(h){return u.objectToEntries(this).forEach(([m,g])=>{c in g&&u.functionToCallbackable(O=>g[c]=O,this,g,m)(h)})},configurable:f.configurable,enumerable:f.enumerable});else Object.defineProperties(globalThis[l].prototype,o)}this.logger.timeEnd(n)}};function oe(i){let t={EventTarget:["dispatchEvent"],Element:["computedStyleMap","elementTiming","getInnerHTML","onbeforecopy","onbeforecut","onbeforepaste","onfullscreenchange","onfullscreenerror","onsearch","scrollIntoViewIfNeeded"],HTMLAnchorElement:["attributionSrc","charset","coords","name","rev","shape"],HTMLAreaElement:["noHref"],HTMLBRElement:["clear"],HTMLBodyElement:["aLink","background","bgColor","link","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","text","vLink"],HTMLDListElement:["compact"],HTMLDirectoryElement:["*"],HTMLDivElement:["align"],HTMLElement:["attributeStyleMap","editContext","onabort","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforematch","onbeforetoggle","onbeforexrselect","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerrawupdate","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onscrollsnapchange","onscrollsnapchanging","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwheel","virtualKeyboardPolicy","writingSuggestions"],HTMLEmbedElement:["align","name"],HTMLFencedFrameElement:["*"],HTMLFontElement:["color","face","size"],HTMLFormElement:["requestAutocomplete"],HTMLFrameElement:["*"],HTMLFrameSetElement:["cols","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","rows"],HTMLHRElement:["align","color","noShade","size","width"],HTMLHeadingElement:["align"],HTMLHtmlElement:["version"],HTMLIFrameElement:["adAuctionHeaders","align","allowPaymentRequest","credentialless","csp","featurePolicy","frameBorder","longDesc","marginHeight","marginWidth","privateToken","sharedStorageWritable","scrolling"],HTMLImageElement:["align","attributionSrc","border","fetchPriority","hspace","longDesc","name","sharedStorageWritable","vspace"],HTMLInputElement:["align","incremental","useMap","webkitdirectory"],HTMLLIElement:["type"],HTMLLegendElement:["align"],HTMLLinkElement:["charset","blocking","fetchPriority","rev","target"],HTMLMarqueeElement:["*"],HTMLMediaElement:["captureStream","controller","controlsList","disableRemotePlayback","mediaGroup","onencrypted","onwaitingforkey","remote","setSinkId","sinkId"],HTMLMenuElement:["compact"],HTMLMetaElement:["scheme"],HTMLOListElement:["compact"],HTMLObjectElement:["align","archive","border","code","codeBase","codeType","declare","hspace","standby","vspace"],HTMLParagraphElement:["align"],HTMLParamElement:["name","type","value","valueType"],HTMLPreElement:["width"],HTMLScriptElement:["attributionSrc","blocking","charset","event","fetchPriority"],HTMLStyleElement:["blocking","type"],HTMLTableCaptionElement:["align"],HTMLTableCellElement:["align","axis","bgColor","ch","chOff","height","noWrap","vAlign","width"],HTMLTableColElement:["align","ch","chOff","span","vAlign","width"],HTMLTableElement:["align","bgColor","border","cellPadding","cellSpacing","frame","rules","summary","width"],HTMLTableRowElement:["align","bgColor","ch","chOff","vAlign"],HTMLTableSectionElement:["align","ch","chOff","vAlign"],HTMLUListElement:["compact","type"],HTMLVideoElement:["cancelVideoFrameCallback","onenterpictureinpicture","onleavepictureinpicture","playsInline","requestPictureInPicture","requestVideoFrameCallback"]},e={Blob:["arrayBuffer","size","slice","stream","text","type"],Element:["after","animate","append","ariaAtomic","ariaAutoComplete","ariaBrailleLabel","ariaBrailleRoleDescription","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColIndexText","ariaColSpan","ariaCurrent","ariaDescription","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowIndexText","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","assignedSlot","attachShadow","attributes","before","checkVisibility","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","currentCSSZoom","firstElementChild","getAnimations","getAttribute","getAttributeNS","getAttributeNames","getAttributeNode","getAttributeNodeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","getHTML","hasAttribute","hasAttributeNS","hasAttributes","hasPointerCapture","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","moveBefore","namespaceURI","nextElementSibling","outerHTML","part","prefix","prepend","previousElementSibling","querySelector","querySelectorAll","releasePointerCapture","remove","removeAttribute","removeAttributeNS","removeAttributeNode","replaceChildren","replaceWith","requestFullscreen","requestPointerLock","role","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNS","setAttributeNode","setAttributeNodeNS","setHTMLUnsafe","setPointerCapture","shadowRoot","slot","tagName","toggleAttribute"],EventTarget:["addEventListener","removeEventListener"],File:["lastModified","lastModifiedDate","name"],HTMLAnchorElement:["download","hash","host","hostname","href","hreflang","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","target","text","toString","type","username"],HTMLAreaElement:["alt","coords","download","hash","host","hostname","href","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","shape","target","toString","username"],HTMLBaseElement:["href","target"],HTMLButtonElement:["checkValidity","disabled","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","labels","name","popoverTargetAction","popoverTargetElement","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLCanvasElement:["captureStream","getContext","height","toBlob","toDataURL","transferControlToOffscreen","width"],HTMLDataElement:["value"],HTMLDataListElement:["options"],HTMLDetailsElement:["name","open"],HTMLDialogElement:["close","closedBy","open","requestClose","returnValue","show","showModal"],HTMLElement:["accessKey","attachInternals","autocapitalize","autofocus","blur","click","contentEditable","dataset","dir","draggable","enterKeyHint","focus","hidden","hidePopover","inert","innerText","inputMode","isContentEditable","lang","nonce","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth","outerText","popover","showPopover","spellcheck","style","tabIndex","title","togglePopover","translate"],HTMLEmbedElement:["getSVGDocument","height","src","type","width"],HTMLFieldSetElement:["checkValidity","disabled","elements","form","name","reportValidity","setCustomValidity","type","validationMessage","validity","willValidate"],HTMLFormElement:["acceptCharset","action","autocomplete","checkValidity","elements","encoding","enctype","length","method","name","noValidate","rel","relList","reportValidity","requestSubmit","reset","submit","target"],HTMLIFrameElement:["allow","allowFullscreen","contentDocument","contentWindow","getSVGDocument","height","loading","name","referrerPolicy","sandbox","src","srcdoc","width"],HTMLImageElement:["alt","complete","crossOrigin","currentSrc","decode","decoding","height","isMap","loading","lowsrc","naturalHeight","naturalWidth","referrerPolicy","sizes","src","srcset","useMap","width","x","y"],HTMLInputElement:["accept","alt","autocomplete","checkValidity","checked","defaultChecked","defaultValue","dirName","disabled","files","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","height","indeterminate","labels","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","popoverTargetAction","popoverTargetElement","readOnly","reportValidity","required","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","showPicker","size","src","step","stepDown","stepUp","type","validationMessage","validity","value","valueAsDate","valueAsNumber","width","willValidate"],HTMLLIElement:["value"],HTMLLabelElement:["control","form","htmlFor"],HTMLLegendElement:["form"],HTMLLinkElement:["as","crossOrigin","disabled","href","hreflang","imageSizes","imageSrcset","integrity","media","referrerPolicy","rel","relList","sheet","sizes","type"],HTMLMapElement:["areas","name"],HTMLMediaElement:["addTextTrack","autoplay","buffered","canPlayType","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","load","loop","muted","networkState","pause","paused","play","playbackRate","played","preload","preservesPitch","readyState","seekable","seeking","src","srcObject","textTracks","volume"],HTMLMetaElement:["content","httpEquiv","media","name"],HTMLMeterElement:["high","labels","low","max","min","optimum","value"],HTMLModElement:["cite","dateTime"],HTMLOListElement:["reversed","start","type"],HTMLObjectElement:["checkValidity","contentDocument","contentWindow","data","form","getSVGDocument","height","name","reportValidity","setCustomValidity","type","useMap","validationMessage","validity","width","willValidate"],HTMLOptGroupElement:["disabled","label"],HTMLOptionElement:["defaultSelected","disabled","form","index","label","selected","text","value"],HTMLOutputElement:["checkValidity","defaultValue","form","htmlFor","labels","name","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLProgressElement:["labels","max","position","value"],HTMLQuoteElement:["cite"],HTMLScriptElement:["async","crossOrigin","defer","htmlFor","integrity","noModule","referrerPolicy","src","text","type"],HTMLSelectElement:["add","autocomplete","checkValidity","disabled","form","item","labels","length","multiple","name","namedItem","options","remove","reportValidity","required","selectedIndex","selectedOptions","setCustomValidity","showPicker","size","type","validationMessage","validity","value","willValidate"],HTMLSlotElement:["assign","assignedElements","assignedNodes","name"],HTMLSourceElement:["height","media","sizes","src","srcset","type","width"],HTMLStyleElement:["disabled","media","sheet"],HTMLTableCellElement:["abbr","cellIndex","colSpan","headers","rowSpan","scope"],HTMLTableElement:["caption","createCaption","createTBody","createTFoot","createTHead","deleteCaption","deleteRow","deleteTFoot","deleteTHead","insertRow","rows","tBodies","tFoot","tHead"],HTMLTableRowElement:["cells","deleteCell","insertCell","rowIndex","sectionRowIndex"],HTMLTableSectionElement:["deleteRow","insertRow","rows"],HTMLTemplateElement:["content","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shadowRootSerializable"],HTMLTextAreaElement:["autocomplete","checkValidity","cols","defaultValue","dirName","disabled","form","labels","maxLength","minLength","name","placeholder","readOnly","reportValidity","required","rows","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","textLength","type","validationMessage","validity","value","willValidate","wrap"],HTMLTimeElement:["dateTime"],HTMLTitleElement:["text"],HTMLTrackElement:["default","kind","label","readyState","src","srclang","track"],HTMLVideoElement:["disablePictureInPicture","getVideoPlaybackQuality","height","poster","videoHeight","videoWidth","width"],Node:["appendChild","baseURI","childNodes","cloneNode","compareDocumentPosition","contains","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isDefaultNamespace","isEqualNode","isSameNode","lastChild","lookupNamespaceURI","lookupPrefix","nextSibling","nodeName","nodeType","nodeValue","normalize","ownerDocument","parentElement","parentNode","previousSibling","removeChild","replaceChild","textContent"]},n=i.config.debug?function(){let o=Object.create(null);for(let a of Object.keys(Object.getOwnPropertyDescriptors(globalThis))){if(!a.match(/^((EventTarget)|(Blob|File)|(Node|Element)|(HTML.*Element))$/))continue;let c=globalThis[a];for(let f in c.prototype)f.toUpperCase()!==f&&(f.match(/^(webkit|moz)[A-Z]/)||f.startsWith("onwebkit")||Object.prototype.hasOwnProperty.call(c.prototype,f)&&(a in t&&(t[a].includes(f)||t[a].includes("*"))||(o[c.name]=(o[c.name]??new Set).add(f))))}let l={};for(let a of Object.keys(o).toSorted())l[a]=[...o[a]].toSorted();return i.logger.debug(Object.keys(l).map(a=>`// https://developer.mozilla.org/docs/Web/API/${a}
${a}: ${JSON.stringify(l[a])},`).join(`
`)),l}():e;i.config.configure({appendNative:!0,resetNative:!0});let s=i.config.appendNative?{[[Node.name]]:{[Symbol.toPrimitive](){return this.outerHTML??this.nodeValue??null}},[[NodeList.name]]:{[Symbol.toPrimitive](){return[...this].join("")},dispatchEvent(o){let l=[];for(let a of this){let c=new o.constructor(o.type,o);l.push(a.dispatchEvent(c))}return l}},[[RadioNodeList.name]]:{get name(){return this[0]?.name},set name(o){[...this].forEach(function(l){l.name=o})}}}:{},r=d(function(o,l,a){s[o]??={},Object.defineProperty(s[o],l,a)},"defineProperty");for(let[o,l]of Object.entries(n))if(o in globalThis){let a=globalThis[o].prototype;for(let c of l){let f=Object.getOwnPropertyDescriptor(a,c);f&&(r(o,c,f),(globalThis[o]===globalThis.EventTarget||a instanceof EventTarget)&&r(v.name,c,f),(globalThis[o]===globalThis.Node||a instanceof Node)&&r(v.name,c,f),(globalThis[o]===globalThis.Blob||a instanceof Blob)&&r(V.name,c,f))}}return s}d(oe,"autoproperties");function ae(i){return i.config.configure({customEventPrefix:"$"}),Object.assign(i,{wellknownEvents:{click:PointerEvent},customEvents:{}}),{[[EventTarget.name,v.name]]:function(){let t=new T,e=d(function(r,o){if(o==null){if(!r)throw new Error("Empty EventType is only allowed this context");return[[null,[]]]}return(""+o).trim().split(/\s+/).map(l=>l.trim().split(".")).map(([l,...a])=>{if(!r&&!l.length)throw new Error("Empty EventType is only allowed this context");return[l,a.filter(c=>c.length)]})},"eachType"),n=d(function(r){return r in i.customEvents&&(r=i.config.customEventPrefix+r),r},"internalEventName"),s=new class{constructor(){let r=d(function(o,l){let a=new Set;for(let c of o)if(c instanceof Element){c.matches(l)&&a.add(c);for(let f of c.querySelectorAll(l))a.add(f)}return a},"querySelectorThisAndAll");this.nodeSelectorCallback=new T,this.observer=new N(o=>{for(let[l,a]of this.nodeSelectorCallback.entries())for(let{selector:c,callbacks:f}of a){for(let h of r(o.addedNodes,c))i.logger.debug("Insert node to delegation emulation of ",l),f.insert(h);for(let h of r(o.removedNodes,c))i.logger.debug("Delete node to delegation emulation of ",l),f.delete(h)}},{attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0})}watch(r,o,l){if(o==null)l.insert(r);else{this.nodeSelectorCallback.getOrSet(r,()=>[]).push({selector:o,callbacks:l});for(let a of r.querySelectorAll(o))i.logger.debug("Initial node to delegation emulation of ",a),l.insert(a);return this.observer.observe(r)}}unwatch(r,o,l){o==null?l.delete(r):this.nodeSelectorCallback.reset(r,a=>a.filter(c=>c.selector===o&&c.callbacks===l?(i.logger.debug("Unwatch node to delegation emulation of ",r),!1):!0))}};return{$on(r,o,l,a){typeof o=="function"&&(a=l,l=o,o=null),a=Object.assign({once:void 0,capture:void 0,passive:void 0,signal:void 0,ownself:!1,interval:void 0,throttle:void 0,debounce:void 0,leading:void 0,trailing:void 0},a),i.logger.assertInstanceOf(r,String)(),i.logger.assertInstanceOf(o,p,String)(),i.logger.assertInstanceOf(l,Function)(),i.logger.assertInstanceOf(a,Object)(),o!=null&&a.capture&&i.logger.warn("Delegation of capture phase isn't tested, so might not work well"),a.throttle&&!a.debounce&&(a.leading??=!0,a.trailing??=!1),a.debounce&&!a.throttle&&(a.leading??=!1,a.trailing??=!0);for(let[c,f]of e(!1,r)){let h={type:c,namespaces:f,selector:o,listener:l,options:a,counter:new T,collectors:[]},m;!(this instanceof Window)&&c in i.customEvents&&(m=new i.customEvents[c](this,o,a,function(b,w={},y={}){m.bubbles="bubbles"in y,y.$original??={},y.$original.$eventId??=m.eventId,y.bubbles??=(m.selector??o)!=null,y.detail??=w,b.$trigger(c,y)}),m.handlers??={},m.handlers.insert??=b=>{},m.handlers.delete??=b=>{},s.watch(this,m.selector??o,m.handlers),h.collectors.push(()=>{s.unwatch(this,m.selector??o,m.handlers),m.destructor?.(this)}));let g=new H,O=d(async b=>{if(b.$namespaces?.length&&b.$namespaces.some(E=>!h.namespaces.includes(E))||m?.eventId!==b.$original?.$eventId)return;let w=b.target,y=d(async(E,te)=>{let se=j.wait(E),re=g.reset(w,"timer",()=>se);return!((!te||re?.status==="pending")&&(re?.cancel(null),await se===null||!a.trailing))},"debounce");if(!(a.debounce!=null&&!await y(a.debounce,a.leading))){if(a.throttle!=null){if(g.getOrSet(w,"start",()=>Date.now()-(a.leading?a.throttle:0))+a.throttle>Date.now()&&!await y(a.throttle,!1))return;g.set(w,"start",Date.now())}if(b.$abort=E=>h.abortController.abort(E),h.selector==null)return h.listener.call(this,b);for(let E=w;E&&E!==this;E=E.parentElement){if(E.matches(h.selector)&&!(a.once&&h.counter.get(w)))return!h.counter.reset(w,te=>(te??0)+1)&&a.once&&m?.handlers?.delete?.(w),m&&!m.bubbles&&b.stopPropagation(),b.$delegateTarget=E,h.listener.call(this,b);if(a.ownself)break}}},"handler");h.handler=new WeakRef(O),t.getOrSet(this,()=>[]).push(h);let I=h.selector==null?a:Object.assign({},a,{once:!1});h.abortController=new AbortController,h.abortController.signal.addEventListener("abort",h.destructor),I.signal?I.signal=AbortSignal.any([I.signal,h.abortController.signal]):I.signal=h.abortController.signal,this.addEventListener(n(c),O,I),h.destructor=function(){i.logger.debug("Release of ",c,o,a),h.collectors.forEach(b=>b()),h.collectors=[]},u.objectFinalize(O,h.destructor)}return this},$off(r,o,l,a){typeof o=="function"&&(a=l,l=o,o=null),i.logger.assertInstanceOf(r,p,String)(),i.logger.assertInstanceOf(o,p,String)(),i.logger.assertInstanceOf(l,p,Function)(),i.logger.assertInstanceOf(a,p,Object)();for(let[c,f]of e(!0,r))t.reset(this,h=>(h??[]).filter(m=>c&&c!==m.type||f.length&&f.some(g=>!m.namespaces.includes(g))||o&&o!==m.selector||l&&l!==m.listener||a?.capture!==m.options.capture?!0:(this.removeEventListener(n(m.type),m.handler.deref(),m.options),m.destructor(),!1)));return this},$trigger(r,o={}){i.logger.assertInstanceOf(r,String)(),i.logger.assertInstanceOf(o,Object)();let l=!0;for(let[a,c]of e(!1,r)){let f=i.wellknownEvents[a]??k,h=new f(n(a),Object.assign({bubbles:!0,cancelable:!0,composed:!0},o));h.$namespaces=c;let m=this.dispatchEvent(h);i.logger.debug(`Event ${a} is ${m?"completed":"canceled"}`,this,h),l=l&&m}return l},$events(r,o,l=!1){i.logger.assertInstanceOf(r,p,String)(),i.logger.assertInstanceOf(o,p,Boolean)(),i.logger.assertInstanceOf(l,Boolean)();let a=t.get(this)??[];if(o)for(let c=this.parentNode;c;c=c.parentNode)for(let f of t.get(c)??[])f.selector!=null&&this.matches(f.selector)&&(f.options.once&&f.counter.get(this)||a.push(f));return a.filter(c=>{if(!c.handler.deref())return!1;for(let[f,h]of e(!0,r))if(f&&f!==c.type||h.length&&h.some(m=>!c.namespaces.includes(m)))return!1;return l===(c.options.capture??!1)})}}}()}}d(ae,"events");function le(i){return{[[Element.name,v.name]]:function(){let t=new H;class e{static{d(this,"ProxyProperty")}static NotImplemented=Symbol("NotImplemented");constructor(s,r){this.node=s,this.name=r,this.object=s[r]}has(s,r){return this._hasValue(r)}_hasValue(s){return Reflect.has(this.object,s)}get(s,r){if(r===Symbol.toPrimitive||r==="toString")return()=>this._getString();if(r.charAt(0)==="$"){let l=this._get$Value(r.substring(1));if(l!==e.NotImplemented)return l}let o=Reflect.get(this.object,r);return typeof o=="function"?this._getFunction(r,o):this._getValue(r,o)}_getString(){}_get$Value(s){return e.NotImplemented}_getFunction(s,r){let o=d((...l)=>{let a=u.functionToCallbackable(r,this.node,this.node,o.i).call(this.object,...l);return a===void 0?t.get(this.node,this.name):a},"method");return o}_getValue(s,r){return r}set(s,r,o){return typeof o=="function"&&(o=this._setFunction(r,o)),this._setValue(r,o),!0}_setFunction(s,r){return r.call(this.object,this.node)}_setValue(s,r){r!==void 0&&this.apply(null,null,[{[s]:r}])}deleteProperty(s,r){let o=Reflect.get(this.object,r);return this._deleteValue(r,o),!0}_deleteValue(s,r){Reflect.deleteProperty(this.object,s)}apply(s,r,o){return o[0]instanceof Array||u.objectIsPlain(o[0])?(this._applySet(...o),t.get(this.node,this.name)):this._applyGet(...o)}_applyGet(...s){}_applySet(...s){}}return{get $attrs(){return t.getOrSet(this,"attributes",(n,s)=>new M(d(function(){},"$Attrs"),new class extends e{_getString(){return Object.values(n.attributes).map(r=>`${u.stringEscape(r.name,"attr-name")}="${u.stringEscape(r.value,"attr-value")}"`).join(" ")}_get$Value(r){return n.closest(`[${u.stringEscape(r,"css")}]`)?.getAttribute(r)??null}_getValue(r,o){return o?.value}_deleteValue(r,o){n.removeAttribute(r)}_applyGet(){return Object.fromEntries(Array.from(n.attributes,r=>[r.name,r.value]))}_applySet(r){let o=u.objectToAttributes(r);for(let[l,a]of Object.entries(o))typeof a=="boolean"?n.toggleAttribute(l,a):n.setAttribute(l,a)}}(n,s)))},set $attrs(n){if(i.logger.assertInstanceOf(n,p,Object)(),n!=null){for(let s of Object.values(this.attributes))this.attributes.removeNamedItem(s.name);this.$attrs(n)}},get $data(){return t.getOrSet(this,"dataset",(n,s)=>new M(d(function(){},"$Data"),new class extends e{_getString(){return JSON.stringify(this.apply(null,null,[""]))}_get$Value(r){return this._applyGet(r)}_applyGet(r){let o={};for(let[m,g]of Object.entries(n.dataset))o[m]=g;if(typeof r!="string")return o;let l=u.stringToKebabCase(r),a=new RegExp(l?`^${r}[A-Z]`:".*"),c={};for(let[m,g]of Object.entries(o))a.test(m)&&(c[u.stringToKebabCase(m)]=g);let f=Object.entries(c).map(([m,g])=>[m.split("-"),g]),h=u.entriesToObject(f,!0);return l?l.split("-").reduce((m,g)=>m?.[g],h)??{}:h}_applySet(r){for(let[o,l]of Object.entries(u.objectToDataset(r)))n.dataset[u.stringToPascalCase(o)]=l}}(n,s)))},set $data(n){if(i.logger.assertInstanceOf(n,p,Object)(),n!=null){for(let s of Object.keys(this.dataset))delete this.dataset[s];this.$data(n)}},get $style(){return t.getOrSet(this,"style",(n,s)=>new M(d(function(){},"$Style"),new class extends e{_hasValue(r){return!!Reflect.get(n.style,r)}_getString(){return n.style.cssText}_get$Value(r){let[o,l]=r.split("::");l=l?`::${l}`:null;let a=n.$window.getComputedStyle(n,l);return o.length?a.getPropertyValue(u.stringToKebabCase(o)):a}_getValue(r,o){return r.startsWith("--")?n.style.getPropertyValue(u.stringToKebabCase(r)):o||o===void 0?o:null}_deleteValue(r,o){n.style.removeProperty(u.stringToKebabCase(r))}_applyGet(r){let o={};for(let l=0;;l++){let a=n.style[l];if(!a)break;if(r===!0){let c=n.style.getPropertyPriority(a);o[a]=n.style.getPropertyValue(a)+(c?`!${c}`:"")}else o[a]=n.style.getPropertyValue(a)}return o}_applySet(r){for(let[o,l]of u.objectToEntries(r)){let a=""+l,c=a.replace(/!important$/,"");n.style.setProperty(u.stringToKebabCase(o),c,a===c?"":"important")}}}(n,s)))},set $style(n){i.logger.assertInstanceOf(n,p,Object)(),n!=null&&(this.setAttribute("style",""),this.$style(n))},get $class(){return t.getOrSet(this,"classList",(n,s)=>new M(d(function(){},"$Class"),new class extends e{_hasValue(r){return n.classList.contains(r)}_getString(){return n.classList.value}_getValue(r,o){return n.classList.contains(r)}_deleteValue(r,o){n.classList.remove(r)}_applyGet(){return[...n.classList.values()]}_applySet(r){for(let[o,l]of u.objectToEntries(u.objectToClasses(r)))n.classList.toggle(o,l)}}(n,s)))},set $class(n){i.logger.assertInstanceOf(n,p,String,Object,Array)(),n!=null&&(this.classList.value="",this.$class(n))}}}()}}d(le,"attributes");function ce(i){return{[[Node.name,v.name]]:function(){let t=new T;return{get $bag(){let e={};return t.getOrSet(this,()=>new M(d(function(){},"$Bag"),{has(n,s){return Reflect.has(e,s)},get(n,s){return s===Symbol.toPrimitive||s==="toString"?()=>JSON.stringify(e):Reflect.get(e,s)},set(n,s,r){return Reflect.set(e,s,r),!0},deleteProperty(n,s){return Reflect.deleteProperty(e,s),!0},apply(n,s,r){return u.objectIsPlain(r[0])&&Object.assign(e,r[0]),e}}))},set $bag(e){if(i.logger.assertInstanceOf(e,p,Object)(),e==null)return;let n=this.$bag;for(let s of Object.keys(n()))delete n[s];n(e)}}}(),[[HTMLStyleElement.name,HTMLLinkElement.name,v.name]]:{async $contents(t=!0){let e;if(this instanceof HTMLLinkElement?e=await(await u.fetch(this.href)).text():e=this.textContent,t){let n=/url\(((['"])?.+?\2?)\)/g,s=d(l=>(l=u.stringUnquote(l,"css-url"),l.charAt(0)==="#"?null:new URL(l,this.href)),"normalize"),r={};for(let[,l]of e.matchAll(n)){let a=s(l);a&&(r[a]??=async c=>{let f=await u.fetch(c).catch(h=>({ok:!1}));return f.ok?(await f.blob()).$dataURL():null})}let o=await $.concurrencyAll(r,6);e=e.replace(n,(l,a)=>{let c=s(a);return c&&o[c]?"url("+u.stringQuote(o[c]+c.hash,"css-url")+")":l})}return e}},[[HTMLScriptElement.name,v.name]]:{async $contents(){let t;return this.src?t=await(await u.fetch(this.src)).text():t=this.textContent,t}},[[HTMLImageElement.name,v.name]]:{get $URL(){return new URL(this.src,this.baseURI)},set $URL(t){this.src=t},async $contents(){let t=new URL(this.currentSrc,this.baseURI),e=await u.fetch(t),n=await e.blob();return new File([n],t.pathname.split("/").at(-1)??this.currentSrc,{type:n.type,...e.headers.has("last-modified")?{lastModified:new Date(e.headers.get("last-modified")).getTime()}:{}})},async $dataURL(t,e){return i.logger.assertInstanceOf(t,p,String)(),i.logger.assertInstanceOf(e,p,Number)(),new $(n=>{let s=this.$document.createElement("canvas");s.width=this.width,s.height=this.height,s.getContext("2d").drawImage(this,0,0),n(s.toDataURL(t,e))})},async $blob(t,e){return i.logger.assertInstanceOf(t,p,String)(),i.logger.assertInstanceOf(e,p,Number)(),new $(n=>{let s=this.$document.createElement("canvas");s.width=this.width,s.height=this.height,s.getContext("2d").drawImage(this,0,0),s.toBlob(n,t,e)})},async $file(t,e){i.logger.assertInstanceOf(t,p,String)(),i.logger.assertInstanceOf(e,p,Number)();let n=new URL(this.currentSrc,this.baseURI);return new File([await this.$blob(t,e)],n.pathname.split("/").at(-1)??this.currentSrc,{type:t})}},[[HTMLAnchorElement.name,v.name]]:{get $URL(){return new URL(this.href,this.baseURI)},set $URL(t){this.href=t}},[[HTMLFormElement.name,v.name]]:{get $URL(){return new URL(this.action,this.baseURI)},set $URL(t){this.action=t}},[[Blob.name,V.name]]:{$download(t){i.logger.assertInstanceOf(t,p,String)(),t??=this.name??"";let e=URL.createObjectURL(this);document.$createElement("a",{href:e,download:t}).click(),setTimeout(function(){URL.revokeObjectURL(e)},1e3)},async $text(t){return i.logger.assertInstanceOf(t,p,String)(),new TextDecoder(t).decode(await this.arrayBuffer())},async $base64(){let t=await this.$dataURL();return t.substring(t.indexOf(",")+1)},async $dataURL(t){i.logger.assertInstanceOf(t,p,String)();let e=t?this.slice(0,this.size,t):this,n=new W;return n.readAsDataURL(e),n.promise()}}}}d(ce,"data");function ue(i){return{[[Document.name]]:{get $topLayerElement(){let t=this.$$(":modal, :popover-open, :fullscreen");if(t.length<=1)return t[0]??null;for(let e of t)if(e===this.elementFromPoint(0,0))return e;return null},get $modalElement(){let t=this.querySelectorAll(":modal"),e=this.elementFromPoint(0,0);return Array.prototype.find.call(t,n=>n===e)??null}},[[HTMLElement.name,v.name]]:function(){let t=d(function(e){let n=e.getAttribute("style");try{let s=e.$window.getComputedStyle(e),r=parseFloat(s.marginLeft)+parseFloat(s.marginRight),o=parseFloat(s.marginTop)+parseFloat(s.marginBottom);e.style.setProperty("box-sizing","content-box","important"),e.style.setProperty("overflow","hidden","important");let l=e.getBoundingClientRect(),a=l.width,c=l.height;e.style.setProperty("border","none","important");let f=a-e.offsetWidth,h=c-e.offsetHeight;a-=f,c-=h,e.style.setProperty("padding",0,"important");let m=a-e.offsetWidth,g=c-e.offsetHeight,O=e.scrollWidth,I=e.scrollHeight;a-=m,c-=g;let b=e.clientWidth,w=e.offsetHeight;e.style.setProperty("overflow","scroll","important");let y=b-e.clientWidth,E=e.offsetHeight-w;return a-=y,{marginWidth:r,borderWidth:f,paddingWidth:m,scrollbarWidth:y,contentWidth:a,marginHeight:o,borderHeight:h,paddingHeight:g,scrollbarHeight:E,contentHeight:c}}finally{n==null?e.removeAttribute("style"):e.setAttribute("style",n)}},"boxsize");return{$cssPixel(e){if(i.logger.assertInstanceOf(e,Number,String)(),typeof e=="number")return e;let n=parseFloat(e);switch(e.replace(/^-?[0-9.]+/,"")){case"":return n;case"px":return n*1;case"in":return n*96;case"pc":return n*96/6;case"pt":return n*96/6/12;case"cm":return n*96/2.54;case"mm":return n*96/2.54/10;case"Q":return n*96/2.54/10/4}let r=this.getAttribute("style");try{return this.style.marginBottom=e,parseFloat(this.$window.getComputedStyle(this).marginBottom)}finally{r==null?this.removeAttribute("style"):this.setAttribute("style",r)}},$offset(e={}){e=Object.assign({relative:!1,margin:!1},e),i.logger.assertInstanceOf(e,Object)();let n=0,s=0;if(!e.margin){let o=this.$window.getComputedStyle(this);n=parseFloat(o.marginLeft),s=parseFloat(o.marginTop)}if(e.relative)return{left:this.offsetLeft-n,top:this.offsetTop-s};let r=this.getBoundingClientRect();return{left:r.left+window.scrollX-document.documentElement.clientLeft-n,top:r.top+window.scrollY-document.documentElement.clientTop-s}},$size(e={}){typeof e=="string"&&(e={"":{scrollbar:!0},client:{padding:!0},inner:{padding:!0,scrollbar:!0},offset:{padding:!0,border:!0},outer:{padding:!0,border:!0,scrollbar:!0},margin:{padding:!0,border:!0,margin:!0,scrollbar:!0}}[e]),i.logger.assertInstanceOf(e,Object)(),e=Object.assign({scroll:!1,margin:!1,border:!1,padding:!1,scrollbar:!1},e);let n=t(this),s=e.scroll?this.scrollWidth:n.contentWidth,r=e.scroll?this.scrollHeight:n.contentHeight;return e.margin&&(s+=n.marginWidth,r+=n.marginHeight),e.border&&(s+=n.borderWidth,r+=n.borderHeight),e.padding&&(s+=n.paddingWidth,r+=n.paddingHeight),e.scrollbar&&!e.scroll&&(s+=n.scrollbarWidth,r+=n.scrollbarHeight),{width:s,height:r}},$width(e={}){if(typeof e=="number"||typeof e=="string"){u.stringIsNaN(e)&&i.logger.error(`options(${e}) is NaN`);let n=this.$cssPixel(e);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let r=t(this);n-=r.borderWidth+r.paddingWidth}return this.style.width=n+"px",n}return this.$size(e).width},$height(e={}){if(typeof e=="number"||typeof e=="string"){u.stringIsNaN(e)&&i.logger.error(`options(${e}) is NaN`);let n=this.$cssPixel(e);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let r=t(this);n-=r.borderHeight+r.paddingHeight}return this.style.height=n+"px",n}return this.$size(e).height},$scrollParent(e={height:!0,width:!0}){return i.logger.assertInstanceOf(e,Object)(),e.height&&this.scrollHeight>this.clientHeight?this:e.width&&this.scrollWidth>this.clientWidth?this:this.parentElement?.$scrollParent(e)??null}}}(),[[DOMRectReadOnly.name]]:{$contains(t){if(t instanceof DOMPointReadOnly)return this.left<=t.x&&t.x<=this.right&&this.top<=t.y&&t.y<=this.bottom;if(t instanceof DOMRectReadOnly)return this.$contains(new DOMPoint(t.left,t.top))&&this.$contains(new DOMPoint(t.right,t.top))&&this.$contains(new DOMPoint(t.left,t.bottom))&&this.$contains(new DOMPoint(t.right,t.bottom));throw new Error(`Unknown type(${t.constructor.name})`)},$intersects(t){if(t instanceof DOMPointReadOnly)return this.left<=t.x&&t.x<=this.right&&this.top<=t.y&&t.y<=this.bottom;if(t instanceof DOMRectReadOnly)return this.$intersects(new DOMPoint(t.left,t.top))||this.$intersects(new DOMPoint(t.right,t.top))||this.$intersects(new DOMPoint(t.left,t.bottom))||this.$intersects(new DOMPoint(t.right,t.bottom));throw new Error(`Unknown type(${t.constructor.name})`)}}}}d(ue,"dimensions");function de(i){return{[[Element.name,v.name]]:function(){let t=d(function(r){return typeof r[0]=="number"&&(r[1]??={},r[1].duration=r[0],r[0]=r[1]),Object.assign({initial:{},reset:!0},r[0])},"handleArguments"),e=new T,n=new T,s=new j;return s.addEventListener("alarm",function(){for(let[r,o]of n.entries())r.style.setProperty("will-change",o);n.clear()}),{$willChange(r,o=1e3){i.logger.assertInstanceOf(r,String,Array)(),i.logger.assertInstanceOf(o,Number)(),r=r instanceof Array?r:[r];let l=this.style.getPropertyValue("will-change");return n.getOrSet(this,()=>l),l&&r.push(l),this.style.setProperty("will-change",[...new Set(r)].join(",")),s.restart(o,1),this},async $transition(r,o){i.logger.assertInstanceOf(r,Object)(),i.logger.assertInstanceOf(o,p,Object)(),o=Object.assign({initial:{},reset:!1,duration:400,timing:"ease"},o);let l=e.getOrSet(this,()=>({count:0,style:this.getAttribute("style"),transitionValue:this.style.getPropertyValue("transition")??"",transitionPriority:this.style.getPropertyPriority("transition")??""}));l.count++;for(let[b,w]of Object.entries(o.initial))this.style.setProperty(b,w,"important");this.getClientRects();let a=(this.style.getPropertyValue("transition")??"").split(",").filter(b=>b);for(let[b,w]of Object.entries(r))this.style.setProperty(b,w,"important"),a.push(`${b} ${o.duration}ms ${o.timing}`);this.style.setProperty("transition",a.join(","),"important");let c,f,h=new $((b,w)=>{c=b,f=w}),m=d(()=>{this.removeEventListener("transitionend",O);let b=e.get(this);if(--b.count===0)if(e.delete(this),o.reset)this.setAttribute("style",b.style);else{this.style.setProperty("transition",b.transitionValue,b.transitionPriority);for(let[w,y]of Object.entries(r))this.style.setProperty(w,y,"")}},"complete"),g=new Set(Object.keys(r)),O=d(b=>{g.delete(b.propertyName),g.size===0&&(clearTimeout(I),m(),c(!0))},"listener"),I=setTimeout(function(){m(),c(!1)},o.duration+32);return this.addEventListener("transitionend",O),h},async $fadeIn(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{opacity:0}),this.$transition({opacity:a.opacity},l)},async $fadeOut(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{opacity:a.opacity}),this.$transition({opacity:0},l)},async $slideDown(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0}),this.$transition({height:parseFloat(a.height),"margin-top":parseFloat(a.marginTop),"margin-bottom":parseFloat(a.marginBottom),"padding-top":parseFloat(a.paddingTop),"padding-bottom":parseFloat(a.paddingBottom)},l)},async $slideUp(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",height:parseFloat(a.height),"margin-top":parseFloat(a.marginTop),"margin-bottom":parseFloat(a.marginBottom),"padding-top":parseFloat(a.paddingTop),"padding-bottom":parseFloat(a.paddingBottom)}),this.$transition({height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0},l)},async $slideRight(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0,"max-height":parseFloat(a.height)}),this.$transition({width:parseFloat(a.width),"margin-left":parseFloat(a.marginLeft),"margin-right":parseFloat(a.marginRight),"padding-left":parseFloat(a.paddingLeft),"padding-right":parseFloat(a.paddingRight)},l)},async $slideLeft(r=400,o={}){let l=t(arguments),a=this.$window.getComputedStyle(this);return l.initial=Object.assign(l.initial,{overflow:"hidden",width:parseFloat(a.width),"margin-left":parseFloat(a.marginLeft),"margin-right":parseFloat(a.marginRight),"padding-left":parseFloat(a.paddingLeft),"padding-right":parseFloat(a.paddingRight),"max-height":parseFloat(a.height)}),this.$transition({width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0},l)}}}()}}d(de,"effects");function fe(i){let t=d(function(e,n){let s=new Date(+e-e.getTimezoneOffset()*6e4);if(n==="notz")return s.toISOString().slice(0,-1);if(n==="full"){let r=e.getTimezoneOffset(),o=Math.abs(r),l=r>0?"-":"+",a=Math.trunc(o/60),c=o%60,f=`${l}${(""+a).padStart(2,"0")}:${(""+c).padStart(2,"0")}`;return s.toISOString().slice(0,-1)+f}if(n==="week"){let a=new Date(Math.trunc((+s+2592e5)/6048e5)*6048e5),c=a.getUTCFullYear(),f=Math.trunc((a-new Date(`${c}-01-01T00:00:00Z`))/6048e5)+1,h=(s.getUTCDay()+6)%7+1;return`${c}-W${(""+f).padStart(2,"0")}-${h}`}},"toLocalISOString");return{[[FormData.name]]:{$appendFromEntries(e){for(let[n,s]of u.objectToEntries(e))this.append(n,s);return this},$toSearchParams(){let e=new URLSearchParams(this);for(let[n,s]of u.objectToEntries(this))s instanceof Blob&&(i.logger.info(`Unset ${n} because file`),e.set(n,""));return e},$toObject(){let e={},n=u.objectToEntries(this).map(([s,r])=>{let o=s.split(/\]\[|\[|\]/);o.length>1&&o.pop();let l=[];for(let[a,c]of o.entries()){if(!c.length){let f=l.join("[@]");e[f]??=0,o[a]=e[f]++}l.push(c)}return[o,r]});return u.entriesToObject(n,!1)},async $json(e="base64"){let n=await u.objectWalkRecursive(this.$toObject(),async function(s){return s instanceof Blob&&(s=function(){if(e==="text")return s.$text();if(e==="base64")return s.$base64();if(typeof e=="function")return e(s);throw new Error(`Unknown convert(${e})`)}()),s});return JSON.stringify(n)}},[[HTMLInputElement.name,v.name]]:{get $valueAsDate(){if(!this.value)return null;if(this.type==="datetime-local")return new Date(this.value);if("valueAsDate"in this)return new Date(this.valueAsDate.getTime()+this.valueAsDate.getTimezoneOffset()*6e4)},set $valueAsDate(e){if(e!=null){if(!(e instanceof Date)){this.valueAsDate=e;return}if(this.type==="datetime-local"){let n=t(e,"notz");this.value!==""?this.value=n.slice(0,this.value.length):this.step?this.step.includes(".")?this.value=n.slice(0,23):this.value=n.slice(0,19):this.value=n.slice(0,16);return}if(this.type==="month")return this.value=t(e,"notz").slice(0,7);if(this.type==="week")return this.value=t(e,"week").slice(0,8);if(this.type==="date")return this.value=t(e,"notz").slice(0,10);if(this.type==="time"){let n=t(e,"notz");this.value!==""?this.value=n.slice(11,11+this.value.length):this.step?this.step.includes(".")?this.value=n.slice(11,23):this.value=n.slice(11,19):this.value=n.slice(11,16)}}},get $valueAsNumber(){return this.value?["datetime-local","month","week","date","time"].includes(this.type)?this.$valueAsDate.getTime():"valueAsNumber"in this?this.valueAsNumber:Number.NaN:Number.NaN},set $valueAsNumber(e){if(!(isNaN(e)||e==null)){if(["datetime-local","month","week","date","time"].includes(this.type))return this.$valueAsDate=new Date(+e);"valueAsNumber"in this&&(this.valueAsNumber=e)}}},[[HTMLInputElement.name,RadioNodeList.name,v.name]]:{get $indeterminate(){if(this instanceof RadioNodeList)return this.value==="";if(this.type==="checkbox")return this.indeterminate},set $indeterminate(e){if(i.logger.assertInstanceOf(e,Boolean,Array)(),this instanceof RadioNodeList){e||i.logger.error("RadioNodeList's $indeterminate is readonly"),this.forEach(n=>n.checked=!1);return}if(this.type==="checkbox"){if(!(e instanceof Array)){this.indeterminate=e;return}e=e.filter(n=>n!=null),e.length===0?this.indeterminate=!1:e.every(n=>!n)?(this.indeterminate=!1,this.checked=!1):e.every(n=>n)?(this.indeterminate=!1,this.checked=!0):this.indeterminate=!0}}},[[HTMLInputElement.name,HTMLTextAreaElement.name,HTMLSelectElement.name,v.name]]:{get $defaultValue(){if(["select-one"].includes(this.type))return Array.prototype.find.call(this.options,e=>e.defaultSelected)?.value??null;if(["select-multiple"].includes(this.type))return[...this.options].filter(e=>e.defaultSelected).map(e=>e.value);if(["radio","checkbox"].includes(this.type))return this.defaultChecked?this.value:null;if(["file"].includes(this.type))return this.multiple?[]:null;if(this.type)return this.defaultValue},set $defaultValue(e){if(["select-one"].includes(this.type)){e=""+e;for(let n of this.options)n.defaultSelected=n.value===e}else if(["select-multiple"].includes(this.type)){let n=(e instanceof Array?e:[e]).map(s=>""+s);for(let s of this.options)s.defaultSelected=n.includes(s.value)}else["radio","checkbox"].includes(this.type)?this.defaultChecked=this.value===e:["file"].includes(this.type)||this.type&&(this.defaultValue=e)},get $value(){if(["select-one"].includes(this.type))return Array.prototype.find.call(this.options,e=>e.selected)?.value??null;if(["select-multiple"].includes(this.type))return[...this.options].filter(e=>e.selected).map(e=>e.value);if(["radio","checkbox"].includes(this.type))return this.checked?this.value:null;if(["file"].includes(this.type))return this.multiple?this.files:this.files[0]??null;if(this.type)return this.value},set $value(e){if(["select-one"].includes(this.type))this.value=e;else if(["select-multiple"].includes(this.type)){let n=(e instanceof Array?e:[e]).map(s=>""+s);for(let s of this.options)s.selected=n.includes(s.value)}else if(["radio","checkbox"].includes(this.type))this.checked=this.value===e;else if(["file"].includes(this.type))if(e instanceof File){let n=new DataTransfer;n.items.add(e),this.files=n.files}else e instanceof FileList&&(this.files=e);else this.type&&(this.value=e)},$clear(){return["select-one","select-multiple"].includes(this.type)?this.value=null:["radio","checkbox"].includes(this.type)?this.checked=!1:["file"].includes(this.type)?this.files=new DataTransfer().files:this.type&&(this.value=""),this},$resetAttribute(){return["select-one","select-multiple"].includes(this.type)?Array.from(this.options).forEach(e=>e.toggleAttribute("selected",e.selected)):this.type==="textarea"?this.textContent=this.value:["radio","checkbox"].includes(this.type)?this.toggleAttribute("checked",this.checked):this.setAttribute("value",this.value),this}},[[HTMLSelectElement.name,HTMLDataListElement.name,v.name]]:{$options(e,n=void 0){n??=this instanceof HTMLSelectElement?"append":null,i.logger.assertInstanceOf(n,p,Boolean,String)(),this.$willChange("scroll-position");let s={top:this.scrollTop,left:this.scrollLeft},r=d(()=>{this.scrollTop=s.top,this.scrollLeft=s.left},"recover"),o=d(a=>{let c=[];for(let[f,h]of u.objectToEntries(a))h instanceof Array?c.push(this.$document.$createElement("optgroup",{label:f},...h)):u.objectIsPlain(h)?c.push(this.$document.$createElement("optgroup",{label:f},...o(h))):c.push(this.$document.$createElement("option",{value:f,title:h},h));return c},"build");u.objectIsPlain(e)&&(e=o(e));let l=n?this.$value:null;if(n&&typeof n=="string"){let a=(l instanceof Array?l:[l]).filter(f=>f!=null).map(f=>""+f);this.$$("option").$except(f=>a.includes(f.value)).forEach(f=>f.remove()),this.$$("optgroup").$except(f=>f.$contains("option")).forEach(f=>f.remove()),this.$$("hr.kQuery-option-separator").forEach(f=>f.remove());for(let f of this.$$("optgroup")){let h=f.$nextElements(`optgroup[label="${u.stringEscape(f.label??"","selector")}"]`);for(let m of[...h])f[n](...m.$$("option")),m.$contains("option")||m.remove()}this[n](this.$document.$createElement("hr",{class:"kQuery-option-separator"})),this[n](...e);let c=d(function(f){return f.filter(h=>h instanceof HTMLOptionElement&&a.includes(h.value)||h instanceof HTMLOptGroupElement&&!c([...h.$$("option")]).length?(h.remove(),!1):!0)},"filter");c(e)}else this.$replaceChildren(...e);return n&&(this.$value=l),requestAnimationFrame(()=>requestAnimationFrame(r)),this}},[[HTMLFormElement.name,v.name]]:{$resetAttribute(){return this.elements.$resetAttribute(),this}}}}d(fe,"forms");function he(i){return{[[Window.name]]:{$query(t,e=null){if(e??=(this??globalThis).document,t instanceof Node||t instanceof NodeList)return t;if(t instanceof HTMLCollection)return u.iterableToNodeList(t);if(t instanceof Array){let s=t.map(o=>e.defaultView.$query(o,e)),r=[...new Set(s.flatMap(o=>o instanceof Node?[o]:[...o]))];return r.length===1?r[0]:u.iterableToNodeList(r)}if(typeof t=="string"&&t.trim().charAt(0)==="<"){let s=e.$createNodeListFromHTML(t.trim());return s.length===1?s[0]:s}let n=e.$$(t);return n.length===1?n[0]:n}},[[Document.name]]:{$createNodeListFromHTML(t){i.logger.assertInstanceOf(t,String)();let e=this.createElement("template");return e.innerHTML=t,u.iterableToNodeList([...e.content.childNodes])},$createElement(t,e={},...n){i.logger.assertInstanceOf(t,String)(),i.logger.assertInstanceOf(e,Object)(),e.class=u.objectToClasses(e.class??[]),t=t.replaceAll(/\#([-_0-9a-z]+)/ig,function(r,o){return e.id=o,""}),t=t.replaceAll(/\.([-_0-9a-z]+)/ig,function(r,o){return e.class[o]=!0,""}),t=t.replaceAll(/\[([-_0-9a-z]+)(=(.+?))?\]/ig,function(r,o,l,a){return e[o]=a??"",""});let s=this.createElement(t);for(let[r,o]of Object.entries(u.objectToAttributes(e)))typeof o=="boolean"?s.toggleAttribute(r,o):s.setAttribute(r,o);return s.$append(...n),s}},[[HTMLTemplateElement.name,v.name]]:function(){let t=new T;class e{static{d(this,"Value")}constructor(s){this.value=s}toString(){return""+this.value}}return{$render(n,s={}){s=Object.assign({escape:"html",logical:"---logical<false/>---",insert:"after"},s);let r=d(function(a){if(s.logical){if(a===!1)return s.logical;if(a===!0)return""}return typeof a=="object"&&!(a instanceof e)?a:typeof s.escape=="function"?s.escape(a):u.stringEscape(a,s.escape)},"tag"),o=d(function(a,c){if(!a)return[];a instanceof Array||(a=[a]);let f=[];for(let[h,m]of a.entries()){let g=this.content.cloneNode(!0);u.anyIsPrimitive(m)&&(m=new e(m)),Object.assign(m,{$parent:c,$index:h,$length:a.length,$first:h===0,$last:h===a.length-1});let O=g.$$("template[data-slot-name]");for(let y of O)y.after(...o.call(y,m[y.dataset.slotName],m)),y.remove();i.logger.assert(()=>g.$contains(y=>!y.$isMetadataContent))();let I=[...g.childNodes].join(""),b=u.stringRender(I,m,r),w=this.$document.$createNodeListFromHTML(b);if(s.logical)for(let y of w.$$$("*"))for(let E of Array.from(y.attributes))E.value===s.logical&&y.attributes.removeNamedItem(E.name);f.push(...w)}return f},"core"),l=o.call(this,n,null);return s.insert&&((t.reset(this,()=>l)??[]).forEach(c=>c.remove()),this[s.insert](...l)),u.iterableToNodeList(l)}}}(),[[Node.name,v.name]]:function(){let t=d(function(e){return[...e].flatMap(n=>n instanceof NodeList?[...n]:n)},"normalizeNodes");return{$clone(e=!1){if(!e)return this.cloneNode(!0);let n=this.cloneNode(!1);for(let s of this.$events(null,!1,!1))n.$on(s.type+s.namespaces.map(r=>`.${r}`).join(),s.selector,s.listener,s.options);for(let s of this.childNodes)s instanceof Element?n.appendChild(s.$clone(!0)):n.appendChild(s.cloneNode(!0));return n},$before(...e){return this.before(...t(e)),this},$prepend(...e){return this.prepend(...t(e)),this},$insert(e,...n){return this.$childElement(e)?.$before?.(...t(n)),this},$append(...e){return this.append(...t(e)),this},$after(...e){return this.after(...t(e)),this},$replace(...e){return this.replaceWith(...t(e)),this},$replaceChild(e,...n){return this.$insert(e,...n),this.$childElement(e)?.remove(),this},$replaceChildren(...e){return this.replaceChildren(...t(e)),this},$wrap(e){return this.parentNode.insertBefore(e,this),e.appendChild(this),this},$unwrap(){return this.parentNode.$unwrapChildren(),this},$unwrapChildren(){return this.replaceWith(...this.childNodes),this}}}()}}d(he,"manipulation");function me(i){return{[[Window.name]]:{$open(t){i.logger.assertInstanceOf(t,Object)(),t=Object.assign({url:void 0,target:void 0,window:!0,left:"auto",top:"auto",width:"auto",height:"auto",noopener:void 0,noreferrer:void 0},t),t.width==="auto"&&(t.width=this.outerWidth/2),t.height==="auto"&&(t.height=this.outerHeight/2),t.left==="auto"&&t.width&&(t.left=(this.outerWidth-t.width)/2),t.top==="auto"&&t.height&&(t.top=(this.outerHeight-t.height)/2),t.window&&t.left!=null&&(t.left+=this.screenX),t.window&&t.top!=null&&(t.top+=this.screenY);let e=t.url,n=t.target;u.objectWalkRecursive(t,function(r,o){if(!(["url","target","window"].includes(o)||r===!1))return r});let s=u.objectJoin(t,",");return i.logger.debug("windowFeature",s),this.open(e,n,s)}},[[Element.name,v.name]]:function(){let t=!1;return{get $isMetadataContent(){return["base","link","meta","noscript","script","style","template","title"].includes(this.localName.toLowerCase())},$outerTag(e=!0){let n=this.localName,s=""+this.$attrs,r=`<${n}${s?" "+s:""}>`;return e&&(r+=`</${n}>`),r},$markText(e,n,s){i.logger.assertInstanceOf(e,String,RegExp)(),i.logger.assertInstanceOf(n,p,String,Element)(),e instanceof RegExp||(e=new RegExp(u.stringEscape(e,"regex"))),n instanceof Element||(n=this.$document.$createElement(n??"mark"));let r=d(o=>{for(let l of o.children)l.$isMetadataContent||s!=null&&l.$matches(s)||l.$outerTag(!1)===n.$outerTag(!1)||r(l);for(let l of o.childNodes)if(l instanceof CharacterData){let a=l.nodeValue.match(e);if(a){let c=l.splitText(a.index);c.splitText(a[0].length),c.$wrap(n.$clone(!0))}}return o},"core");return this.normalize(),r(this)},async $scrollIntoView(e={}){return i.logger.assertInstanceOf(e,Object)(),e=Object.assign({behavior:void 0,block:void 0,inline:void 0,global:!0,timeout:void 0,threshold:void 0,ifNeeded:!1},e),e.global&&t?$.resolve(!1):new $((n,s)=>{let r=new C((l,a)=>{if(!a&&l.isIntersecting&&e.ifNeeded){n(!1),r.unobserve(l.target);return}l.target.scrollIntoView(e),t=!0,l.isIntersecting&&(o?.stop(),r.unobserve(l.target),t=!1,n(!0))},{threshold:e.threshold??0}),o=e.timeout?new j:null;o?.addEventListener("alarm",l=>{r.unobserve(this),t=!1,s(this)}),o?.start(e.timeout),r.observe(this)})}}}(),[[HTMLDialogElement.name,v.name]]:{$showModal(t={}){return i.logger.assertInstanceOf(t,Object)(),t=Object.assign({outside:!1,escape:!0},t),new $((e,n)=>{let s=d(a=>{a.target.removeEventListener("close",s),a.target.removeEventListener("cancel",r),a.target.removeEventListener("click",o),a.target.removeEventListener("keydown",l),e(a.target.returnValue)},"close"),r=d(a=>{a.target.removeEventListener("close",s),a.target.removeEventListener("cancel",r),a.target.removeEventListener("click",o),a.target.removeEventListener("keydown",l),e(null)},"cancel"),o=d(a=>{this.getBoundingClientRect().$contains(new DOMPointReadOnly(a.clientX,a.clientY))||(this.close(null),this.dispatchEvent(new Event("cancel",{bubbles:!1,cancelable:!0,composed:!1})))},"onOutside"),l=d(a=>{a.code==="Escape"&&a.preventDefault()},"onEscape");this.returnValue="",this.showModal(),this.addEventListener("close",s,{once:!0}),this.addEventListener("cancel",r,{once:!0}),t.outside&&this.addEventListener("click",o),t.escape||this.addEventListener("keydown",l)})}},[[HTMLCollection.name,NodeList.name,FileList.name,DataTransferItemList.name]]:{$at(t){return i.logger.assertInstanceOf(t,Number)(),Array.prototype.at.call(this,t)},async $asyncMap(t){return i.logger.assertInstanceOf(t,Function)(),$.all(u.objectToEntries(this).map(([e,n])=>t(n,e,this)))}}}}d(me,"miscellaneous");function ge(i){return{[[HTMLAnchorElement.name,v.name]]:{$submit(t={}){i.logger.assertInstanceOf(t,Object)(),t=Object.assign({async:!1,form:void 0,method:void 0,enctype:"application/x-www-form-urlencoded",novalidate:!1,data:{}},t),i.logger.assertInstanceOf(t.data,Object,FormData)();let e=this.$URL,n=new FormData;n.$appendFromEntries(e.searchParams),n.$appendFromEntries(t.data),e.search="";let s=t.form??this.$document.$createElement("form",{action:e,method:t.method??"post",enctype:t.enctype,target:this.target,hidden:!0}),r;if(t.form)r=this.$document.$createElement("button",{type:"submit",formaction:e,formtarget:this.target,formmethod:t.method??s.getAttribute("method")??"post",formenctype:t.enctype,formnovalidate:t.novalidate}),s.append(r);else for(let[o,l]of n){let a=this.$document.$createElement("input",{type:"hidden"});a.name=o,a.value=l,s.append(a)}if(t.async||this.download){let o={};r&&(o.data=n,o.submitter=r);try{let l=s.$request(o);return r?.remove(),this.download&&this.download&&!t.raw?l.then(a=>{if(!a.ok)throw new a;a.blob().then(c=>{let f=URL.createObjectURL(c),h=this.$document.$createElement("a",{href:f,download:this.download,hidden:!0});try{this.$document.body.appendChild(h),h.click()}finally{this.$document.body.removeChild(h),setTimeout(()=>URL.revokeObjectURL(f),1e3)}})}):l}finally{r?.remove()}}return r?(s.requestSubmit(r),r.remove()):(this.$document.body.append(s),s.submit(),s.remove()),this}},[[HTMLFormElement.name,v.name]]:{async $request(t={}){if(i.logger.assertInstanceOf(t,Object)(),t=Object.assign({url:void 0,method:void 0,enctype:void 0,novalidate:void 0,submitter:void 0,data:{},fileConverter:void 0,ok:!1,timeout:0},t),t.headers instanceof Headers||(t.headers=new Headers(t.headers??{})),i.logger.assertInstanceOf(t.headers,Headers)(),i.logger.assertInstanceOf(t.data,Object,FormData)(),!(t.novalidate??(t.submitter?.formNoValidate||this.noValidate||!1))&&!this.reportValidity())throw new Error("Invalid form");let n=t.url??t.submitter?.getAttribute("formaction")??this.getAttribute("action")??"",s=t.method??t.submitter?.getAttribute("formmethod")??this.getAttribute("method")??"GET",r=t.enctype??t.headers.get("content-type")??t.submitter?.getAttribute("formenctype")??this.getAttribute("enctype")??"application/x-www-form-urlencoded";t.method=s.toUpperCase(),t.headers.set("content-type",r);let o=new URL(n,this.baseURI),l=new FormData(this,t.submitter);for(let[a,c]of u.objectToEntries(t.data))l.append(a,c);if(t.method==="GET")for(let[a,c]of l.$toSearchParams())o.searchParams.append(a,c);else if(r.startsWith("application/x-www-form-urlencoded"))t.headers.delete("content-type"),t.body=l.$toSearchParams();else if(r.startsWith("multipart/form-data"))t.headers.delete("content-type"),t.body=l;else if(r.startsWith("application/json"))t.body=await l.$json(t.fileConverter);else throw new Error(`Unknown enctype(${r})`);return await u.fetch(o,t)}},[[Element.name,v.name]]:{async $load(t,e={}){u.anyIsStringable(t)?e.url=t:e=t,i.logger.assertInstanceOf(e,Object)(),e=Object.assign({url:void 0,method:void 0,data:{},ok:!1,timeout:0},e),e.headers instanceof Headers||(e.headers=new Headers(e.headers??{})),i.logger.assertInstanceOf(e.url,String)(),i.logger.assertInstanceOf(e.headers,Headers)(),i.logger.assertInstanceOf(e.data,Object,FormData)();let n=e.url.split(" "),s=new URL(n.shift(),this.baseURI),r=n.join(" "),o=(e.method??"GET").toUpperCase(),l=u.objectToEntries(e.data).map(([f,h])=>[f,h instanceof Function?h(this):h]);if(o==="GET")for(let[f,h]of l)s.searchParams.append(f,h);else e.headers.delete("content-type"),e.body=new URLSearchParams(l);let a=await u.fetch(s,e),c=this.$document.$createNodeListFromHTML(await a.text());return r&&(c=c.$$(r)),this.$replaceChildren(c),c}},[[Blob.name,V.name]]:{async $upload(t,e={}){let n;u.anyIsStringable(t)?n=t:n=e.url,i.logger.assertInstanceOf(e,Object)(),e=Object.assign({method:"PUT",timeout:0,ok:!1,headers:{},credentials:"same-origin",progress:d(()=>null,"progress")},e);let s=new XMLHttpRequest;s.open(e.method.toUpperCase(),n,!0),s.timeout=e.timeout,s.withCredentials=e.credentials!=="omit",s.responseType="arraybuffer";for(let[o,l]of u.objectToEntries(e.headers))s.setRequestHeader(o,l);let r=new $((o,l)=>{let a=d(function(){let c=new Response(s.response,{status:s.status,statusText:s.statusText,headers:s.getAllResponseHeaders().split(/\r\n?/).reduce(function(f,h){if(h.trim()){let[m,g]=h.split(":");f.append(m.trim(),g.trim())}return f},new Headers)});return Object.defineProperties(c,{url:{get(){return s.responseURL}}})},"newResponse");s.addEventListener("readystatechange",function(){s.readyState===XMLHttpRequest.HEADERS_RECEIVED&&!e.ok&&!(200<=s.status&&s.status<300)&&l(new Error(`${s.status}: ${s.statusText}`,{cause:a()}))}),s.addEventListener("load",function(){o(a())}),s.addEventListener("error",function(c){l(c)}),s.addEventListener("abort",function(c){l(c)}),s.addEventListener("timeout",function(c){l(c)}),s.upload.addEventListener("progress",function(c){e.progress(c)})});if(e.method.toUpperCase()==="POST"){let o=new FormData;o.append(e.name??"tmp",this),s.send(o)}else s.send(this);return r}}}}d(ge,"networks");function pe(i){return{[[Document.name,DocumentFragment.name,Element.name]]:{$(t){return i.logger.assertInstanceOf(t,String,Function)(),typeof t=="function"?Array.prototype.find.call(this.$$("*"),t)??null:this.querySelector(t)},$$(t){return i.logger.assertInstanceOf(t,String,Function)(),typeof t=="function"?u.iterableToNodeList([...this.$$("*")].filter(t)):this.querySelectorAll(t)},$$$(t){i.logger.assertInstanceOf(t,String,Function)();let e=this.$matches(t)?[this]:[];return typeof t=="function"?u.iterableToNodeList([...e,...[...this.$$("*")].filter(t)]):u.iterableToNodeList([...e,...this.$$(t)])},$contains(t){return i.logger.assertInstanceOf(t,String,Node,Function)(),t instanceof Node?this.contains(t):typeof t=="string"?!!(this.matches(t)||this.querySelector(t)):this.$$$(t).length>0},$matches(t){return i.logger.assertInstanceOf(t,String,Node,Function)(),typeof t=="function"?!!t.call(this,this):t instanceof Node?this===t:this.matches(t)}},[[NodeList.name]]:{$(t){i.logger.assertInstanceOf(t,String,Function)();for(let e of this){let n=e.$?.(t);if(n)return n}return null},$$(t){return i.logger.assertInstanceOf(t,String,Function)(),u.iterableToNodeList(new Set([...this].flatMap(e=>[...e.$$?.(t)??[]])))},$$$(t){return i.logger.assertInstanceOf(t,String,Function)(),u.iterableToNodeList(new Set([...this].flatMap(e=>[...e.$$$?.(t)??[]])))},$contains(t){return i.logger.assertInstanceOf(t,String,Element,Function)(),!!Array.prototype.find.call(this,e=>e.$contains?.(t))},$matches(t){return i.logger.assertInstanceOf(t,String,Element,Function)(),Array.prototype.find.call(this,e=>e.$matches?.(t))},$index(t){i.logger.assertInstanceOf(t,String,Node,Function)();let e=Array.prototype.findIndex.call(this,n=>n.$matches?.(t)??!1);return e===-1?null:e},$filter(t){return i.logger.assertInstanceOf(t,String,Function)(),u.iterableToNodeList([...this].filter(e=>e.$matches?.(t)??!1))},$except(t){return i.logger.assertInstanceOf(t,String,Function)(),u.iterableToNodeList([...this].filter(e=>!(e.$matches?.(t)??!0)))},$slice(t,e){return i.logger.assertInstanceOf(t,p,Number,String,Node,Function)(),i.logger.assertInstanceOf(e,p,Number,String,Node,Function)(),t!=null&&typeof t!="number"&&(t=this.$index(t)??void 0),e!=null&&typeof e!="number"&&(e=this.$index(e)??void 0),u.iterableToNodeList(Array.prototype.slice.call(this,t,e))}},[[Node.name,v.name]]:function(){let t=d(function*(e,n,s){i.logger.assertInstanceOf(e,Node)();for(let r=e[s];r;r=r[s])(n==null||r.$matches(n))&&(yield r)},"nodeGenerateSiblings");return{get $window(){return this.ownerDocument?.defaultView??window},get $document(){return this.ownerDocument??window.document},$textNodes(e=[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE]){i.logger.assertElementsOf(e,[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE,"metadata"])();let n=[];for(let s of this.childNodes)s instanceof CharacterData?e.includes(s.nodeType)&&n.push(s):(e.includes("metadata")||!s.$isMetadataContent)&&n.push(...s.$textNodes(e));return u.iterableToNodeList(n)},$closest(e){if(i.logger.assertInstanceOf(e,String,Element,Function)(),typeof e=="string")return this.closest(e);for(let n=this;n!=null;n=n.parentElement)if(n.$matches(e))return n;return null},$parents(e){i.logger.assertInstanceOf(e,p,String,Function)();let n=[];for(let s=this.parentElement;s!=null;s=s.parentElement)(e==null||s.$matches(e))&&n.push(s);return u.iterableToNodeList(n)},$childElement(e){if(i.logger.assertInstanceOf(e,p,Number,String,Element,Function)(),typeof e=="number")return this.children.$at(e);for(let n of this.children)if(e==null||n.$matches(e))return n;return null},$childElements(e){i.logger.assertInstanceOf(e,p,String,Function)();let n=u.iterableToNodeList(this.children);return e==null?n:n.$filter(e)},$prevElement(e){return i.logger.assertInstanceOf(e,p,String,Function)(),t(this,e,"previousElementSibling").next().value??null},$prevElements(e){return i.logger.assertInstanceOf(e,p,String,Function)(),u.iterableToNodeList([...t(this,e,"previousElementSibling")].reverse())},$nextElement(e){return i.logger.assertInstanceOf(e,p,String,Function)(),t(this,e,"nextElementSibling").next().value??null},$nextElements(e){return i.logger.assertInstanceOf(e,p,String,Function)(),u.iterableToNodeList(t(this,e,"nextElementSibling"))},$siblingElements(e){return i.logger.assertInstanceOf(e,p,String,Node,Function)(),u.iterableToNodeList([...this.parentNode.children].filter(n=>n!==this&&(e==null||n.$matches?.(e))))}}}(),[[HTMLInputElement.name,v.name]]:{get $radioNodeList(){if(this.type!=="radio"||!this.form)return;let t=this.form,e=this.name,n=t.elements[e];if(n instanceof RadioNodeList)return n;let s=this.$document.$createElement("input",{type:"radio",name:e,hidden:!0});this.insertAdjacentElement("afterend",s);try{return t.elements[e]}finally{s.remove()}}}}}d(pe,"traversing");var S=new ee(document.currentScript);S.logger.time("register Plugins");S.extends(oe);S.extends(ae);S.extends(le);S.extends(ce);S.extends(fe);S.extends(pe);S.extends(he);S.extends(ue);S.extends(de);S.extends(ge);S.extends(me);S.logger.timeEnd("register Plugins");Object.assign(S.customEvents,{attribute:q,child:_,cookie:K,disable:G,flick:X,intersect:Y,resize:J,swipe:Z,visible:Q});var fn=S;})();
/**!
 * kQuery
 *
 * @file
 * @license MIT
 * @copyright ryunosuke
 * @ignore
 */
//# sourceMappingURL=kQuery-full.min.js.map
