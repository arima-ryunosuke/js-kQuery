(()=>{var oe=Object.defineProperty;var h=(o,r)=>oe(o,"name",{value:r,configurable:!0});var ve=(o,r)=>{for(var e in r)oe(o,e,{get:r[e],enumerable:!0})};var _={};ve(_,{$CSSRuleList:()=>re,$FileList:()=>D,$NodeList:()=>v,AsyncFunction:()=>se,AsyncGeneratorFunction:()=>$e,Collection:()=>z,Configuration:()=>k,CookieObserver:()=>F,CustomEvent:()=>U,F:()=>d,FileReader:()=>B,GeneratorFunction:()=>ye,IntersectionObserver:()=>R,Logger:()=>x,MutationObserver:()=>N,Nullable:()=>p,ObjectStorage:()=>C,Options:()=>V,Promise:()=>E,Proxy:()=>j,ResizeObserver:()=>P,Timer:()=>A,TimerObserver:()=>q,Vector2:()=>H,WeakMap:()=>$});var L=globalThis,p=h(function(){},"Nullable"),se=(async()=>{}).constructor,ye=function*(){}.constructor,$e=async function*(){}.constructor,v=h(function(){return[NodeList.name,HTMLCollection.name]},"$NodeList"),re=h(function(){return[CSSRuleList.name]},"$CSSRuleList"),D=h(function(){return[FileList.name]},"$FileList"),d={anyIsPrimitive(o,...r){if(o==null)return!0;for(let e of r){if(e===Object){if(d.objectIsPlain(o))return!0;continue}if(o instanceof e)return!0}return!["object","function"].includes(typeof o)},anyIsStringable(o){return d.anyIsPrimitive(o)?!0:o?.toString&&o.toString!==Object.prototype.toString},stringToKebabCase(o){return(""+o).replaceAll(/([A-Z])/g,(...r)=>"-"+r[1].toLowerCase())},stringToPascalCase(o,r){r??="-";let e=new RegExp(`(\\${r}([a-z]))`,"ig");return(""+o).replaceAll(e,(...t)=>t[2].toUpperCase())},stringEscape(o,r){let e={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"};switch(o+="",r){default:throw new Error(`${r} is undefied`);case"attr-name":{let t=document.createElement("div");return t.setAttribute(o,""),t.attributes[0].name}case"attr-value":return o.replace(/[&"]/g,t=>e[t]);case"content":return o.replace(/[&<>]/g,t=>e[t]);case"html":return o.replace(/[&"'<>]/g,t=>e[t]);case"regex":return o.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");case"css":case"selector":return CSS.escape(o)}},stringQuote(o,r){switch(o+="",r){default:throw new Error(`${r} is undefied`);case"css-url":return o.includes('"')?o.includes("'")?o.replaceAll(/([ '"()])/g,"\\$1"):"'"+o+"'":'"'+o+'"'}},stringUnquote(o,r){switch(o+="",r){default:throw new Error(`${r} is undefied`);case"css-url":return o.at(0)==='"'&&o.at(-1)==='"'?o.slice(1,-1):o.at(0)==="'"&&o.at(-1)==="'"?o.slice(1,-1).replaceAll(/\\'/g,"'"):o.replaceAll(/\\([ '"()])/g,"$1")}},stringIsNaN(o){return Number.isNaN(parseFloat(o))},stringRender:function(){let o={};return function(r,e,t=null){let s=h((a,...l)=>l.map(c=>t==null||c instanceof String?c:t(c)).map((c,u)=>a[u]+c).concat(a.slice(l.length)).join(""),"tagFunction"),n=`${t}\`${r}\``,i=o[n]??=new Function("",`return globalThis.$__internalTagFunctions.at(-1)\`${r}\`;`);L.$__internalTagFunctions??=[],L.$__internalTagFunctions.push(s);try{return i.call(e)}finally{L.$__internalTagFunctions.pop()}}}(),objectId:function(){let o=new L.WeakMap,r=0;return function(e){return e===null||typeof e!="object"?null:(o.has(e)||o.set(e,++r),o.get(e))}}(),objectFinalize:function(){let o=new FinalizationRegistry(r=>r());return function(r,e){o.register(r,e,r)}}(),objectIsPlain(o){return o==null||typeof o!="object"?!1:o.constructor===Object||o.constructor==null},objectIsArrayLike(o,r=!0){if(o instanceof Array)return!0;if(o==null||typeof o!="object")return!1;let e=Object.keys(o);if(!("length"in o)&&e.length===0)return!1;let t=o.length??(r?null:e.length);if(t==null)return!1;let s=e.indexOf("length");if(s!==-1&&e.splice(s,1),e.length!==+t)return!1;let n=e.map(i=>+i);for(let i=0;i<t;i++)if(n[i]!==i)return!1;return!0},objectToAttributes(o,r=""){let e={};for(let[t,s]of d.objectToEntries(o)){let n=r?`${r}-${t}`:t;if(n.startsWith("data-")&&(n=d.stringToKebabCase(n)),n==="style"&&d.objectIsPlain(s)){let i=[];for(let[a,l]of d.objectToEntries(s))i.push(d.stringToKebabCase(a)+":"+l);i.length&&(e[n]=i.join(";")+";")}else if(n==="class"){let i=[];for(let[a,l]of d.objectToEntries(d.objectToClasses(s)))l&&i.push(a);i.length&&(e[n]=i.join(" "))}else d.objectIsPlain(s)?Object.assign(e,d.objectToAttributes(s,t)):e[n]=s}return e},objectToClasses(o){let r=h(function(t){return(""+t).split(" ").filter(s=>s.length)},"normalizeToken"),e={};if(o instanceof Array)for(let t of o)Object.assign(e,d.objectToClasses(t));else if(d.objectIsPlain(o))for(let[t,s]of d.objectToEntries(o))for(let n of r(t))e[r(n)]=!!s;else for(let t of r(o))e[r(t)]=!0;return e},objectToDataset(o,r=""){let e={};for(let[t,s]of d.objectToEntries(o)){let n=d.stringToKebabCase(r?`${r}-${t}`:t);if(d.objectIsPlain(s)||s instanceof Array){for(let[i,a]of d.objectToEntries(d.objectToDataset(s,n)))e[i]=a;s instanceof Array&&(e[n+"-length"]=s.length)}else e[n]=s}return e},objectToEntries(o){return o instanceof NamedNodeMap?Array.from(o).map(r=>[r.name,r.value]):o instanceof CSSStyleDeclaration?Array.from(o).map(r=>[r,o[r]]):!Object.hasOwn(o,"entries")&&typeof o.entries=="function"?[...o.entries()]:!Object.hasOwn(o,"keys")&&typeof o.keys=="function"?[...Array.from(o.keys()).flatMap(r=>[[r,o[r]]])]:!Object.hasOwn(o,"values")&&typeof o.values=="function"?[...Array.from(o.values()).entries()]:!Object.hasOwn(o,"length")&&"length"in o?[...Array.from(o).entries()]:(Symbol.iterator in o,Object.entries(o))},objectJoin(o,r,e="="){let t=[];for(let[s,n]of d.objectToEntries(o))if(n!==void 0)if(d.objectIsPlain(n)&&(n=d.objectJoin(n,r,e)),e instanceof Function){let i=e(n,s);i&&t.push(i)}else t.push(`${s}${e}${n}`);return t.join(r)},objectWalkRecursive(o,r){let e=r instanceof se,t=[];for(let[s,n]of d.objectToEntries(o)){let i=h(l=>o[s]=l,"assign"),a=n instanceof Array||d.objectIsPlain(n)?d.objectWalkRecursive(n,r):r(n,s,o);e?t.push(a.then(i)):i(a)}return e?E.all(t).then(s=>o):o},iterableToNodeList(o){o instanceof NodeList&&x.instance.notice("meaningless call to iterableToNodeList");let r=0,e={};for(let t of o)e[r++]={value:t,configurable:!1,writable:!1,enumerable:!0};return e.length={value:r,configurable:!1,writable:!1,enumerable:!1},Object.create(NodeList.prototype,e)},arrayLikeToArrayRecursive(o,r=!0){for(let[e,t]of d.objectToEntries(o))typeof t=="object"&&(o[e]=d.arrayLikeToArrayRecursive(t,r));return d.objectIsArrayLike(o,r)&&(r||"length"in o?o=Array.from(o):o=Object.values(o)),o},entriesToObject(o,r){let e={};for(let[t,s]of o)t.reduce((n,i,a)=>n[i]??=a+1 in t?{}:s,e);return r!=null?d.arrayLikeToArrayRecursive(e,r):e},functionIsNative(o){return Function.prototype.toString.call(o).slice(-15,-2)==="[native code]"},functionToCallbackable(o,r,...e){return function(...t){for(let[s,n]of t.entries()){let i=typeof n=="function"?n:null;if(i&&(t[s]=i.call(r,...e),t[s]===void 0))return}return o.call(this,...t)}},async fetch(o,r={}){if(r.timeout){let t=new AbortController;setTimeout(()=>t.abort(),r.timeout),r.signal?r.signal=AbortSignal.any([r.signal,t.signal]):r.signal=t.signal,delete r.timeout}let e=await L.fetch(o,r);if(!(r.ok??!1)&&!e.ok)throw new Error(`${e.status}: ${e.statusText}`,{cause:e});return e}},k=class o{static{h(this,"Configuration")}static TRUES=Object.freeze(["true","yes","1"]);static instance;#e;constructor(r){o.instance=this,this.#e=r}configure(r,e=!1){for(let[t,s]of Object.entries(r)){if(e||this.#e[t]===void 0){this[t]=s;continue}typeof s=="boolean"?this[t]=o.TRUES.includes(this.#e[t]):typeof s=="number"?this[t]=+this.#e[t]:typeof s=="string"?this[t]=""+this.#e[t]:typeof s=="function"?this[t]=s(this.#e[t],t,this.#e):this[t]=JSON.parse(this.#e[t])}return this}},x=class o{static{h(this,"Logger")}static instance;static anyIsInstanceOf(r,e){return!!(r===e||p===e&&r==null||e===Object&&d.objectIsPlain(r)||e!==Object&&typeof e=="function"&&Object(r)instanceof e||e===Boolean&&d.anyIsPrimitive(r)||e===Number&&(Object(r)instanceof e||!isNaN(r))||e===String&&(Object(r)instanceof e||r?.toString&&r.toString!==Object.prototype.toString))}static anyToDisplayName(r){return r==null?""+r:typeof r=="function"?r.name??""+r:""+r}constructor(r,e,t,s){o.instance=this;let n=h(()=>null,"noop"),i=h(()=>n,"noop2");this.error=e<3?n:s.error.bind(this,t),this.warn=e<4?n:s.warn.bind(this,t),this.info=e<6?n:s.info.bind(this,t),this.debug=e<7?n:s.debug.bind(this,t),this.notice=e<5?n:r?s.warn.bind(this,t):s.info.bind(this,t),this.time=e<7?n:a=>s.time.call(this,`${t} ${a}`),this.timeEnd=e<7?n:a=>s.timeEnd.call(this,`${t} ${a}`),this.assert=r?(a,...l)=>(a instanceof Function&&(l.unshift(""+a),a=a()),s.assert.bind(this,a,t,...l)):i,this.assertInstanceOf=r?(a,...l)=>{for(let c of l)if(o.anyIsInstanceOf(a,c))return n;return s.assert.bind(this,!1,t,`${o.anyToDisplayName(a)} type must be ${l.map(o.anyToDisplayName).join("|")}`)}:i,this.assertElementsInstanceOf=r?(a,...l)=>{for(let c of l)if(Object.values(a).every(u=>o.anyIsInstanceOf(u,c)))return n;return s.assert.bind(this,!1,t,`${o.anyToDisplayName(a)} type must be ${l.map(o.anyToDisplayName).join("|")}`)}:i,this.assertElementOf=r?(a,...l)=>{for(let c of l)if(c.includes(a))return n;return s.assert.bind(this,!1,t,`${o.anyToDisplayName(a)} must be one of ${l.map(o.anyToDisplayName).join("|")}`)}:i,this.assertElementsOf=r?(a,...l)=>{for(let c of l)if(Object.values(a).every(u=>c.includes(u)))return n;return s.assert.bind(this,!1,t,`${o.anyToDisplayName(a)} must be one of ${l.map(o.anyToDisplayName).join("|")}`)}:i}},z=class o extends null{static{h(this,"Collection")}constructor(r,e,t){t??=r;let s=Object.defineProperties(()=>{},{name:{value:`Collection of ${e}`},length:{value:r.length}});return k.instance.debug&&r.forEach((n,i)=>s[i]=n),new j(s,{has(n,i){return i in r?Reflect.has(r,i):(r.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),r.some(a=>Reflect.has(a,i)))},get(n,i){if(i in r)return Reflect.get(r,i);if(r.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),i===Symbol.toPrimitive)return l=>r.map(c=>d.anyIsPrimitive(c,Array)?c:Reflect.get(c,i)?.call(c,l)).join();let a=r.map(l=>d.anyIsPrimitive(l,Array)?l:Reflect.get(l,i));return a.every(l=>d.anyIsPrimitive(l,Object,Array))?a:new o(a,`${e}.${i}`,t)},set(n,i,a){return i in r?Reflect.set(r,i,a):(r.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),r.forEach((l,c)=>d.functionToCallbackable(u=>Reflect.set(l,i,u),l,t?.[c],c)(a)),!0)},deleteProperty(n,i){return i in r?Reflect.deleteProperty(r,i):(r.length===0&&x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),r.forEach(a=>Reflect.deleteProperty(a,i)),!0)},apply(n,i,a){if(r.length===0)return x.instance.notice("Tried to manipulate empty list, but mostly a bug. Please check selectors etc. if not intended"),[];if(r.some(l=>typeof l=="function")){let l=!1,c=!0,u=!0,f=!0,m=!1,g=r.map((y,T)=>{if(typeof y=="function"){if(y instanceof j&&a.length===0){l=!0;return}y instanceof j||(y.i=T);let b=Reflect.apply(y,i?.[T],a);return c=c&&b===void 0,u=u&&d.anyIsPrimitive(b,Object,Array),f=f&&b===t?.[T],m=m||b instanceof L.Promise,b}});return l?r:c?i:u?g:f?t:m?L.Promise.all(g):new o(g,`${e}()`,t)}if(a.length===0)return r;a.length,x.instance.error("apply called, but not a single case was executed",n)}})}},$=class{static{h(this,"WeakMap")}constructor(){this.map=new L.Map}has(r){return this.map.has(d.objectId(r))}get(r){return this.map.get(d.objectId(r))?.value}getOrSet(r,e){return this.has(r)||this.set(r,e(r)),this.get(r)}set(r,e){return this.map.set(d.objectId(r),{ref:new WeakRef(r),value:e})}reset(r,e){let t=this.get(r);return this.set(r,e(t)),t}delete(r){return this.map.delete(d.objectId(r))}clear(){return this.map.clear()}*entries(){for(let r of this.map.values()){let e=r.ref.deref();if(e===void 0){this.map.delete(e);continue}yield[e,r.value]}}get size(){return[...this.entries()].length}},C=class{static{h(this,"ObjectStorage")}constructor(){this.weakmap=new $}has(r,e){if(e==null)return this.weakmap.has(r);let t=this.weakmap.get(r)??{};return e in t}get(r,e){return e==null?this.weakmap.get(r)??{}:(this.weakmap.get(r)??{})?.[e]}getOrSet(r,e,t){return this.has(r,e)||this.set(r,e,t(r,e)),this.get(r,e)}set(r,e,t){if(e==null)return this.weakmap.set(r,t);let s=this.weakmap.get(r)??{};return s[e]=t,this.weakmap.set(r,s)}reset(r,e,t){let s=this.get(r,e);return this.set(r,e,t(s)),s}delete(r,e){if(e==null)return this.weakmap.delete(r);let t=this.weakmap.get(r)??{};return delete t[e],Object.keys(t).length?!1:this.weakmap.delete(r)}clear(){return this.weakmap.clear()}*entries(){yield*this.weakmap.entries()}get size(){return this.weakmap.size}},E=class o extends L.Promise{static{h(this,"Promise")}static resolvedReasonSymbol=Symbol("resolved");static#e(r,e,t=null){x.instance.assertElementsInstanceOf(r,Function,se)(),t??=window.navigator.hardwareConcurrency;let s=d.objectToEntries(r).map(([c])=>c),n=0,i=r instanceof Array?new Array(r.length):{},a=h(async function(c){n++;try{i[c]=await r[c](c)}catch(f){if(e)throw f;i[c]=f}let u=s[n];if(u&&r[u]!=null)return a(u)},"execute"),l=[];for(let c of s.slice(0,t))l.push(a(c));return[l,i]}static async concurrencyAll(r,e=null){let[t,s]=o.#e(r,!0,e);return await o.all(t),s}static async concurrencyAllSettled(r,e=null){let[t,s]=o.#e(r,!1,e);return await o.allSettled(t),s}constructor(r){let e,t;super((a,l)=>{e=a,t=l});let s=h(a=>{this.status="fulfilled",e(a)},"resolve2"),n=h(a=>{this.status="rejected",t(a)},"reject2"),i=new AbortController;i.signal.addEventListener("abort",a=>{a.target.reason===o.resolvedReasonSymbol?s(this.resolved):n(a.target.reason)}),r(s,n),this.controller=i,this.resolved=null,this.status="pending"}cancel(r){this.resolved=r,this.controller.abort(o.resolvedReasonSymbol)}abort(r){this.controller.abort(r)}},B=class extends L.FileReader{static{h(this,"FileReader")}promise(){return new E((r,e)=>{this.addEventListener("load",t=>r(t.target.result)),this.addEventListener("error",t=>e(t.target.error))})}},j=class o extends null{static{h(this,"Proxy")}static instances=new WeakSet;static[Symbol.hasInstance](r){return o.instances.has(r)}constructor(r,e){let t=new L.Proxy(r,e);return o.instances.add(t),t}},A=class extends EventTarget{static{h(this,"Timer")}constructor(){super(),this.id=null,this.millisecond=null}static wait(r){let e=new this;return new E((t,s)=>{e.addEventListener("alarm",n=>t(Date.now()-n.detail.time)),e.start(r)}).finally(()=>e.stop())}start(r,e=1){x.instance.assert(this.id===null,"Timer is started, please use restart")(),this.millisecond=r;let t=h((s,n)=>{this.id=setTimeout(()=>{this.dispatchEvent(new U("alarm",{detail:{id:this.id,tick:s,time:n}})),s<e&&t(s+1,Date.now())},this.millisecond)},"start");t(1,Date.now())}restart(r,e){return this.stop(),this.start(r,e)}stop(){clearTimeout(this.id),this.id=null}},V=class o{static{h(this,"Options")}constructor(r,e=!1,t=!1){this.options=r,this.handleNull=e,this.handleUndefined=t}extends(r){return new o(Object.assign({},this.options,r),this.handleNull,this.handleUndefined)}merge(r){let e={};for(let t of Object.keys(this.options))this.handleNull&&t in r&&r[t]===null||this.handleUndefined&&t in r&&r[t]===void 0?e[t]=r[t]:e[t]=r[t]??this.options[t];return e}},q=class o{static{h(this,"TimerObserver")}static observers=new L.Set;static timer=new A;static defaultOptions=new V({interval:1e3});constructor(r,e={}){this.options=o.defaultOptions.merge(e),this.observedNodes=new C,this.callback=t=>{let s=[];for(let[n,i]of this.observedNodes.entries()){let a=this._data(n),l=this._compare(i.data,a);this.observedNodes.set(n,"data",a);for(let c of l)s.push(Object.assign(c,{target:n,time:t.timeStamp}))}for(let n of s)r(n,this.observedNodes.reset(n.target,"last",()=>n))},o.timer.addEventListener("alarm",this.callback)}_data(r){}_compare(r,e){}observe(r){this.observedNodes.set(r,"data",this._data(r)),o.timer.restart(Math.min(o.timer.millisecond??this.options.interval,this.options.interval),1/0),o.observers.add(this)}unobserve(r){this.observedNodes.delete(r),this.observedNodes.size===0&&this.disconnect()}disconnect(){this.observedNodes.clear(),o.timer.removeEventListener("alarm",this.callback),o.observers.delete(this),o.observers.size===0&&o.timer.stop()}entries(){return this.observedNodes.entries()}},F=class o extends q{static{h(this,"CookieObserver")}static defaultOptions=q.defaultOptions.extends({cookieName:void 0});static getOptionsKey(r){return JSON.stringify(this.defaultOptions.merge(r))}constructor(r,e={}){super(r,e),this.options=o.defaultOptions.merge(e)}_data(r){return{cookie:r.cookie,cookies:Object.fromEntries(r.cookie.split("; ").map(e=>e.split(/=(.*)/s).map(decodeURIComponent)))}}_compare(r,e){if(r.cookie===e.cookie)return[];let t=new Set;Object.keys(r.cookies).forEach(n=>t.add(n)),Object.keys(e.cookies).forEach(n=>t.add(n));let s=[];for(let n of t.values())if(this.options.cookieName==null||this.options.cookieName.includes(n)){let i=r.cookies[n],a=e.cookies[n];i!==a&&s.push({cookieName:n,oldValue:i,newValue:a})}return s}},N=class o extends L.MutationObserver{static{h(this,"MutationObserver")}static defaultOptions=new V({attributes:void 0,attributeFilter:void 0,attributeOldValue:void 0,characterData:void 0,characterDataOldValue:void 0,childList:void 0,subtree:void 0});static getOptionsKey(r){return JSON.stringify(this.defaultOptions.merge(r))}constructor(r,e={}){super(function(t){for(let s of t)r(s,this.observedNodes.reset(s.target,()=>s))}),this.options=o.defaultOptions.merge(e),this.observedNodes=new $}observe(r){return this.observedNodes.set(r,null),super.observe(r,this.options)}unobserve(r){super.disconnect();for(let[e]of this.observedNodes.entries())e===r?this.observedNodes.delete(e):this.observe(e,this.options)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},P=class o extends L.ResizeObserver{static{h(this,"ResizeObserver")}static defaultOptions=new V({box:void 0});static getOptionsKey(r){return JSON.stringify(this.defaultOptions.merge(r))}constructor(r,e={}){super(function(t){for(let s of t)r(s,this.observedNodes.reset(s.target,()=>s))},e),this.options=o.defaultOptions.merge(e),this.observedNodes=new $}observe(r){return this.observedNodes.set(r,null),super.observe(r,this.options)}unobserve(r){return this.observedNodes.delete(r),super.unobserve(r)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},R=class o extends L.IntersectionObserver{static{h(this,"IntersectionObserver")}static defaultOptions=new V({root:void 0,rootMargin:void 0,threshold:void 0});static getOptionsKey(r){let e=new L.IntersectionObserver(()=>{},r),t={root:e.root,rootMargin:e.rootMargin,threshold:e.thresholds};return t.root=d.objectId(t.root),JSON.stringify(t)}constructor(r,e={}){e=o.defaultOptions.merge(e),super(function(t){for(let s of t)s.realIntersectionRatio=s.intersectionRatio,s.realIntersectionRatio===0&&s.isIntersecting&&(s.realIntersectionRatio=Number.EPSILON),r(s,this.observedNodes.reset(s.target,()=>s))},e),this.options=e,this.observedNodes=new $}observe(r){return this.observedNodes.set(r,null),super.observe(r)}unobserve(r){return this.observedNodes.delete(r),super.unobserve(r)}disconnect(){return this.observedNodes.clear(),super.disconnect()}entries(){return this.observedNodes.entries()}},U=class extends L.CustomEvent{static{h(this,"CustomEvent")}constructor(r,e){super(r,e),this.$original=e.$original}},H=class extends DOMPoint{static{h(this,"Vector2")}constructor(r,e,t){super(r,e),this.t=t}during(r){return r.t-this.t}deltaX(r){return r.x-this.x}deltaY(r){return r.y-this.y}distance(r){return Math.sqrt(this.deltaX(r)**2+this.deltaY(r)**2)}degree(r){let e=Math.atan2(this.deltaY(r),this.deltaX(r))*(180/Math.PI)+90;return e<0&&(e+=360),e}velocity(r){return this.distance(r)/this.during(r)}};var K=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){e.attributeName&&(e.attributeFilter=d.objectIsArrayLike(e.attributeName)?e.attributeName:[e.attributeName]),e=Object.assign(e,{attributes:!0,attributeOldValue:!0}),this.eventId=N.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new N((s,n)=>{t(s.target,{subtype:s.attributeName,oldValue:s.oldValue,newValue:s.target.getAttribute(s.attributeName)},{$original:{observer:this.observer,entry:s}})},e),this.handlers={insert:h(s=>this.observer.observe(s),"insert"),delete:h(s=>this.observer.unobserve(s),"delete")}}};var G=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){let s=e.attributes;e=Object.assign(e,{childList:!0,attributes:!1}),this.eventId=N.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new N((n,i)=>{for(let a of n.addedNodes)a instanceof Element&&(t(n.target,{subtype:"insert",node:a},{$original:{observer:this.observer,entry:n}}),this.constructor.observers["attribute"+this.eventId]?.observe?.(a));for(let a of n.removedNodes)a instanceof Element&&(t(n.target,{subtype:"remove",node:a},{$original:{observer:this.observer,entry:n}}),this.constructor.observers["attribute"+this.eventId]?.unobserve?.(a))},e),s&&(this.attributer=this.constructor.observers["attribute"+this.eventId]??=new N((n,i)=>{t(n.target.parentElement,{subtype:"change",node:n.target,name:n.attributeName,oldValue:n.oldValue,newValue:n.target.getAttribute(n.attributeName)},{$original:{observer:this.attributer,entry:n}})},{subtree:e.subtree,childList:!1,attributes:!0,attributeOldValue:!0})),this.handlers={insert:h(n=>this.observer.observe(n),"insert"),delete:h(n=>this.observer.unobserve(n),"delete")}}};var X=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){this.eventId=F.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new F((s,n)=>{t(s.target,{subtype:s.cookieName,oldValue:s.oldValue,newValue:s.newValue},{$original:{observer:this.observer,entry:s},bubbles:!1,cancelable:!1,composed:!1})},e),this.observer.observe(o)}destructor(o){this.observer.unobserve(o)}};var J=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){e=Object.assign(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["disabled"]}),this.eventId=N.getOptionsKey(e),this.selector=r?`${r}, fieldset`:null,this.observer=this.constructor.observers[r+this.eventId]??=new N((s,n)=>{let i=h(a=>{let l=h(function(f,m){for(let g=f;g!=null;g=g.parentElement)if(m&&g===s.target){if(s.oldValue!=null)return!0}else if(g.disabled)return!0;return!1},"valuer"),c=l(a,!0),u=l(a,!1);c!==u&&t(a,{subtype:c?"enable":"disable",oldValue:c,newValue:u},{$original:{observer:this.observer,entry:s}})},"trigger2");(!r||s.target.matches(r))&&i(s.target),r&&s.target.querySelectorAll(r).forEach(a=>i(a))},e),this.handlers={insert:h(s=>this.observer.observe(s),"insert"),delete:h(s=>this.observer.unobserve(s),"delete")}}};var Y=class{static{h(this,"default")}constructor(o,r,e,t){e.buttons??=1,this.starting=!1,this.vectors=[],this.down=s=>{s.target.setPointerCapture(s.pointerId),this.starting=!0,this.vectors.splice(0)},this.move=s=>{s.buttons&e.buttons&&this.starting&&this.vectors.push(new H(s.offsetX,s.offsetY,s.timeStamp))},this.up=s=>{if(s.target.releasePointerCapture(s.pointerId),this.starting){if(this.starting=!1,this.vectors.length===0)return;let n=e.threshold??50,i=new H(s.offsetX,s.offsetY,s.timeStamp),a=1+this.vectors.findLastIndex(f=>f.during(i)>n),l=this.vectors[a],c=this.vectors.slice(a),u=c.slice(0,-1).reduce((f,m,g)=>f+c[g].distance(c[g+1]),0);if(u===0)return;this.vectors.splice(0),t(s.target,{velocity:u/l.during(i),degree:l.degree(i),during:l.during(i)},{$original:s,bubbles:!0})}},this.cancel=s=>{s.target.releasePointerCapture(s.pointerId),this.starting=!1,this.vectors.splice(0)},o.addEventListener("pointerdown",this.down),o.addEventListener("pointercancel",this.cancel),o.addEventListener("pointermove",this.move),o.addEventListener("pointerup",this.up)}destructor(o){o.removeEventListener("pointerdown",this.down),o.removeEventListener("pointercancel",this.cancel),o.removeEventListener("pointermove",this.move),o.removeEventListener("pointerup",this.up)}};var Z=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){e.first??=!0,this.eventId=R.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new R((s,n)=>{if(e.first||n){let i=n?!n.isIntersecting&&s.isIntersecting?"enter":n.isIntersecting&&!s.isIntersecting?"leave":"hover":null;t(s.target,{subtype:i,oldValue:n?.realIntersectionRatio??null,newValue:s.realIntersectionRatio},{$original:{observer:this.observer,entry:s}})}},e),this.handlers={insert:h(s=>this.observer.observe(s),"insert"),delete:h(s=>this.observer.unobserve(s),"delete")}}};var Q=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){e.first??=!0,this.eventId=P.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new P((s,n)=>{if(e.first||n){let i=d.stringToPascalCase(e.box??"content-box","-")+"Size";t(s.target,{subtype:e.box??"content-box",oldValue:n==null?null:n[i][0],newValue:s[i][0]},{$original:{observer:this.observer,entry:s}})}},e),this.handlers={insert:h(s=>this.observer.observe(s),"insert"),delete:h(s=>this.observer.unobserve(s),"delete")}}};var ee=class{static{h(this,"default")}constructor(o,r,e,t){e.buttons??=1,this.firstVector=null,this.down=s=>{s.target.setPointerCapture(s.pointerId),this.firstVector=new H(s.offsetX,s.offsetY,s.timeStamp)},this.move=s=>{if(s.buttons&e.buttons&&this.firstVector){let n=new H(s.offsetX,s.offsetY,s.timeStamp),i=this.firstVector.distance(n);i!==0&&t(s.target,{distance:i,deltaX:this.firstVector.deltaX(n),deltaY:this.firstVector.deltaY(n),velocity:this.firstVector.velocity(n),degree:this.firstVector.degree(n),during:this.firstVector.during(n)},{$original:s,bubbles:!0})}},this.up=s=>{s.target.releasePointerCapture(s.pointerId),this.firstVector=null},this.cancel=s=>{s.target.releasePointerCapture(s.pointerId),this.firstVector=null},o.addEventListener("pointerdown",this.down),o.addEventListener("pointermove",this.move),o.addEventListener("pointerup",this.up),o.addEventListener("pointercancel",this.cancel)}destructor(o){o.removeEventListener("pointerdown",this.down),o.removeEventListener("pointermove",this.move),o.removeEventListener("pointerup",this.up),o.removeEventListener("pointercancel",this.cancel)}};var te=class{static{h(this,"default")}static observers={};constructor(o,r,e,t){e.first??=!0,this.eventId=P.getOptionsKey(e),this.observer=this.constructor.observers[this.eventId]??=new P((s,n)=>{let i=s.contentRect.x>0||s.contentRect.y>0||s.contentRect.width>0||s.contentRect.height>0;(e.first||n)&&i!==n?.visible&&t(s.target,{subtype:"content-visibility",oldValue:n==null?null:!i,newValue:i},{$original:{observer:this.observer,entry:s}})},e),this.handlers={insert:h(s=>this.observer.observe(s),"insert"),delete:h(s=>this.observer.unobserve(s),"delete")}}};var ne=class{static{h(this,"KQuery")}constructor(r){let e=this;this.API=_,this.config=new k(function(){if(d.objectIsPlain(r)&&!r.url)return r;let t={};if(r.url||r.src)for(let[s,n]of new URL(r.url||r.src).searchParams.entries())s.startsWith("kQuery-")&&(t[s.substring(7)]=n);if(r instanceof HTMLScriptElement){for(let[s,n]of d.objectToEntries(r.dataset))if(s.startsWith("kquery")){let i=s.substring(6);t[i.charAt(0).toLowerCase()+i.substring(1)]=n}}return t}()),this.config.configure({debug:!1,logLevel:0,global:"kQuery"}),globalThis[this.config.global]=this,this.logger=new x(this.config.debug,this.config.logLevel,"[kQuery]",globalThis.console)}extends(r){let e=this,t=r.name?r.name:r;this.logger.time(t);for(let[s,n]of Object.entries(r(e))){let i=Object.getOwnPropertyDescriptors(n);for(let a of Object.values(i))if(a.set){let l=a.set;(e.config.resetNative||!d.functionIsNative(l))&&(a.set=function(...c){return d.functionToCallbackable(l.bind(this),this,this)(...c)})}for(let a of s.split(","))if(a.charAt(0)==="$")for(let l of _[a]())for(let[c,u]of Object.entries(i))c!=="length"&&Object.defineProperty(globalThis[l].prototype,c,{get(){let f=d.objectToEntries(this).map(([m,g])=>g?.[c]);return f.length&&f.every(m=>d.anyIsPrimitive(m,Object,Array,FileList))?f:new z(f,c,this)},set(f){return d.objectToEntries(this).forEach(([m,g])=>{c in g&&d.functionToCallbackable(y=>g[c]=y,this,g,m)(f)})},configurable:u.configurable,enumerable:u.enumerable});else Object.defineProperties(globalThis[a].prototype,i)}this.logger.timeEnd(t)}};function ae(o){let r={EventTarget:["dispatchEvent"],Element:["computedStyleMap","elementTiming","getInnerHTML","onbeforecopy","onbeforecut","onbeforepaste","onfullscreenchange","onfullscreenerror","onsearch","scrollIntoViewIfNeeded"],HTMLAnchorElement:["attributionSrc","charset","coords","name","rev","shape"],HTMLAreaElement:["noHref"],HTMLBRElement:["clear"],HTMLBodyElement:["aLink","background","bgColor","link","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","text","vLink"],HTMLDListElement:["compact"],HTMLDirectoryElement:["*"],HTMLDivElement:["align"],HTMLElement:["attributeStyleMap","editContext","onabort","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforematch","onbeforetoggle","onbeforexrselect","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerrawupdate","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onscrollsnapchange","onscrollsnapchanging","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwheel","virtualKeyboardPolicy","writingSuggestions"],HTMLEmbedElement:["align","name"],HTMLFencedFrameElement:["*"],HTMLFontElement:["color","face","size"],HTMLFormElement:["requestAutocomplete"],HTMLFrameElement:["*"],HTMLFrameSetElement:["cols","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onresize","onscroll","onstorage","onunhandledrejection","onunload","rows"],HTMLHRElement:["align","color","noShade","size","width"],HTMLHeadingElement:["align"],HTMLHtmlElement:["version"],HTMLIFrameElement:["adAuctionHeaders","align","allowPaymentRequest","credentialless","csp","featurePolicy","frameBorder","longDesc","marginHeight","marginWidth","privateToken","sharedStorageWritable","scrolling"],HTMLImageElement:["align","attributionSrc","border","fetchPriority","hspace","longDesc","name","sharedStorageWritable","vspace"],HTMLInputElement:["align","incremental","useMap","webkitdirectory"],HTMLLIElement:["type"],HTMLLegendElement:["align"],HTMLLinkElement:["charset","blocking","fetchPriority","rev","target"],HTMLMarqueeElement:["*"],HTMLMediaElement:["captureStream","controller","controlsList","disableRemotePlayback","mediaGroup","onencrypted","onwaitingforkey","remote","setSinkId","sinkId"],HTMLMenuElement:["compact"],HTMLMetaElement:["scheme"],HTMLOListElement:["compact"],HTMLObjectElement:["align","archive","border","code","codeBase","codeType","declare","hspace","standby","vspace"],HTMLParagraphElement:["align"],HTMLParamElement:["name","type","value","valueType"],HTMLPreElement:["width"],HTMLScriptElement:["attributionSrc","blocking","charset","event","fetchPriority"],HTMLStyleElement:["blocking","type"],HTMLTableCaptionElement:["align"],HTMLTableCellElement:["align","axis","bgColor","ch","chOff","height","noWrap","vAlign","width"],HTMLTableColElement:["align","ch","chOff","span","vAlign","width"],HTMLTableElement:["align","bgColor","border","cellPadding","cellSpacing","frame","rules","summary","width"],HTMLTableRowElement:["align","bgColor","ch","chOff","vAlign"],HTMLTableSectionElement:["align","ch","chOff","vAlign"],HTMLUListElement:["compact","type"],HTMLVideoElement:["cancelVideoFrameCallback","onenterpictureinpicture","onleavepictureinpicture","playsInline","requestPictureInPicture","requestVideoFrameCallback"]},e={Blob:["arrayBuffer","size","slice","stream","text","type"],Element:["after","animate","append","ariaAtomic","ariaAutoComplete","ariaBrailleLabel","ariaBrailleRoleDescription","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColIndexText","ariaColSpan","ariaCurrent","ariaDescription","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowIndexText","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","assignedSlot","attachShadow","attributes","before","checkVisibility","childElementCount","children","classList","className","clientHeight","clientLeft","clientTop","clientWidth","closest","currentCSSZoom","firstElementChild","getAnimations","getAttribute","getAttributeNS","getAttributeNames","getAttributeNode","getAttributeNodeNS","getBoundingClientRect","getClientRects","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","getHTML","hasAttribute","hasAttributeNS","hasAttributes","hasPointerCapture","id","innerHTML","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","lastElementChild","localName","matches","moveBefore","namespaceURI","nextElementSibling","outerHTML","part","prefix","prepend","previousElementSibling","querySelector","querySelectorAll","releasePointerCapture","remove","removeAttribute","removeAttributeNS","removeAttributeNode","replaceChildren","replaceWith","requestFullscreen","requestPointerLock","role","scroll","scrollBy","scrollHeight","scrollIntoView","scrollLeft","scrollTo","scrollTop","scrollWidth","setAttribute","setAttributeNS","setAttributeNode","setAttributeNodeNS","setHTMLUnsafe","setPointerCapture","shadowRoot","slot","tagName","toggleAttribute"],EventTarget:["addEventListener","removeEventListener"],File:["lastModified","lastModifiedDate","name"],HTMLAnchorElement:["download","hash","host","hostname","href","hreflang","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","target","text","toString","type","username"],HTMLAreaElement:["alt","coords","download","hash","host","hostname","href","origin","password","pathname","ping","port","protocol","referrerPolicy","rel","relList","search","shape","target","toString","username"],HTMLBaseElement:["href","target"],HTMLButtonElement:["checkValidity","disabled","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","labels","name","popoverTargetAction","popoverTargetElement","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLCanvasElement:["captureStream","getContext","height","toBlob","toDataURL","transferControlToOffscreen","width"],HTMLDataElement:["value"],HTMLDataListElement:["options"],HTMLDetailsElement:["name","open"],HTMLDialogElement:["close","closedBy","open","requestClose","returnValue","show","showModal"],HTMLElement:["accessKey","attachInternals","autocapitalize","autofocus","blur","click","contentEditable","dataset","dir","draggable","enterKeyHint","focus","hidden","hidePopover","inert","innerText","inputMode","isContentEditable","lang","nonce","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth","outerText","popover","showPopover","spellcheck","style","tabIndex","title","togglePopover","translate"],HTMLEmbedElement:["getSVGDocument","height","src","type","width"],HTMLFieldSetElement:["checkValidity","disabled","elements","form","name","reportValidity","setCustomValidity","type","validationMessage","validity","willValidate"],HTMLFormElement:["acceptCharset","action","autocomplete","checkValidity","elements","encoding","enctype","length","method","name","noValidate","rel","relList","reportValidity","requestSubmit","reset","submit","target"],HTMLIFrameElement:["allow","allowFullscreen","contentDocument","contentWindow","getSVGDocument","height","loading","name","referrerPolicy","sandbox","src","srcdoc","width"],HTMLImageElement:["alt","complete","crossOrigin","currentSrc","decode","decoding","height","isMap","loading","lowsrc","naturalHeight","naturalWidth","referrerPolicy","sizes","src","srcset","useMap","width","x","y"],HTMLInputElement:["accept","alt","autocomplete","checkValidity","checked","defaultChecked","defaultValue","dirName","disabled","files","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","height","indeterminate","labels","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","popoverTargetAction","popoverTargetElement","readOnly","reportValidity","required","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","showPicker","size","src","step","stepDown","stepUp","type","validationMessage","validity","value","valueAsDate","valueAsNumber","width","willValidate"],HTMLLIElement:["value"],HTMLLabelElement:["control","form","htmlFor"],HTMLLegendElement:["form"],HTMLLinkElement:["as","crossOrigin","disabled","href","hreflang","imageSizes","imageSrcset","integrity","media","referrerPolicy","rel","relList","sheet","sizes","type"],HTMLMapElement:["areas","name"],HTMLMediaElement:["addTextTrack","autoplay","buffered","canPlayType","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","load","loop","muted","networkState","pause","paused","play","playbackRate","played","preload","preservesPitch","readyState","seekable","seeking","src","srcObject","textTracks","volume"],HTMLMetaElement:["content","httpEquiv","media","name"],HTMLMeterElement:["high","labels","low","max","min","optimum","value"],HTMLModElement:["cite","dateTime"],HTMLOListElement:["reversed","start","type"],HTMLObjectElement:["checkValidity","contentDocument","contentWindow","data","form","getSVGDocument","height","name","reportValidity","setCustomValidity","type","useMap","validationMessage","validity","width","willValidate"],HTMLOptGroupElement:["disabled","label"],HTMLOptionElement:["defaultSelected","disabled","form","index","label","selected","text","value"],HTMLOutputElement:["checkValidity","defaultValue","form","htmlFor","labels","name","reportValidity","setCustomValidity","type","validationMessage","validity","value","willValidate"],HTMLProgressElement:["labels","max","position","value"],HTMLQuoteElement:["cite"],HTMLScriptElement:["async","crossOrigin","defer","htmlFor","integrity","noModule","referrerPolicy","src","text","type"],HTMLSelectElement:["add","autocomplete","checkValidity","disabled","form","item","labels","length","multiple","name","namedItem","options","remove","reportValidity","required","selectedIndex","selectedOptions","setCustomValidity","showPicker","size","type","validationMessage","validity","value","willValidate"],HTMLSlotElement:["assign","assignedElements","assignedNodes","name"],HTMLSourceElement:["height","media","sizes","src","srcset","type","width"],HTMLStyleElement:["disabled","media","sheet"],HTMLTableCellElement:["abbr","cellIndex","colSpan","headers","rowSpan","scope"],HTMLTableElement:["caption","createCaption","createTBody","createTFoot","createTHead","deleteCaption","deleteRow","deleteTFoot","deleteTHead","insertRow","rows","tBodies","tFoot","tHead"],HTMLTableRowElement:["cells","deleteCell","insertCell","rowIndex","sectionRowIndex"],HTMLTableSectionElement:["deleteRow","insertRow","rows"],HTMLTemplateElement:["content","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shadowRootSerializable"],HTMLTextAreaElement:["autocomplete","checkValidity","cols","defaultValue","dirName","disabled","form","labels","maxLength","minLength","name","placeholder","readOnly","reportValidity","required","rows","select","selectionDirection","selectionEnd","selectionStart","setCustomValidity","setRangeText","setSelectionRange","textLength","type","validationMessage","validity","value","willValidate","wrap"],HTMLTimeElement:["dateTime"],HTMLTitleElement:["text"],HTMLTrackElement:["default","kind","label","readyState","src","srclang","track"],HTMLVideoElement:["disablePictureInPicture","getVideoPlaybackQuality","height","poster","videoHeight","videoWidth","width"],Node:["appendChild","baseURI","childNodes","cloneNode","compareDocumentPosition","contains","firstChild","getRootNode","hasChildNodes","insertBefore","isConnected","isDefaultNamespace","isEqualNode","isSameNode","lastChild","lookupNamespaceURI","lookupPrefix","nextSibling","nodeName","nodeType","nodeValue","normalize","ownerDocument","parentElement","parentNode","previousSibling","removeChild","replaceChild","textContent"]},t=o.config.debug?function(){let i=Object.create(null);for(let l of Object.keys(Object.getOwnPropertyDescriptors(globalThis))){if(!l.match(/^((EventTarget)|(Blob|File)|(Node|Element)|(HTML.*Element))$/))continue;let c=globalThis[l];for(let u in c.prototype)u.toUpperCase()!==u&&(u.match(/^(webkit|moz)[A-Z]/)||u.startsWith("onwebkit")||Object.prototype.hasOwnProperty.call(c.prototype,u)&&(l in r&&(r[l].includes(u)||r[l].includes("*"))||(i[c.name]=(i[c.name]??new Set).add(u))))}let a={};for(let l of Object.keys(i).toSorted())a[l]=[...i[l]].toSorted();return o.logger.debug(Object.keys(a).map(l=>`// https://developer.mozilla.org/docs/Web/API/${l}
${l}: ${JSON.stringify(a[l])},`).join(`
`)),a}():e;o.config.configure({appendNative:!0,resetNative:!0});let s=o.config.appendNative?{[[Node.name]]:{[Symbol.toPrimitive](){return this.outerHTML??this.nodeValue??null}},[[NodeList.name]]:{[Symbol.toPrimitive](){return[...this].join("")},dispatchEvent(i){let a=[];for(let l of this){let c=new i.constructor(i.type,i);a.push(l.dispatchEvent(c))}return a}},[[RadioNodeList.name]]:{get name(){return this[0]?.name},set name(i){[...this].forEach(function(a){a.name=i})}}}:{},n=h(function(i,a,l){s[i]??={},Object.defineProperty(s[i],a,l)},"defineProperty");for(let[i,a]of Object.entries(t))if(i in globalThis){let l=globalThis[i].prototype;for(let c of a){let u=Object.getOwnPropertyDescriptor(l,c);u&&(n(i,c,u),(globalThis[i]===globalThis.EventTarget||l instanceof EventTarget)&&n(v.name,c,u),(globalThis[i]===globalThis.Node||l instanceof Node)&&n(v.name,c,u),(globalThis[i]===globalThis.Blob||l instanceof Blob)&&n(D.name,c,u))}}return s}h(ae,"autoproperties");function le(o){o.config.configure({customEventPrefix:"$"}),Object.assign(o,{wellknownEvents:{click:PointerEvent},customEvents:{}});let r=new $,e=h(function(n,i){if(i==null){if(!n)throw new Error("Empty EventType is only allowed this context");return[[null,[]]]}return(""+i).trim().split(/\s+/).map(a=>a.trim().split(".")).map(([a,...l])=>{if(!n&&!a.length)throw new Error("Empty EventType is only allowed this context");return[a,l.filter(c=>c.length)]})},"eachType"),t=h(function(n){return n in o.customEvents&&(n=o.config.customEventPrefix+n),n},"internalEventName"),s=new class{constructor(){let n=h(function(i,a){let l=new Set;for(let c of i)if(c instanceof Element){c.matches(a)&&l.add(c);for(let u of c.querySelectorAll(a))l.add(u)}return l},"querySelectorThisAndAll");this.nodeSelectorCallback=new $,this.observer=new N(i=>{for(let[a,l]of this.nodeSelectorCallback.entries())for(let{selector:c,callbacks:u}of l){for(let f of n(i.addedNodes,c))o.logger.debug("Insert node to delegation emulation of ",a),u.insert(f);for(let f of n(i.removedNodes,c))o.logger.debug("Delete node to delegation emulation of ",a),u.delete(f)}},{attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0})}watch(n,i,a){if(i==null)a.insert(n);else{this.nodeSelectorCallback.getOrSet(n,()=>[]).push({selector:i,callbacks:a});for(let l of n.querySelectorAll(i))o.logger.debug("Initial node to delegation emulation of ",l),a.insert(l);return this.observer.observe(n)}}unwatch(n,i,a){i==null?a.delete(n):this.nodeSelectorCallback.reset(n,l=>l.filter(c=>c.selector===i&&c.callbacks===a?(o.logger.debug("Unwatch node to delegation emulation of ",n),!1):!0))}};return{[[EventTarget.name,v.name]]:{$on(n,i,a,l){typeof i=="function"&&(l=a,a=i,i=null),l=Object.assign({once:void 0,capture:void 0,passive:void 0,signal:void 0,ownself:!1,interval:void 0,throttle:void 0,debounce:void 0,leading:void 0,trailing:void 0},l),o.logger.assertInstanceOf(n,String)(),o.logger.assertInstanceOf(i,p,String)(),o.logger.assertInstanceOf(a,Function)(),o.logger.assertInstanceOf(l,Object)(),i!=null&&l.capture&&o.logger.warn("Delegation of capture phase isn't tested, so might not work well"),l.throttle&&!l.debounce&&(l.leading??=!0,l.trailing??=!1),l.debounce&&!l.throttle&&(l.leading??=!1,l.trailing??=!0);for(let[c,u]of e(!1,n)){let f={type:c,namespaces:u,selector:i,listener:a,options:l,counter:new $,collectors:[]},m;!(this instanceof Window)&&c in o.customEvents&&(m=new o.customEvents[c](this,i,l,function(b,w={},S={}){m.bubbles="bubbles"in S,S.$original??={},S.$original.$eventId??=m.eventId,S.bubbles??=(m.selector??i)!=null,S.detail??=w,b.$trigger(c,S)}),m.handlers??={},m.handlers.insert??=b=>{},m.handlers.delete??=b=>{},s.watch(this,m.selector??i,m.handlers),f.collectors.push(()=>{s.unwatch(this,m.selector??i,m.handlers),m.destructor?.(this)}));let g=new C,y=h(async b=>{if(b.$namespaces?.length&&b.$namespaces.some(O=>!f.namespaces.includes(O))||m?.eventId!==b.$original?.$eventId)return;let w=b.target,S=h(async(O,M)=>{let W=A.wait(O),ie=g.reset(w,"timer",()=>W);return!((!M||ie?.status==="pending")&&(ie?.cancel(null),await W===null||!l.trailing))},"debounce");if(!(l.debounce!=null&&!await S(l.debounce,l.leading))){if(l.throttle!=null){if(g.getOrSet(w,"start",()=>Date.now()-(l.leading?l.throttle:0))+l.throttle>Date.now()&&!await S(l.throttle,!1))return;g.set(w,"start",Date.now())}if(b.$abort=O=>f.abortController.abort(O),f.selector==null)return f.listener.call(this,b);for(let O=w;O&&O!==this;O=O.parentElement){if(O.matches(f.selector)&&!(l.once&&f.counter.get(w)))return!f.counter.reset(w,M=>(M??0)+1)&&l.once&&m?.handlers?.delete?.(w),m&&!m.bubbles&&b.stopPropagation(),b.$delegateTarget=O,f.listener.call(this,b);if(l.ownself)break}}},"handler");f.handler=new WeakRef(y),r.getOrSet(this,()=>[]).push(f);let T=f.selector==null?l:Object.assign({},l,{once:!1});f.abortController=new AbortController,f.abortController.signal.addEventListener("abort",f.destructor),T.signal?T.signal=AbortSignal.any([T.signal,f.abortController.signal]):T.signal=f.abortController.signal,this.addEventListener(t(c),y,T),f.destructor=function(){o.logger.debug("Release of ",c,i,l),f.collectors.forEach(b=>b()),f.collectors=[]},d.objectFinalize(y,f.destructor)}return this},$off(n,i,a,l){typeof i=="function"&&(l=a,a=i,i=null),o.logger.assertInstanceOf(n,p,String)(),o.logger.assertInstanceOf(i,p,String)(),o.logger.assertInstanceOf(a,p,Function)(),o.logger.assertInstanceOf(l,p,Object)();for(let[c,u]of e(!0,n))r.reset(this,f=>(f??[]).filter(m=>c&&c!==m.type||u.length&&u.some(g=>!m.namespaces.includes(g))||i&&i!==m.selector||a&&a!==m.listener||l?.capture!==m.options.capture?!0:(this.removeEventListener(t(m.type),m.handler.deref(),m.options),m.destructor(),!1)));return this},$trigger(n,i={}){o.logger.assertInstanceOf(n,String)(),o.logger.assertInstanceOf(i,Object)();let a=!0;for(let[l,c]of e(!1,n)){let u=o.wellknownEvents[l]??U,f=new u(t(l),Object.assign({bubbles:!0,cancelable:!0,composed:!0},i));f.$namespaces=c;let m=this.dispatchEvent(f);o.logger.debug(`Event ${l} is ${m?"completed":"canceled"}`,this,f),a=a&&m}return a},$events(n,i,a=!1){o.logger.assertInstanceOf(n,p,String)(),o.logger.assertInstanceOf(i,p,Boolean)(),o.logger.assertInstanceOf(a,Boolean)();let l=r.get(this)??[];if(i)for(let c=this.parentNode;c;c=c.parentNode)for(let u of r.get(c)??[])u.selector!=null&&this.matches(u.selector)&&(u.options.once&&u.counter.get(this)||l.push(u));return l.filter(c=>{if(!c.handler.deref())return!1;for(let[u,f]of e(!0,n))if(u&&u!==c.type||f.length&&f.some(m=>!c.namespaces.includes(m)))return!1;return a===(c.options.capture??!1)})}}}}h(le,"events");function ce(o){let r=new C;class e{static{h(this,"ProxyProperty")}static NotImplemented=Symbol("NotImplemented");constructor(s,n){this.node=s,this.name=n,this.object=s[n]}has(s,n){return this._hasValue(n)}_hasValue(s){return Reflect.has(this.object,s)}get(s,n){if(n===Symbol.toPrimitive||n==="toString")return()=>this._getString();if(n.charAt(0)==="$"){let a=this._get$Value(n.substring(1));if(a!==e.NotImplemented)return a}let i=Reflect.get(this.object,n);return typeof i=="function"?this._getFunction(n,i):this._getValue(n,i)}_getString(){}_get$Value(s){return e.NotImplemented}_getFunction(s,n){let i=h((...a)=>{let l=d.functionToCallbackable(n,this.node,this.node,i.i).call(this.object,...a);return l===void 0?r.get(this.node,this.name):l},"method");return i}_getValue(s,n){return n}set(s,n,i){return typeof i=="function"&&(i=this._setFunction(n,i)),n.charAt(0)==="$"&&this._set$Value(n.substring(1),i)!==e.NotImplemented||this._setValue(n,i),!0}_set$Value(s,n){return e.NotImplemented}_setFunction(s,n){return n.call(this.object,this.node)}_setValue(s,n){n!==void 0&&this.apply(null,null,[{[s]:n}])}deleteProperty(s,n){let i=Reflect.get(this.object,n);return this._deleteValue(n,i),!0}_deleteValue(s,n){Reflect.deleteProperty(this.object,s)}apply(s,n,i){return i[0]instanceof Array||d.objectIsPlain(i[0])?(this._applySet(...i),r.get(this.node,this.name)):this._applyGet(...i)}_applyGet(...s){}_applySet(...s){}}return{[[Element.name,v.name]]:{get $attrs(){return r.getOrSet(this,"attributes",(t,s)=>new j(h(function(){},"$Attrs"),new class extends e{_getString(){return Object.values(t.attributes).map(n=>`${d.stringEscape(n.name,"attr-name")}="${d.stringEscape(n.value,"attr-value")}"`).join(" ")}_get$Value(n){return t.closest(`[${d.stringEscape(n,"css")}]`)?.getAttribute(n)??null}_getValue(n,i){return i?.value}_deleteValue(n,i){t.removeAttribute(n)}_applyGet(){return Object.fromEntries(Array.from(t.attributes,n=>[n.name,n.value]))}_applySet(n){let i=d.objectToAttributes(n);for(let[a,l]of Object.entries(i))typeof l=="boolean"?t.toggleAttribute(a,l):t.setAttribute(a,l)}}(t,s)))},set $attrs(t){if(o.logger.assertInstanceOf(t,p,Object)(),t!=null){for(let s of Object.values(this.attributes))this.attributes.removeNamedItem(s.name);this.$attrs(t)}},get $data(){return r.getOrSet(this,"dataset",(t,s)=>new j(h(function(){},"$Data"),new class extends e{_getString(){return JSON.stringify(this.apply(null,null,[""]))}_get$Value(n){return this._applyGet(n)}_applyGet(n){let i={};for(let[m,g]of Object.entries(t.dataset))i[m]=g;if(typeof n!="string")return i;let a=d.stringToKebabCase(n),l=new RegExp(a?`^${n}[A-Z]`:".*"),c={};for(let[m,g]of Object.entries(i))l.test(m)&&(c[d.stringToKebabCase(m)]=g);if(Object.keys(c).length===0&&n in t.dataset)try{return JSON.parse(t.dataset[n])}catch{}let u=Object.entries(c).map(([m,g])=>[m.split("-"),g]),f=d.entriesToObject(u,!0);return a?a.split("-").reduce((m,g)=>m?.[g],f)??{}:f}_set$Value(n,i){t.dataset[n]=JSON.stringify(i)}_applySet(n){for(let[i,a]of Object.entries(d.objectToDataset(n)))t.dataset[d.stringToPascalCase(i)]=a}}(t,s)))},set $data(t){if(o.logger.assertInstanceOf(t,p,Object)(),t!=null){for(let s of Object.keys(this.dataset))delete this.dataset[s];this.$data(t)}},get $class(){return r.getOrSet(this,"classList",(t,s)=>new j(h(function(){},"$Class"),new class extends e{_hasValue(n){return t.classList.contains(n)}_getString(){return t.classList.value}_getValue(n,i){return t.classList.contains(n)}_deleteValue(n,i){t.classList.remove(n)}_applyGet(){return[...t.classList.values()]}_applySet(n){for(let[i,a]of d.objectToEntries(d.objectToClasses(n)))t.classList.toggle(i,a)}}(t,s)))},set $class(t){o.logger.assertInstanceOf(t,p,String,Object,Array)(),t!=null&&(this.classList.value="",this.$class(t))}},[[Element.name,CSSStyleRule.name,v.name,re.name]]:{get $style(){return r.getOrSet(this,"style",(t,s)=>new j(h(function(){},"$Style"),new class extends e{_hasValue(n){return!!Reflect.get(t.style,n)}_getString(){return t.style.cssText}_get$Value(n){let[i,a]=n.split("::");a=a?`::${a}`:null;let l=t.$window.getComputedStyle(t,a);return i.length?l.getPropertyValue(d.stringToKebabCase(i)):l}_getValue(n,i){return n.startsWith("--")?t.style.getPropertyValue(d.stringToKebabCase(n)):i||i===void 0?i:null}_deleteValue(n,i){t.style.removeProperty(d.stringToKebabCase(n))}_applyGet(n){let i={};for(let a=0;;a++){let l=t.style[a];if(!l)break;if(n===!0){let c=t.style.getPropertyPriority(l);i[l]=t.style.getPropertyValue(l)+(c?`!${c}`:"")}else i[l]=t.style.getPropertyValue(l)}return i}_applySet(n){for(let[i,a]of d.objectToEntries(n)){let l=""+a,c=l.replace(/!important$/,"");t.style.setProperty(d.stringToKebabCase(i),c,l===c?"":"important")}}}(t,s)))},set $style(t){o.logger.assertInstanceOf(t,p,Object)(),t!=null&&(this.style.cssText="",this.$style(t))}}}}h(ce,"attributes");function ue(o){let r=new $,e=new $;return{[[Node.name,v.name]]:{get $bag(){let t={};return r.getOrSet(this,()=>new j(h(function(){},"$Bag"),{has(s,n){return Reflect.has(t,n)},get(s,n){return n===Symbol.toPrimitive||n==="toString"?()=>JSON.stringify(t):Reflect.get(t,n)},set(s,n,i){return Reflect.set(t,n,i),!0},deleteProperty(s,n){return Reflect.deleteProperty(t,n),!0},apply(s,n,i){return d.objectIsPlain(i[0])&&Object.assign(t,i[0]),t}}))},set $bag(t){if(o.logger.assertInstanceOf(t,p,Object)(),t==null)return;let s=this.$bag;for(let n of Object.keys(s()))delete s[n];s(t)}},[[HTMLStyleElement.name,HTMLLinkElement.name,v.name]]:{async $contents(t=!0){let s;if(this instanceof HTMLLinkElement?s=await(await d.fetch(this.href)).text():s=this.textContent,t){let n=/url\(((['"])?.+?\2?)\)/g,i=h(c=>(c=d.stringUnquote(c,"css-url"),c.charAt(0)==="#"?null:new URL(c,this.href)),"normalize"),a={};for(let[,c]of s.matchAll(n)){let u=i(c);u&&(a[u]??=async f=>{let m=await d.fetch(f).catch(g=>({ok:!1}));return m.ok?(await m.blob()).$dataURL():null})}let l=await E.concurrencyAll(a,6);s=s.replace(n,(c,u)=>{let f=i(u);return f&&l[f]?"url("+d.stringQuote(l[f]+f.hash,"css-url")+")":c})}return s}},[[HTMLScriptElement.name,v.name]]:{async $contents(){let t;return this.src?t=await(await d.fetch(this.src)).text():t=this.textContent,t}},[[HTMLImageElement.name,v.name]]:{get $URL(){return new URL(this.src,this.baseURI)},set $URL(t){this.src=t},async $contents(){let t=new URL(this.currentSrc,this.baseURI),s=await d.fetch(t),n=await s.blob();return new File([n],t.pathname.split("/").at(-1)??this.currentSrc,{type:n.type,...s.headers.has("last-modified")?{lastModified:new Date(s.headers.get("last-modified")).getTime()}:{}})},async $dataURL(t,s){return o.logger.assertInstanceOf(t,p,String)(),o.logger.assertInstanceOf(s,p,Number)(),new E(n=>{let i=this.$document.createElement("canvas");i.width=this.width,i.height=this.height,i.getContext("2d").drawImage(this,0,0),n(i.toDataURL(t,s))})},async $blob(t,s){return o.logger.assertInstanceOf(t,p,String)(),o.logger.assertInstanceOf(s,p,Number)(),new E(n=>{let i=this.$document.createElement("canvas");i.width=this.width,i.height=this.height,i.getContext("2d").drawImage(this,0,0),i.toBlob(n,t,s)})},async $file(t,s){o.logger.assertInstanceOf(t,p,String)(),o.logger.assertInstanceOf(s,p,Number)();let n=new URL(this.currentSrc,this.baseURI);return new File([await this.$blob(t,s)],n.pathname.split("/").at(-1)??this.currentSrc,{type:t})}},[[HTMLAnchorElement.name,v.name]]:{get $URL(){return new URL(this.href,this.baseURI)},set $URL(t){this.href=t}},[[HTMLFormElement.name,v.name]]:{get $URL(){return new URL(this.action,this.baseURI)},set $URL(t){this.action=t}},[[Blob.name,D.name]]:{$download(t){o.logger.assertInstanceOf(t,p,String)(),t??=this.name??"";let s=URL.createObjectURL(this);document.$createElement("a",{href:s,download:t}).click(),setTimeout(function(){URL.revokeObjectURL(s)},1e3)},async $text(t){return o.logger.assertInstanceOf(t,p,String)(),new TextDecoder(t).decode(await this.arrayBuffer())},async $base64(){let t=await this.$dataURL();return t.substring(t.indexOf(",")+1)},async $dataURL(t){o.logger.assertInstanceOf(t,p,String)();let s=t?this.slice(0,this.size,t):this,n=new B;return n.readAsDataURL(s),n.promise()}}}}h(ue,"data");function de(o){let r=h(function(e){let t=e.getAttribute("style");try{let s=e.$window.getComputedStyle(e),n=parseFloat(s.marginLeft)+parseFloat(s.marginRight),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom);e.style.setProperty("box-sizing","content-box","important"),e.style.setProperty("overflow","hidden","important");let a=e.getBoundingClientRect(),l=a.width,c=a.height;e.style.setProperty("border","none","important");let u=l-e.offsetWidth,f=c-e.offsetHeight;l-=u,c-=f,e.style.setProperty("padding",0,"important");let m=l-e.offsetWidth,g=c-e.offsetHeight,y=e.scrollWidth,T=e.scrollHeight;l-=m,c-=g;let b=e.clientWidth,w=e.offsetHeight;e.style.setProperty("overflow","scroll","important");let S=b-e.clientWidth,O=e.offsetHeight-w;return l-=S,{marginWidth:n,borderWidth:u,paddingWidth:m,scrollbarWidth:S,contentWidth:l,marginHeight:i,borderHeight:f,paddingHeight:g,scrollbarHeight:O,contentHeight:c}}finally{t==null?e.removeAttribute("style"):e.setAttribute("style",t)}},"boxsize");return{[[Document.name]]:{get $topLayerElement(){let e=this.$$(":modal, :popover-open, :fullscreen");if(e.length<=1)return e[0]??null;for(let t of e)if(t===this.elementFromPoint(0,0))return t;return null},get $modalElement(){let e=this.querySelectorAll(":modal"),t=this.elementFromPoint(0,0);return Array.prototype.find.call(e,s=>s===t)??null}},[[HTMLElement.name,v.name]]:{$cssPixel(e){if(o.logger.assertInstanceOf(e,Number,String)(),typeof e=="number")return e;let t=parseFloat(e);switch(e.replace(/^-?[0-9.]+/,"")){case"":return t;case"px":return t*1;case"in":return t*96;case"pc":return t*96/6;case"pt":return t*96/6/12;case"cm":return t*96/2.54;case"mm":return t*96/2.54/10;case"Q":return t*96/2.54/10/4}let n=this.getAttribute("style");try{return this.style.marginBottom=e,parseFloat(this.$window.getComputedStyle(this).marginBottom)}finally{n==null?this.removeAttribute("style"):this.setAttribute("style",n)}},$offset(e={}){e=Object.assign({relative:!1,margin:!1},e),o.logger.assertInstanceOf(e,Object)();let t=0,s=0;if(!e.margin){let i=this.$window.getComputedStyle(this);t=parseFloat(i.marginLeft),s=parseFloat(i.marginTop)}if(e.relative)return{left:this.offsetLeft-t,top:this.offsetTop-s};let n=this.getBoundingClientRect();return{left:n.left+window.scrollX-document.documentElement.clientLeft-t,top:n.top+window.scrollY-document.documentElement.clientTop-s}},$size(e={}){typeof e=="string"&&(e={"":{scrollbar:!0},client:{padding:!0},inner:{padding:!0,scrollbar:!0},offset:{padding:!0,border:!0},outer:{padding:!0,border:!0,scrollbar:!0},margin:{padding:!0,border:!0,margin:!0,scrollbar:!0}}[e]),o.logger.assertInstanceOf(e,Object)(),e=Object.assign({scroll:!1,margin:!1,border:!1,padding:!1,scrollbar:!1},e);let t=r(this),s=e.scroll?this.scrollWidth:t.contentWidth,n=e.scroll?this.scrollHeight:t.contentHeight;return e.margin&&(s+=t.marginWidth,n+=t.marginHeight),e.border&&(s+=t.borderWidth,n+=t.borderHeight),e.padding&&(s+=t.paddingWidth,n+=t.paddingHeight),e.scrollbar&&!e.scroll&&(s+=t.scrollbarWidth,n+=t.scrollbarHeight),{width:s,height:n}},$width(e={}){if(typeof e=="number"||typeof e=="string"){d.stringIsNaN(e)&&o.logger.error(`options(${e}) is NaN`);let t=this.$cssPixel(e);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let n=r(this);t-=n.borderWidth+n.paddingWidth}return this.style.width=t+"px",t}return this.$size(e).width},$height(e={}){if(typeof e=="number"||typeof e=="string"){d.stringIsNaN(e)&&o.logger.error(`options(${e}) is NaN`);let t=this.$cssPixel(e);if(this.$window.getComputedStyle(this).boxSizing!=="border-box"){let n=r(this);t-=n.borderHeight+n.paddingHeight}return this.style.height=t+"px",t}return this.$size(e).height},$scrollParent(e={height:!0,width:!0}){return o.logger.assertInstanceOf(e,Object)(),e.height&&this.scrollHeight>this.clientHeight?this:e.width&&this.scrollWidth>this.clientWidth?this:this.parentElement?.$scrollParent(e)??null}},[[DOMRectReadOnly.name]]:{$contains(e){if(e instanceof DOMPointReadOnly)return this.left<=e.x&&e.x<=this.right&&this.top<=e.y&&e.y<=this.bottom;if(e instanceof DOMRectReadOnly)return this.$contains(new DOMPoint(e.left,e.top))&&this.$contains(new DOMPoint(e.right,e.top))&&this.$contains(new DOMPoint(e.left,e.bottom))&&this.$contains(new DOMPoint(e.right,e.bottom));throw new Error(`Unknown type(${e.constructor.name})`)},$intersects(e){if(e instanceof DOMPointReadOnly)return this.left<=e.x&&e.x<=this.right&&this.top<=e.y&&e.y<=this.bottom;if(e instanceof DOMRectReadOnly)return this.$intersects(new DOMPoint(e.left,e.top))||this.$intersects(new DOMPoint(e.right,e.top))||this.$intersects(new DOMPoint(e.left,e.bottom))||this.$intersects(new DOMPoint(e.right,e.bottom));throw new Error(`Unknown type(${e.constructor.name})`)}}}}h(de,"dimensions");function fe(o){let r=h(function(n){return typeof n[0]=="number"&&(n[1]??={},n[1].duration=n[0],n[0]=n[1]),Object.assign({initial:{},reset:!0},n[0])},"handleArguments"),e=new $,t=new $,s=new A;return s.addEventListener("alarm",function(){for(let[n,i]of t.entries())n.style.setProperty("will-change",i);t.clear()}),{[[Element.name,v.name]]:{$willChange(n,i=1e3){o.logger.assertInstanceOf(n,String,Array)(),o.logger.assertInstanceOf(i,Number)(),n=n instanceof Array?n:[n];let a=this.style.getPropertyValue("will-change");return t.getOrSet(this,()=>a),a&&n.push(a),this.style.setProperty("will-change",[...new Set(n)].join(",")),s.restart(i,1),this},async $transition(n,i){o.logger.assertInstanceOf(n,Object)(),o.logger.assertInstanceOf(i,p,Object)(),i=Object.assign({initial:{},reset:!1,duration:400,timing:"ease"},i);let a=e.getOrSet(this,()=>({count:0,style:this.getAttribute("style"),transitionValue:this.style.getPropertyValue("transition")??"",transitionPriority:this.style.getPropertyPriority("transition")??""}));a.count++;for(let[b,w]of Object.entries(i.initial))this.style.setProperty(b,w,"important");this.getClientRects();let l=(this.style.getPropertyValue("transition")??"").split(",").filter(b=>b);for(let[b,w]of Object.entries(n))this.style.setProperty(b,w,"important"),l.push(`${b} ${i.duration}ms ${i.timing}`);this.style.setProperty("transition",l.join(","),"important");let c,u,f=new E((b,w)=>{c=b,u=w}),m=h(()=>{this.removeEventListener("transitionend",y);let b=e.get(this);if(--b.count===0)if(e.delete(this),i.reset)this.setAttribute("style",b.style);else{this.style.setProperty("transition",b.transitionValue,b.transitionPriority);for(let[w,S]of Object.entries(n))this.style.setProperty(w,S,"")}},"complete"),g=new Set(Object.keys(n)),y=h(b=>{g.delete(b.propertyName),g.size===0&&(clearTimeout(T),m(),c(!0))},"listener"),T=setTimeout(function(){m(),c(!1)},i.duration+32);return this.addEventListener("transitionend",y),f},async $fadeIn(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{opacity:0}),this.$transition({opacity:l.opacity},a)},async $fadeOut(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{opacity:l.opacity}),this.$transition({opacity:0},a)},async $slideDown(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{overflow:"hidden",height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0}),this.$transition({height:parseFloat(l.height),"margin-top":parseFloat(l.marginTop),"margin-bottom":parseFloat(l.marginBottom),"padding-top":parseFloat(l.paddingTop),"padding-bottom":parseFloat(l.paddingBottom)},a)},async $slideUp(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{overflow:"hidden",height:parseFloat(l.height),"margin-top":parseFloat(l.marginTop),"margin-bottom":parseFloat(l.marginBottom),"padding-top":parseFloat(l.paddingTop),"padding-bottom":parseFloat(l.paddingBottom)}),this.$transition({height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0},a)},async $slideRight(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{overflow:"hidden",width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0,"max-height":parseFloat(l.height)}),this.$transition({width:parseFloat(l.width),"margin-left":parseFloat(l.marginLeft),"margin-right":parseFloat(l.marginRight),"padding-left":parseFloat(l.paddingLeft),"padding-right":parseFloat(l.paddingRight)},a)},async $slideLeft(n=400,i={}){let a=r(arguments),l=this.$window.getComputedStyle(this);return a.initial=Object.assign(a.initial,{overflow:"hidden",width:parseFloat(l.width),"margin-left":parseFloat(l.marginLeft),"margin-right":parseFloat(l.marginRight),"padding-left":parseFloat(l.paddingLeft),"padding-right":parseFloat(l.paddingRight),"max-height":parseFloat(l.height)}),this.$transition({width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0},a)}}}}h(fe,"effects");function he(o){let r=h(function(e,t){let s=new Date(+e-e.getTimezoneOffset()*6e4);if(t==="notz")return s.toISOString().slice(0,-1);if(t==="full"){let n=e.getTimezoneOffset(),i=Math.abs(n),a=n>0?"-":"+",l=Math.trunc(i/60),c=i%60,u=`${a}${(""+l).padStart(2,"0")}:${(""+c).padStart(2,"0")}`;return s.toISOString().slice(0,-1)+u}if(t==="week"){let l=new Date(Math.trunc((+s+2592e5)/6048e5)*6048e5),c=l.getUTCFullYear(),u=Math.trunc((l-new Date(`${c}-01-01T00:00:00Z`))/6048e5)+1,f=(s.getUTCDay()+6)%7+1;return`${c}-W${(""+u).padStart(2,"0")}-${f}`}},"toLocalISOString");return{[[FormData.name]]:{$appendFromEntries(e){for(let[t,s]of d.objectToEntries(e))this.append(t,s);return this},$toSearchParams(){let e=new URLSearchParams(this);for(let[t,s]of d.objectToEntries(this))s instanceof Blob&&(o.logger.info(`Unset ${t} because file`),e.set(t,""));return e},$toObject(){let e={},t=d.objectToEntries(this).map(([s,n])=>{let i=s.split(/\]\[|\[|\]/);i.length>1&&i.pop();let a=[];for(let[l,c]of i.entries()){if(!c.length){let u=a.join("[@]");e[u]??=0,i[l]=e[u]++}a.push(c)}return[i,n]});return d.entriesToObject(t,!1)},async $json(e="base64"){let t=await d.objectWalkRecursive(this.$toObject(),async function(s){return s instanceof Blob&&(s=function(){if(e==="text")return s.$text();if(e==="base64")return s.$base64();if(typeof e=="function")return e(s);throw new Error(`Unknown convert(${e})`)}()),s});return JSON.stringify(t)}},[[HTMLInputElement.name,v.name]]:{get $valueAsDate(){if(!this.value)return null;if(this.type==="datetime-local")return new Date(this.value);if("valueAsDate"in this)return new Date(this.valueAsDate.getTime()+this.valueAsDate.getTimezoneOffset()*6e4)},set $valueAsDate(e){if(e!=null){if(!(e instanceof Date)){this.valueAsDate=e;return}if(this.type==="datetime-local"){let t=r(e,"notz");this.value!==""?this.$value=t.slice(0,this.value.length):this.step?this.step.includes(".")?this.$value=t.slice(0,23):this.$value=t.slice(0,19):this.$value=t.slice(0,16);return}if(this.type==="month")return this.$value=r(e,"notz").slice(0,7);if(this.type==="week")return this.$value=r(e,"week").slice(0,8);if(this.type==="date")return this.$value=r(e,"notz").slice(0,10);if(this.type==="time"){let t=r(e,"notz");this.value!==""?this.$value=t.slice(11,11+this.value.length):this.step?this.step.includes(".")?this.$value=t.slice(11,23):this.$value=t.slice(11,19):this.$value=t.slice(11,16)}}},get $valueAsNumber(){return this.value?["datetime-local","month","week","date","time"].includes(this.type)?this.$valueAsDate.getTime():"valueAsNumber"in this?this.valueAsNumber:Number.NaN:Number.NaN},set $valueAsNumber(e){if(!(isNaN(e)||e==null)){if(["datetime-local","month","week","date","time"].includes(this.type))return this.$valueAsDate=new Date(+e);"valueAsNumber"in this&&(this.valueAsNumber=e)}}},[[HTMLInputElement.name,RadioNodeList.name,v.name]]:{get $indeterminate(){if(this instanceof RadioNodeList)return this.value==="";if(this.type==="checkbox")return this.indeterminate},set $indeterminate(e){if(o.logger.assertInstanceOf(e,Boolean,Array)(),this instanceof RadioNodeList){e||o.logger.error("RadioNodeList's $indeterminate is readonly"),this.forEach(t=>t.checked=!1);return}if(this.type==="checkbox"){if(!(e instanceof Array)){this.indeterminate=e;return}e=e.filter(t=>t!=null),e.length===0?this.indeterminate=!1:e.every(t=>!t)?(this.indeterminate=!1,this.$value=null):e.every(t=>t)?(this.indeterminate=!1,this.$value=this.value):this.indeterminate=!0}}},[[HTMLInputElement.name,HTMLTextAreaElement.name,HTMLSelectElement.name,v.name]]:{get $defaultValue(){if(["select-one"].includes(this.type))return Array.prototype.find.call(this.options,e=>e.defaultSelected)?.value??null;if(["select-multiple"].includes(this.type))return[...this.options].filter(e=>e.defaultSelected).map(e=>e.value);if(["radio","checkbox"].includes(this.type))return this.defaultChecked?this.value:null;if(["file"].includes(this.type))return this.multiple?[]:null;if(this.type)return this.defaultValue},set $defaultValue(e){if(["select-one"].includes(this.type)){e=""+e;for(let t of this.options)t.defaultSelected=t.value===e}else if(["select-multiple"].includes(this.type)){let t=(e instanceof Array?e:[e]).map(s=>""+s);for(let s of this.options)s.defaultSelected=t.includes(s.value)}else["radio","checkbox"].includes(this.type)?this.defaultChecked=this.value===e:["file"].includes(this.type)||this.type&&(this.defaultValue=e)},get $value(){if(["select-one"].includes(this.type))return Array.prototype.find.call(this.options,e=>e.selected)?.value??null;if(["select-multiple"].includes(this.type))return[...this.options].filter(e=>e.selected).map(e=>e.value);if(["radio","checkbox"].includes(this.type))return this.checked?this.value:null;if(["file"].includes(this.type))return this.multiple?this.files:this.files[0]??null;if(this.type)return this.value},set $value(e){let t=!1;if(["select-one"].includes(this.type))this.value!==e&&(this.value=e,t=!0);else if(["select-multiple"].includes(this.type)){let s=(e instanceof Array?e:[e]).filter(n=>n!==null).map(n=>""+n);for(let n of this.options){let i=s.includes(n.value);n.selected!==i&&(n.selected=i,t=!0)}}else if(["radio","checkbox"].includes(this.type)){let s=this.value===e;this.checked!==s&&(this.checked=s,t=!0)}else if(["file"].includes(this.type)){let s=Array.from(this.files,n=>n.name).join("/");if(e instanceof File){if(e.name!==s){let n=new DataTransfer;n.items.add(e),this.files=n.files,t=!0}}else e instanceof FileList&&Array.from(e,n=>n.name).join("/")!==s&&(this.files=e,t=!0)}else this.type&&this.value!==e&&(this.value=e,t=!0);t&&this.dispatchEvent(new Event("$change",{bubbles:!0}))},$clear(){return["select-one","select-multiple"].includes(this.type)?this.$value=null:["radio","checkbox"].includes(this.type)?this.$value=null:["file"].includes(this.type)?this.$value=new DataTransfer().files:this.type&&(this.$value=""),this},$resetAttribute(){return["select-one","select-multiple"].includes(this.type)?Array.from(this.options).forEach(e=>e.toggleAttribute("selected",e.selected)):this.type==="textarea"?this.textContent=this.value:["radio","checkbox"].includes(this.type)?this.toggleAttribute("checked",this.checked):this.setAttribute("value",this.value),this}},[[HTMLSelectElement.name,HTMLDataListElement.name,v.name]]:{$options(e,t=void 0){o.logger.assertInstanceOf(e,Object,Array)(),t??=this instanceof HTMLSelectElement?"append":null,o.logger.assertInstanceOf(t,p,Boolean,String)(),this.$willChange("scroll-position");let s={top:this.scrollTop,left:this.scrollLeft},n=h(()=>{this.scrollTop=s.top,this.scrollLeft=s.left},"recover"),i=h(l=>{let c={},u=[];for(let[f,m]of d.objectToEntries(l))if(m instanceof Array)u.push(this.$document.$createElement("optgroup",{label:f},...i(m)));else if(m instanceof Node)m.value||=f,u.push(m);else if(d.objectIsPlain(m))if(m={...m},m.value??=f,m.title??=m.label,m.optgroup){let g=m.optgroup;delete m.optgroup,c[g]||(c[g]=this.$document.$createElement("optgroup",{label:g}),u.push(c[g])),c[g].append(this.$document.$createElement("option",m,m.label))}else u.push(this.$document.$createElement("option",m,m.label));else u.push(this.$document.$createElement("option",{value:f,title:m},m));return u},"build");e=i(e);let a=t?this.$value:null;if(t&&typeof t=="string"){let l=(a instanceof Array?a:[a]).filter(u=>u!=null).map(u=>""+u);this.$$("option").$except(u=>l.includes(u.value)).forEach(u=>u.remove()),this.$$("optgroup").$except(u=>u.$contains("option")).forEach(u=>u.remove()),this.$$("hr.kQuery-option-separator").forEach(u=>u.remove());for(let u of this.$$("optgroup")){let f=u.$nextElements(`optgroup[label="${d.stringEscape(u.label??"","selector")}"]`);for(let m of[...f])u[t](...m.$$("option")),m.$contains("option")||m.remove()}this[t](this.$document.$createElement("hr",{class:"kQuery-option-separator"})),this[t](...e);let c=h(function(u){return u.filter(f=>f instanceof HTMLOptionElement&&l.includes(f.value)||f instanceof HTMLOptGroupElement&&!c([...f.$$("option")]).length?(f.remove(),!1):!0)},"filter");c(e)}else this.$replaceChildren(...e);return t&&(this.$value=a),requestAnimationFrame(()=>requestAnimationFrame(n)),this}},[[HTMLFormElement.name,v.name]]:{$resetAttribute(){return this.elements.$resetAttribute(),this}}}}h(he,"forms");function me(o){let r=new Map,e=new $,t=h(function(n){return[...n].flatMap(i=>i instanceof NodeList?[...i]:i)},"normalizeNodes");class s{static{h(this,"Value")}constructor(i){this.value=i}toString(){return""+this.value}}return{[[Window.name]]:{$query(n,i=null){if(i??=(this??globalThis).document,n instanceof Node||n instanceof NodeList)return n;if(n instanceof HTMLCollection)return d.iterableToNodeList(n);if(n instanceof Array){let l=n.map(u=>i.defaultView.$query(u,i)),c=[...new Set(l.flatMap(u=>u instanceof Node?[u]:[...u]))];return c.length===1?c[0]:d.iterableToNodeList(c)}if(typeof n=="string"&&n.trim().charAt(0)==="<"){let l=i.$createNodeListFromHTML(n.trim());return l.length===1?l[0]:l}let a=i.$$(n);return a.length===1?a[0]:a}},[[Document.name]]:{$createNodeListFromHTML(n){o.logger.assertInstanceOf(n,String)();let i=this.createElement("template");return i.innerHTML=n,d.iterableToNodeList([...i.content.childNodes])},$createElement(n,i={},...a){o.logger.assertInstanceOf(n,String)(),o.logger.assertInstanceOf(i,Object)(),i.class=d.objectToClasses(i.class??[]),n=n.replaceAll(/\#([-_0-9a-z]+)/ig,function(c,u){return i.id=u,""}),n=n.replaceAll(/\.([-_0-9a-z]+)/ig,function(c,u){return i.class[u]=!0,""}),n=n.replaceAll(/\[([-_0-9a-z]+)(=(.+?))?\]/ig,function(c,u,f,m){return i[u]=m??"",""});let l=this.createElement(n);for(let[c,u]of Object.entries(d.objectToAttributes(i)))typeof u=="boolean"?l.toggleAttribute(c,u):l.setAttribute(c,u);return l.$append(...a),l},$createCSSRule(n){if(!r.has(n)){let l=new CSSStyleSheet({baseURL:this.location.href,media:n});r.set(n,l),this.adoptedStyleSheets=[...this.adoptedStyleSheets,l]}let i=r.get(n),a=i.insertRule(":root {}");return i.cssRules.item(a)}},[[HTMLTemplateElement.name,v.name]]:{$render(n,i={}){i=Object.assign({escape:"html",logical:"---logical<false/>---",insert:"after"},i);let a=h(function(u){if(i.logical){if(u===!1)return i.logical;if(u===!0)return""}return typeof u=="object"&&!(u instanceof s)?u:typeof i.escape=="function"?i.escape(u):d.stringEscape(u,i.escape)},"tag"),l=h(function(u,f){if(!u)return[];u instanceof Array||(u=[u]);let m=[];for(let[g,y]of u.entries()){let T=this.content.cloneNode(!0);d.anyIsPrimitive(y)&&(y=new s(y)),Object.assign(y,{$parent:f,$index:g,$length:u.length,$first:g===0,$last:g===u.length-1});let b=T.$$("template[data-slot-name]");for(let M of b)M.after(...l.call(M,y[M.dataset.slotName],y)),M.remove();o.logger.assert(()=>T.$contains(M=>!M.$isMetadataContent))();let w=[...T.childNodes].join(""),S=d.stringRender(w,y,a),O=this.$document.$createNodeListFromHTML(S);if(i.logical)for(let M of O.$$$("*"))for(let W of Array.from(M.attributes))W.value===i.logical&&M.attributes.removeNamedItem(W.name);m.push(...O)}return m},"core"),c=l.call(this,n,null);return i.insert&&((e.reset(this,()=>c)??[]).forEach(f=>f.remove()),this[i.insert](...c)),d.iterableToNodeList(c)}},[[Node.name,v.name]]:{$clone(n=!1){if(!n)return this.cloneNode(!0);let i=this.cloneNode(!1);for(let a of this.$events(null,!1,!1))i.$on(a.type+a.namespaces.map(l=>`.${l}`).join(),a.selector,a.listener,a.options);for(let a of this.childNodes)a instanceof Element?i.appendChild(a.$clone(!0)):i.appendChild(a.cloneNode(!0));return i},$before(...n){return this.before(...t(n)),this},$prepend(...n){return this.prepend(...t(n)),this},$insert(n,...i){return this.$childElement(n)?.$before?.(...t(i)),this},$append(...n){return this.append(...t(n)),this},$after(...n){return this.after(...t(n)),this},$replace(...n){return this.replaceWith(...t(n)),this},$replaceChild(n,...i){return this.$insert(n,...i),this.$childElement(n)?.remove(),this},$replaceChildren(...n){return this.replaceChildren(...t(n)),this},$wrap(n){return this.parentNode.insertBefore(n,this),n.appendChild(this),this},$unwrap(){return this.parentNode.$unwrapChildren(),this},$unwrapChildren(){return this.replaceWith(...this.childNodes),this}}}}h(me,"manipulation");function ge(o){let r=new $,e=h(function(s){for(let[n,i]of r.entries())s.target.$matches(i)&&(n.$indeterminate=window.$query(i).$filter("[type=checkbox]").checked)},"documentChange"),t=!1;return{[[Window.name]]:{$open(s){o.logger.assertInstanceOf(s,Object)(),s=Object.assign({url:void 0,target:void 0,window:!0,left:"auto",top:"auto",width:"auto",height:"auto",noopener:void 0,noreferrer:void 0},s),s.width==="auto"&&(s.width=this.outerWidth/2),s.height==="auto"&&(s.height=this.outerHeight/2),s.left==="auto"&&s.width&&(s.left=(this.outerWidth-s.width)/2),s.top==="auto"&&s.height&&(s.top=(this.outerHeight-s.height)/2),s.window&&s.left!=null&&(s.left+=this.screenX),s.window&&s.top!=null&&(s.top+=this.screenY);let n=s.url,i=s.target;d.objectWalkRecursive(s,function(l,c){if(!(["url","target","window"].includes(c)||l===!1))return l});let a=d.objectJoin(s,",");return o.logger.debug("windowFeature",a),this.open(n,i,a)}},[[Element.name,v.name]]:{get $isMetadataContent(){return["base","link","meta","noscript","script","style","template","title"].includes(this.localName.toLowerCase())},$outerTag(s=!0){let n=this.localName,i=""+this.$attrs,a=`<${n}${i?" "+i:""}>`;return s&&(a+=`</${n}>`),a},$markText(s,n,i){o.logger.assertInstanceOf(s,String,RegExp)(),o.logger.assertInstanceOf(n,p,String,Element)(),s instanceof RegExp||(s=new RegExp(d.stringEscape(s,"regex"))),n instanceof Element||(n=this.$document.$createElement(n??"mark"));let a=h(l=>{for(let c of l.children)c.$isMetadataContent||i!=null&&c.$matches(i)||c.$outerTag(!1)===n.$outerTag(!1)||a(c);for(let c of l.childNodes)if(c instanceof CharacterData){let u=c.nodeValue.match(s);if(u){let f=c.splitText(u.index);f.splitText(u[0].length),f.$wrap(n.$clone(!0))}}return l},"core");return this.normalize(),a(this)},async $scrollIntoView(s={}){return o.logger.assertInstanceOf(s,Object)(),s=Object.assign({behavior:void 0,block:void 0,inline:void 0,global:!0,timeout:void 0,threshold:void 0,ifNeeded:!1},s),s.global&&t?E.resolve(!1):new E((n,i)=>{let a=new R((c,u)=>{if(!u&&c.isIntersecting&&s.ifNeeded){n(!1),a.unobserve(c.target);return}c.target.scrollIntoView(s),t=!0,c.isIntersecting&&(l?.stop(),a.unobserve(c.target),t=!1,n(!0))},{threshold:s.threshold??0}),l=s.timeout?new A:null;l?.addEventListener("alarm",c=>{a.unobserve(this),t=!1,i(this)}),l?.start(s.timeout),a.observe(this)})}},[[HTMLInputElement.name,v.name]]:{$interlock(s){if(o.logger.assertInstanceOf(s,p,String)(),this.type!=="checkbox")return this;if(s==null){let n=r.get(this);if(n==null)throw new Error(this+" is not have child selector");this.$indeterminate=window.$query(n).$filter("[type=checkbox]").checked}else r.set(this,s),this.$indeterminate=window.$query(s).$filter("[type=checkbox]").checked,["change","$change"].forEach(n=>{this.$document.addEventListener(n,e),this.addEventListener(n,i=>{let a=i.target,l=window.$query(s).$filter("[type=checkbox]");for(let c of l)c.$value=a.checked?c.value:null})});return this}},[[HTMLDialogElement.name,v.name]]:{$showModal(s={}){return o.logger.assertInstanceOf(s,Object)(),s=Object.assign({outside:!1,escape:!0},s),new E((n,i)=>{let a=h(f=>{f.target.removeEventListener("close",a),f.target.removeEventListener("cancel",l),f.target.removeEventListener("click",c),f.target.removeEventListener("keydown",u),n(f.target.returnValue)},"close"),l=h(f=>{f.target.removeEventListener("close",a),f.target.removeEventListener("cancel",l),f.target.removeEventListener("click",c),f.target.removeEventListener("keydown",u),n(null)},"cancel"),c=h(f=>{this.getBoundingClientRect().$contains(new DOMPointReadOnly(f.clientX,f.clientY))||(this.close(null),this.dispatchEvent(new Event("cancel",{bubbles:!1,cancelable:!0,composed:!1})))},"onOutside"),u=h(f=>{f.code==="Escape"&&f.preventDefault()},"onEscape");this.returnValue="",this.showModal(),this.addEventListener("close",a,{once:!0}),this.addEventListener("cancel",l,{once:!0}),s.outside&&this.addEventListener("click",c),s.escape||this.addEventListener("keydown",u)})}},[[HTMLCollection.name,NodeList.name,FileList.name,DataTransferItemList.name]]:{$at(s){return o.logger.assertInstanceOf(s,Number)(),Array.prototype.at.call(this,s)},async $asyncMap(s){return o.logger.assertInstanceOf(s,Function)(),E.all(d.objectToEntries(this).map(([n,i])=>s(i,n,this)))}}}}h(ge,"miscellaneous");function pe(o){let r={};return{[[Node.name,v.name]]:{$listen(e,t,s={}){s=Object.assign({credentials:!1},s),e=new URL(e,this.baseURI);let n=e.hash.substring(1)||"message";e.hash="";let i=r[e]??=new class extends EventSource{#e;constructor(a,l){super(a,l),o.logger.debug(`SSE open ${a}#`),this.#e=new $}$listen(a,l,c){[...this.#e.entries()].flatMap(([,m])=>Object.keys(m)).includes(l)||(o.logger.debug(`SSE listen ${this.url}#${l}`),this.addEventListener(l,m=>{this.#e.size===0&&(delete r[this.url],this.close(),o.logger.debug(`SSE close ${this.url}`));for(let[g,y]of this.#e.entries())for(let T of y[l]??[])T.call(g,m)}));let f=this.#e.getOrSet(a,()=>({}));f[l]??=[],f[l].push(c)}}(e,{withCredentials:s.credentials});return i.withCredentials!==!!s.credentials&&o.logger.error("SSE url(credentials) is difference"),i.$listen(this,n,t),this}},[[HTMLAnchorElement.name,v.name]]:{$submit(e={}){o.logger.assertInstanceOf(e,Object)(),e=Object.assign({async:!1,form:void 0,method:void 0,enctype:"application/x-www-form-urlencoded",novalidate:!1,data:{}},e),o.logger.assertInstanceOf(e.data,Object,FormData)();let t=this.$URL,s=new FormData;s.$appendFromEntries(t.searchParams),s.$appendFromEntries(e.data),t.search="";let n=e.form??this.$document.$createElement("form",{action:t,method:e.method??"post",enctype:e.enctype,target:this.target,hidden:!0}),i;if(e.form)i=this.$document.$createElement("button",{type:"submit",formaction:t,formtarget:this.target,formmethod:e.method??n.getAttribute("method")??"post",formenctype:e.enctype,formnovalidate:e.novalidate}),n.append(i);else for(let[a,l]of s){let c=this.$document.$createElement("input",{type:"hidden"});c.name=a,c.value=l,n.append(c)}if(e.async||this.download){let a={};i&&(a.data=s,a.submitter=i);try{let l=n.$request(a);return i?.remove(),this.download&&this.download&&!e.raw?l.then(c=>{if(!c.ok)throw new c;c.blob().then(u=>{let f=URL.createObjectURL(u),m=this.$document.$createElement("a",{href:f,download:this.download,hidden:!0});try{this.$document.body.appendChild(m),m.click()}finally{this.$document.body.removeChild(m),setTimeout(()=>URL.revokeObjectURL(f),1e3)}})}):l}finally{i?.remove()}}return i?(n.requestSubmit(i),i.remove()):(this.$document.body.append(n),n.submit(),n.remove()),this}},[[HTMLFormElement.name,v.name]]:{async $request(e={}){if(o.logger.assertInstanceOf(e,Object)(),e=Object.assign({url:void 0,method:void 0,enctype:void 0,novalidate:void 0,submitter:void 0,data:{},fileConverter:void 0,ok:!1,timeout:0},e),e.headers instanceof Headers||(e.headers=new Headers(e.headers??{})),o.logger.assertInstanceOf(e.headers,Headers)(),o.logger.assertInstanceOf(e.data,Object,FormData)(),!(e.novalidate??(e.submitter?.formNoValidate||this.noValidate||!1))&&!this.reportValidity())throw new Error("Invalid form");let s=e.url??e.submitter?.getAttribute("formaction")??this.getAttribute("action")??"",n=e.method??e.submitter?.getAttribute("formmethod")??this.getAttribute("method")??"GET",i=e.enctype??e.headers.get("content-type")??e.submitter?.getAttribute("formenctype")??this.getAttribute("enctype")??"application/x-www-form-urlencoded";e.method=n.toUpperCase(),e.headers.set("content-type",i);let a=new URL(s,this.baseURI),l=new FormData(this,e.submitter);for(let[c,u]of d.objectToEntries(e.data))l.append(c,u);if(e.method==="GET")for(let[c,u]of l.$toSearchParams())a.searchParams.append(c,u);else if(i.startsWith("application/x-www-form-urlencoded"))e.headers.delete("content-type"),e.body=l.$toSearchParams();else if(i.startsWith("multipart/form-data"))e.headers.delete("content-type"),e.body=l;else if(i.startsWith("application/json"))e.body=await l.$json(e.fileConverter);else throw new Error(`Unknown enctype(${i})`);return await d.fetch(a,e)}},[[Element.name,v.name]]:{async $load(e,t={}){d.anyIsStringable(e)?t.url=e:t=e,o.logger.assertInstanceOf(t,Object)(),t=Object.assign({url:void 0,method:void 0,data:{},ok:!1,timeout:0},t),t.headers instanceof Headers||(t.headers=new Headers(t.headers??{})),o.logger.assertInstanceOf(t.url,String)(),o.logger.assertInstanceOf(t.headers,Headers)(),o.logger.assertInstanceOf(t.data,Object,FormData)();let s=t.url.split(" "),n=new URL(s.shift(),this.baseURI),i=s.join(" "),a=(t.method??"GET").toUpperCase(),l=d.objectToEntries(t.data).map(([f,m])=>[f,m instanceof Function?m(this):m]);if(a==="GET")for(let[f,m]of l)n.searchParams.append(f,m);else t.headers.delete("content-type"),t.body=new URLSearchParams(l);let c=await d.fetch(n,t),u=this.$document.$createNodeListFromHTML(await c.text());return i&&(u=u.$$(i)),this.$replaceChildren(u),u}},[[Blob.name,D.name]]:{async $upload(e,t={}){let s;d.anyIsStringable(e)?s=e:s=t.url,o.logger.assertInstanceOf(t,Object)(),t=Object.assign({method:"PUT",timeout:0,ok:!1,headers:{},credentials:"same-origin",progress:h(()=>null,"progress")},t);let n=new XMLHttpRequest;n.open(t.method.toUpperCase(),s,!0),n.timeout=t.timeout,n.withCredentials=t.credentials!=="omit",n.responseType="arraybuffer";for(let[a,l]of d.objectToEntries(t.headers))n.setRequestHeader(a,l);let i=new E((a,l)=>{let c=h(function(){let u=new Response(n.response,{status:n.status,statusText:n.statusText,headers:n.getAllResponseHeaders().split(/\r\n?/).reduce(function(f,m){if(m.trim()){let[g,y]=m.split(":");f.append(g.trim(),y.trim())}return f},new Headers)});return Object.defineProperties(u,{url:{get(){return n.responseURL}}})},"newResponse");n.addEventListener("readystatechange",function(){n.readyState===XMLHttpRequest.HEADERS_RECEIVED&&!t.ok&&!(200<=n.status&&n.status<300)&&l(new Error(`${n.status}: ${n.statusText}`,{cause:c()}))}),n.addEventListener("load",function(){a(c())}),n.addEventListener("error",function(u){l(u)}),n.addEventListener("abort",function(u){l(u)}),n.addEventListener("timeout",function(u){l(u)}),n.upload.addEventListener("progress",function(u){t.progress(u)})});if(t.method.toUpperCase()==="POST"){let a=new FormData;a.append(t.name??"tmp",this),n.send(a)}else n.send(this);return i}}}}h(pe,"networks");function be(o){let r=h(function*(e,t,s){o.logger.assertInstanceOf(e,Node)();for(let n=e[s];n;n=n[s])(t==null||n.$matches(t))&&(yield n)},"nodeGenerateSiblings");return{[[Document.name,DocumentFragment.name,Element.name]]:{$(e){return o.logger.assertInstanceOf(e,String,Function)(),typeof e=="function"?Array.prototype.find.call(this.$$("*"),e)??null:this.querySelector(e)},$$(e){return o.logger.assertInstanceOf(e,String,Function)(),typeof e=="function"?d.iterableToNodeList([...this.$$("*")].filter(e)):this.querySelectorAll(e)},$$$(e){o.logger.assertInstanceOf(e,String,Function)();let t=this.$matches(e)?[this]:[];return typeof e=="function"?d.iterableToNodeList([...t,...[...this.$$("*")].filter(e)]):d.iterableToNodeList([...t,...this.$$(e)])},$contains(e){return o.logger.assertInstanceOf(e,String,Node,Function)(),e instanceof Node?this.contains(e):typeof e=="string"?!!(this.matches(e)||this.querySelector(e)):this.$$$(e).length>0},$matches(e){return o.logger.assertInstanceOf(e,String,Node,Function)(),typeof e=="function"?!!e.call(this,this):e instanceof Node?this===e:this.matches(e)}},[[NodeList.name]]:{$(e){o.logger.assertInstanceOf(e,String,Function)();for(let t of this){let s=t.$?.(e);if(s)return s}return null},$$(e){return o.logger.assertInstanceOf(e,String,Function)(),d.iterableToNodeList(new Set([...this].flatMap(t=>[...t.$$?.(e)??[]])))},$$$(e){return o.logger.assertInstanceOf(e,String,Function)(),d.iterableToNodeList(new Set([...this].flatMap(t=>[...t.$$$?.(e)??[]])))},$contains(e){return o.logger.assertInstanceOf(e,String,Element,Function)(),!!Array.prototype.find.call(this,t=>t.$contains?.(e))},$matches(e){return o.logger.assertInstanceOf(e,String,Element,Function)(),Array.prototype.find.call(this,t=>t.$matches?.(e))},$index(e){o.logger.assertInstanceOf(e,String,Node,Function)();let t=Array.prototype.findIndex.call(this,s=>s.$matches?.(e)??!1);return t===-1?null:t},$filter(e){return o.logger.assertInstanceOf(e,String,Function)(),d.iterableToNodeList([...this].filter(t=>t.$matches?.(e)??!1))},$except(e){return o.logger.assertInstanceOf(e,String,Function)(),d.iterableToNodeList([...this].filter(t=>!(t.$matches?.(e)??!0)))},$slice(e,t){return o.logger.assertInstanceOf(e,p,Number,String,Node,Function)(),o.logger.assertInstanceOf(t,p,Number,String,Node,Function)(),e!=null&&typeof e!="number"&&(e=this.$index(e)??void 0),t!=null&&typeof t!="number"&&(t=this.$index(t)??void 0),d.iterableToNodeList(Array.prototype.slice.call(this,e,t))}},[[Node.name,v.name]]:{get $window(){return this.ownerDocument?.defaultView??window},get $document(){return this.ownerDocument??window.document},$textNodes(e=[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE]){o.logger.assertElementsOf(e,[Node.TEXT_NODE,Node.COMMENT_NODE,Node.CDATA_SECTION_NODE,"metadata"])();let t=[];for(let s of this.childNodes)s instanceof CharacterData?e.includes(s.nodeType)&&t.push(s):(e.includes("metadata")||!s.$isMetadataContent)&&t.push(...s.$textNodes(e));return d.iterableToNodeList(t)},$closest(e){if(o.logger.assertInstanceOf(e,String,Element,Function)(),typeof e=="string")return this.closest(e);for(let t=this;t!=null;t=t.parentElement)if(t.$matches(e))return t;return null},$parents(e){o.logger.assertInstanceOf(e,p,String,Function)();let t=[];for(let s=this.parentElement;s!=null;s=s.parentElement)(e==null||s.$matches(e))&&t.push(s);return d.iterableToNodeList(t)},$childElement(e){if(o.logger.assertInstanceOf(e,p,Number,String,Element,Function)(),typeof e=="number")return this.children.$at(e);for(let t of this.children)if(e==null||t.$matches(e))return t;return null},$childElements(e){o.logger.assertInstanceOf(e,p,String,Function)();let t=d.iterableToNodeList(this.children);return e==null?t:t.$filter(e)},$prevElement(e){return o.logger.assertInstanceOf(e,p,String,Function)(),r(this,e,"previousElementSibling").next().value??null},$prevElements(e){return o.logger.assertInstanceOf(e,p,String,Function)(),d.iterableToNodeList([...r(this,e,"previousElementSibling")].reverse())},$nextElement(e){return o.logger.assertInstanceOf(e,p,String,Function)(),r(this,e,"nextElementSibling").next().value??null},$nextElements(e){return o.logger.assertInstanceOf(e,p,String,Function)(),d.iterableToNodeList(r(this,e,"nextElementSibling"))},$siblingElements(e){return o.logger.assertInstanceOf(e,p,String,Node,Function)(),d.iterableToNodeList([...this.parentNode.children].filter(t=>t!==this&&(e==null||t.$matches?.(e))))}},[[HTMLInputElement.name,v.name]]:{get $radioNodeList(){if(this.type!=="radio"||!this.form)return;let e=this.form,t=this.name,s=e.elements[t];if(s instanceof RadioNodeList)return s;let n=this.$document.$createElement("input",{type:"radio",name:t,hidden:!0});this.insertAdjacentElement("afterend",n);try{return e.elements[t]}finally{n.remove()}}}}}h(be,"traversing");var I=new ne(document.currentScript);I.logger.time("register Plugins");I.extends(ae);I.extends(le);I.extends(ce);I.extends(ue);I.extends(he);I.extends(be);I.extends(me);I.extends(de);I.extends(fe);I.extends(pe);I.extends(ge);I.logger.timeEnd("register Plugins");Object.assign(I.customEvents,{attribute:K,child:G,cookie:X,disable:J,flick:Y,intersect:Z,resize:Q,swipe:ee,visible:te});var mn=I;})();
/**!
 * kQuery
 *
 * @file
 * @license MIT
 * @copyright ryunosuke
 * @ignore
 */
//# sourceMappingURL=kQuery-full.min.js.map
